import{d as _,y as L,u as we,z,U as re,e as d,o as l,b as c,a as e,f as u,g as a,c as W,E as f,G as T,h as w,t as i,n as x,J as S,F as h,i as C,w as Y,bu as Ce,c6 as $e,cK as je,H as se}from"./app-CJkCV51W.js";import{_ as De}from"./AppLayout-BlEKf3Fz.js";import{_ as Te}from"./Breadcrumb-BJQpsGcc.js";import{P as Se}from"./PlusSquareIcon-DA_kLpvy.js";import{S as Ue}from"./SearchIcon-B0safoHl.js";import{U as M,D as U}from"./DownIcon-C_yWQF6q.js";import{u as Ae,U as Ve}from"./index.esm-BvO6AIEM.js";import{S as ae}from"./ShowIcon-CiA5nZAB.js";import{E as oe}from"./EditIcon-B9T5EQzJ.js";import{T as le}from"./TrashIcon-DSAHmBPH.js";import{_ as Be}from"./Modal-Ddbg9qvg.js";import{_ as Ie}from"./ConfirmModal-DAlWp-FQ.js";import{_ as Me}from"./Pagination-C2dOEo8X.js";import{_ as Pe}from"./SelectBrng-C5pMKisR.js";import{u as Fe}from"./useAuth-DvuTgkfF.js";import"./FlashMessage-D4C-FUm8.js";import"./LayoutShell-FWpWJLvi.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./LayoutShell.vue_vue_type_style_index_0_lang-CRqqKi3W.js";const Ee={class:"flex overflow-hidden flex-col gap-3 px-3 h-full"},Re={class:"flex justify-between items-center h-10"},Ke={class:"flex flex-col overflow-hidden rounded-lg border border-gray-200 bg-white dark:border-gray-600 dark:bg-white/[0.03]"},Ne={class:"flex flex-col gap-2 px-8 h-16 sm:flex-row sm:items-center sm:justify-between"},Oe={class:"flex gap-3 items-center"},Le={class:"relative py-2"},ze={class:"absolute left-4 top-1/2 -translate-y-1/2"},Ge={class:"relative"},qe={class:"font-medium"},He={key:0,class:"absolute right-0 z-10 mt-2 w-52 bg-white rounded-lg border shadow dark:border-gray-700 dark:bg-gray-800"},We={class:"py-1 text-sm"},Ye={class:"overflow-auto","data-simplebar":""},Je={class:"min-w-full text-sm table-fixed"},Qe={class:"flex gap-2 justify-center items-center px-3 cursor-pointer"},Xe={class:"flex flex-col items-center"},Ze={class:"flex gap-2 justify-center items-center px-3"},et={class:"flex flex-col items-center"},tt={class:"flex gap-2 justify-center items-center px-3"},rt={class:"flex flex-col items-center"},st={class:"flex gap-2 justify-center items-center px-3"},at={class:"flex flex-col items-center"},ot={class:"flex gap-2 justify-center items-center px-3"},lt={class:"flex flex-col items-center"},dt={class:"flex gap-2 justify-center items-center px-3"},nt={class:"flex flex-col items-center"},it={class:"py-2 px-2 bg-gray-50 border border-gray-200 dark:border-gray-600 dark:bg-gray-900"},ct=["value"],ut={class:"py-2 px-2 bg-gray-50 border border-gray-200 dark:border-gray-600 dark:bg-gray-900"},yt={class:"py-2 px-2 bg-gray-50 border border-gray-200 dark:border-gray-600 dark:bg-gray-900"},gt=["value"],pt={class:"py-2 px-2 bg-gray-50 border border-gray-200 dark:border-gray-600 dark:bg-gray-900"},bt={class:"py-2 px-2 bg-gray-50 border border-gray-200 dark:border-gray-600 dark:bg-gray-900"},xt=["value"],mt={class:"py-2 px-2 bg-gray-50 border border-gray-200 dark:border-gray-600 dark:bg-gray-900"},ft=["onClick"],ht={colspan:8,class:"px-4 py-2 font-semibold text-left text-gray-600 bg-gray-50 dark:bg-gray-900/40 dark:text-gray-300"},kt={class:"inline-flex gap-2 items-center"},vt={class:"ml-2 text-xs font-normal text-gray-500"},_t={key:1,class:"cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-800"},wt={class:"py-2.5 border-gray-200 border-y dark:border-gray-600"},Ct={class:"flex justify-center items-center whitespace-nowrap"},$t={class:"px-3 text-gray-500 dark:text-gray-400"},jt={class:"py-2.5 border border-gray-200 dark:border-gray-600"},Dt={class:"flex gap-3 items-center whitespace-nowrap ps-5"},Tt=["src"],St={class:"flex flex-col leading-tight"},Ut={class:"font-medium text-gray-800 dark:text-white/90"},At={class:"text-gray-500 dark:text-gray-400"},Vt={class:"py-2.5 border border-gray-200 dark:border-gray-600"},Bt={class:"flex justify-center items-center px-3 whitespace-nowrap"},It={class:"text-gray-500 dark:text-gray-400"},Mt={class:"py-2.5 border border-gray-200 dark:border-gray-600"},Pt={class:"flex justify-center items-center px-3 whitespace-nowrap"},Ft={class:"text-gray-500 dark:text-gray-400"},Et={class:"py-2.5 border border-gray-200 dark:border-gray-600"},Rt={class:"flex justify-center items-center px-3 whitespace-nowrap"},Kt={class:"text-gray-500 dark:text-gray-400"},Nt={class:"py-2.5 border border-gray-200 dark:border-gray-600"},Ot={class:"flex justify-center items-center px-3 whitespace-nowrap"},Lt={class:"text-gray-500 dark:text-gray-400"},zt={class:"py-2.5 border border-gray-200 dark:border-gray-600"},Gt={class:"flex justify-center items-center px-3 text-xs whitespace-nowrap"},qt={key:0,class:"px-3 py-1 font-normal text-green-600 bg-green-100 rounded-lg border-2 border-green-300"},Ht={key:1,class:"px-2 py-1 font-normal text-red-600 bg-red-100 rounded-lg border-2 border-red-300"},Wt={class:"py-2.5 border-gray-200 border-y dark:border-gray-600"},Yt={class:"flex gap-3 justify-center px-4 whitespace-nowrap"},Jt=["onClick"],Qt=["onClick"],Xt={class:"py-2.5 border-gray-200 border-y dark:border-gray-600"},Zt={class:"flex justify-center items-center whitespace-nowrap"},er={class:"px-3 text-gray-500 dark:text-gray-400"},tr={class:"py-2.5 border border-gray-200 dark:border-gray-600"},rr={class:"flex gap-3 items-center whitespace-nowrap ps-5"},sr=["src"],ar={class:"flex flex-col leading-tight"},or={class:"font-medium text-gray-800 dark:text-white/90"},lr={class:"text-gray-500 dark:text-gray-400"},dr={class:"py-2.5 border border-gray-200 dark:border-gray-600"},nr={class:"flex justify-center items-center px-3 whitespace-nowrap"},ir={class:"text-gray-500 dark:text-gray-400"},cr={class:"py-2.5 border border-gray-200 dark:border-gray-600"},ur={class:"flex justify-center items-center px-3 whitespace-nowrap"},yr={class:"text-gray-500 dark:text-gray-400"},gr={class:"py-2.5 border border-gray-200 dark:border-gray-600"},pr={class:"flex justify-center items-center px-3 whitespace-nowrap"},br={class:"text-gray-500 dark:text-gray-400"},xr={class:"py-2.5 border border-gray-200 dark:border-gray-600"},mr={class:"flex justify-center items-center px-3 whitespace-nowrap"},fr={class:"text-gray-500 dark:text-gray-400"},hr={class:"py-2.5 border border-gray-200 dark:border-gray-600"},kr={class:"flex justify-center items-center px-3 text-xs whitespace-nowrap"},vr={key:0,class:"px-3 py-1 font-normal text-green-600 bg-green-100 rounded-lg border-2 border-green-300"},_r={key:1,class:"px-2 py-1 font-normal text-red-600 bg-red-100 rounded-lg border-2 border-red-300"},wr={class:"py-2.5 border-gray-200 border-y dark:border-gray-600"},Cr={class:"flex gap-3 justify-center px-4 whitespace-nowrap"},$r=["onClick"],jr=["onClick"],Dr={key:1},Tr={class:"space-y-3"},Sr={class:"space-y-1 text-sm"},Ur={key:0,class:"mb-3"},Ar={class:"grid gap-2 grid-cols-3"},Vr=["src","alt"],Br=["onClick"],Ir=["onClick"],Mr={key:2,class:"absolute inset-0 flex items-center justify-center bg-red-500/20 rounded-lg"},Pr={key:1,class:"flex items-center justify-center h-24 text-xs text-gray-500 border border-gray-300 rounded-lg"},Fr={key:1,class:"mb-3"},Er={class:"grid gap-2 grid-cols-3"},Rr=["src","alt"],Kr=["onClick"],Nr={class:"flex gap-8 items-center justify-stretch"},Or={class:"flex flex-col text-start"},Lr={key:0},zr={key:1},Gr={key:2,class:"mt-2 text-sm font-medium text-red-600 dark:text-red-400"},qr={class:"space-y-1 text-sm"},Hr={key:0,class:"text-sm text-red-500"},Wr={class:"space-y-1 text-sm"},Yr={key:0,class:"text-sm text-red-500"},Jr={class:"space-y-1 text-sm"},Qr={key:0,class:"text-sm text-red-500"},Xr={class:"space-y-1 text-sm"},Zr={key:0,class:"text-sm text-red-500"},es={class:"space-y-1 text-sm"},ts=["value"],rs={key:0,class:"text-sm text-red-500"},ss={class:"space-y-1 text-sm"},as=["value"],os={key:0,class:"text-sm text-red-500"},ls={class:"space-y-1 text-sm"},ds={key:0,class:"text-sm text-red-500"},ns={class:"space-y-1 text-sm"},is={key:0,class:"text-sm text-red-500"},Ss=Object.assign({layout:De},{__name:"Index",props:{vehicles:Object,vehicleTypes:Object,branches:Object,employees:Object,search:String,sortBy:String,sortDirection:String,perPage:Number,auth:Object,groupBy:{type:[String,null],default:null},filters:{type:Object,default:()=>({branch_id:null,employee_id:null,status:null,vehicle_type_id:null,license_code:null,track:null})}},setup(n){const de=[{label:"Kendaraan"},{label:"Data Kendaraan"}],m=n,{can:D}=Fe();function A({sortBy:o=m.sortBy,sortDirection:t=m.sortDirection}={}){se.get(route("vehicles.index"),{search:E.value,sortBy:o,sortDirection:t,group_by:P.value,...y.value},{preserveScroll:!0,preserveState:!0,replace:!0,onStart:()=>{typeof window<"u"&&(window.__suppressProgress=!0)},onFinish:()=>{typeof window<"u"&&(window.__suppressProgress=!1)}})}const E=_(m.search||""),R=_(!1),P=_(m.groupBy||null),y=_({branch_id:m.filters?.branch_id??null,employee_id:m.filters?.employee_id??null,status:m.filters?.status??null,vehicle_type_id:m.filters?.vehicle_type_id??null,license_code:m.filters?.license_code??null,track:m.filters?.track??null}),ne=L(()=>{switch(P.value){case"branch":return"Cabang";case"employee":return"Driver";case"status":return"Status";case"type":return"Tipe";default:return"None"}}),ie=L(()=>(m.vehicleTypes??[]).map(o=>({id:o.id,name:`${o.name} - ${o.category}`}))),K=L(()=>!s.files||s.files.length===0?[]:s.files.map(o=>o instanceof File?URL.createObjectURL(o):null).filter(Boolean)),N=_(new Set);function ce(o){const t=new Set(N.value);t.has(o)?t.delete(o):t.add(o),N.value=t}const ue=L(()=>{const o=m.vehicles?.data||[],t=P.value;if(!t)return[];const k=g=>{switch(t){case"branch":return`Cabang: ${g.branch?.name??"Tanpa Cabang"}`;case"employee":return`Driver: ${g.driver?.name??"Tanpa Driver"}`;case"status":return`Status: ${g.status?"Aktif":"Non Aktif"}`;case"type":return`Tipe: ${g.type?.name??"Tanpa Tipe"}`;default:return""}},j=g=>{switch(t){case"branch":return g.branch_id??"null";case"employee":return g.employee_id??"null";case"status":return g.status?1:0;case"type":return g.vehicle_type_id??"null";default:return"ungrouped"}},r=[],p=new Map;for(const g of o){const I=j(g);p.has(I)||(p.set(I,r.length),r.push({key:I,label:k(g),items:[]})),r[p.get(I)].items.push(g)}const v=[];for(const g of r)if(v.push({__group:!0,key:g.key,label:g.label,count:g.items.length}),!N.value.has(g.key))for(const I of g.items)v.push({__group:!1,data:I});return v});function ye(){R.value=!R.value}function F(o){P.value=o,R.value=!1,A()}let J=null;z(E,()=>{clearTimeout(J),J=setTimeout(()=>{A()},400)});let Q=null;z(()=>y.value.license_code,()=>{clearTimeout(Q),Q=setTimeout(()=>{A()},400)});let X=null;z(()=>y.value.track,()=>{clearTimeout(X),X=setTimeout(()=>{A()},400)}),z(()=>[y.value.vehicle_type_id,y.value.branch_id,y.value.employee_id,y.value.status],()=>{A()});function V(o){let t="asc";m.sortBy===o&&m.sortDirection==="asc"&&(t="desc"),A({sortBy:o,sortDirection:t})}const O=_(!1),B=_(!1),$=_([]),s=we({id:null,vehicle_type_id:null,license_code:"",chassis_code:"",machine_code:"",branch_id:null,employee_id:null,track:"",status:1,files:[]});function ge(o,t){s.files=o,t.forEach(k=>{k.errors.forEach(j=>{j.code==="file-too-large"&&flash.error(`File ${k.file.name} terlalu besar!`),j.code==="file-invalid-type"&&flash.error(`Tipe file ${k.file.name} tidak diperbolehkan!`)})})}function pe(o){const t=s.files[o];if(t instanceof File){const k=URL.createObjectURL(t);URL.revokeObjectURL(k)}s.files.splice(o,1)}function be(o){$.value.push(o)}function xe(o){$.value=$.value.filter(t=>t!==o)}function G(o){return $.value.includes(o)}const{getRootProps:me,getInputProps:fe,isDragActive:he}=Ae({onDrop:ge,multiple:!0,accept:"image/jpeg, image/png",maxSize:5*1024*1024});function ke(){s.reset(),B.value=!1,O.value=!0}function Z(o){console.log("openEditModal called",o),s.id=o.id,s.vehicle_type_id=o.vehicle_type_id?parseInt(o.vehicle_type_id):null,s.license_code=o.license_code,s.chassis_code=o.chassis_code,s.machine_code=o.machine_code,s.branch_id=o.branch_id?parseInt(o.branch_id):null,s.employee_id=o.employee_id?parseInt(o.employee_id):null,s.track=o.track,s.status=o.status?1:0,s.files=[],$.value=[],b.value=o,B.value=!0,O.value=!0}function q(){K.value.length>0&&K.value.forEach(o=>{URL.revokeObjectURL(o)}),O.value=!1,b.value=null,$.value=[],s.reset(),s.clearErrors()}function ve(){if(console.log("saveVehicle called"),console.log("Form data before transform:",s.data()),B.value){const o=b.value?.files?.length||0,t=$.value.length,k=s.files.length;if(o-t<=0&&k===0){s.setError("files","Minimal harus ada 1 foto kendaraan. Silakan tambahkan foto baru atau batalkan penghapusan foto yang ada.");return}const r={...s.data(),deleted_images:$.value,_method:"PUT"};console.log("Update data:",r),s.transform(()=>r).post(route("vehicles.update",s.id),{onSuccess:()=>{console.log("Update success"),q()},onError:p=>{console.log("Update errors:",p)}})}else{const o={...s.data(),vehicle_type_id:typeof s.vehicle_type_id=="string"?s.vehicle_type_id:s.vehicle_type_id?parseInt(s.vehicle_type_id):null,branch_id:s.branch_id?parseInt(s.branch_id):null,employee_id:s.employee_id?parseInt(s.employee_id):null};console.log("Form data after transform:",o),s.transform(()=>o).post(route("vehicles.store"),{onSuccess:()=>{console.log("Create success"),q()},onError:t=>{console.log("Create errors:",t)}})}}const b=_(null),H=_(!1),ee=o=>{b.value=o,H.value=!0},te=()=>{b.value=null,H.value=!1},_e=()=>{se.delete(route("vehicles.destroy",b.value.id),{onSuccess:()=>{te()},preserveScroll:!0})};return(o,t)=>{const k=re("Head"),j=re("Link");return l(),d(h,null,[c(k,{title:"Daftar Kendaraan"}),e("div",Ee,[e("div",Re,[c(Te,{items:de}),a(D)("vehicles.create")?(l(),d("button",{key:0,onClick:ke,type:"button",class:"flex gap-2 items-center px-3 py-2 text-white bg-blue-500 rounded"},[c(Se),t[26]||(t[26]=e("span",{class:"hidden text-sm md:block"},"Tambah Kendaraan",-1))])):u("",!0)]),e("div",Ke,[e("div",Ne,[t[28]||(t[28]=e("div",{class:"font-bold text-gray-700 md:text-xl dark:text-gray-300"}," Daftar Kendaraan ",-1)),e("div",Oe,[e("div",Le,[e("div",ze,[c(Ue,{class:"text-gray-400"})]),f(e("input",{"onUpdate:modelValue":t[0]||(t[0]=r=>E.value=r),type:"text",placeholder:"Cari kendaraan",class:"h-10 w-full rounded-lg border border-gray-200 bg-transparent py-2.5 pl-12 pr-4 text-sm text-gray-800 placeholder:text-gray-400 focus:border-blue-300 focus:outline-hidden focus:ring-3 focus:ring-blue-500/10 dark:border-gray-700 dark:bg-gray-800 dark:text-white/90 dark:placeholder:text-gray-400 dark:focus:border-blue-800 xl:w-[200px]"},null,512),[[T,E.value]])]),e("div",Ge,[e("button",{type:"button",onClick:ye,class:"px-3 h-10 text-sm rounded-lg border border-gray-200 hover:bg-gray-50 dark:border-gray-700 dark:text-white/90"},[t[27]||(t[27]=w(" Group by: ",-1)),e("span",qe,i(ne.value),1)]),R.value?(l(),d("div",He,[e("ul",We,[e("li",null,[e("button",{onClick:t[1]||(t[1]=r=>F(null)),class:"px-3 py-2 w-full text-left hover:bg-gray-50 dark:hover:bg-gray-700"}," Tidak digrup ")]),e("li",null,[e("button",{onClick:t[2]||(t[2]=r=>F("branch")),class:"px-3 py-2 w-full text-left hover:bg-gray-50 dark:hover:bg-gray-700"}," Cabang ")]),e("li",null,[e("button",{onClick:t[3]||(t[3]=r=>F("employee")),class:"px-3 py-2 w-full text-left hover:bg-gray-50 dark:hover:bg-gray-700"}," Driver ")]),e("li",null,[e("button",{onClick:t[4]||(t[4]=r=>F("status")),class:"px-3 py-2 w-full text-left hover:bg-gray-50 dark:hover:bg-gray-700"}," Status ")]),e("li",null,[e("button",{onClick:t[5]||(t[5]=r=>F("type")),class:"px-3 py-2 w-full text-left hover:bg-gray-50 dark:hover:bg-gray-700"}," Tipe Kendaraan ")])])])):u("",!0)])])]),e("div",Ye,[e("table",Je,[t[44]||(t[44]=e("colgroup",null,[e("col",{style:{width:"56px"}}),e("col",{style:{width:"220px"}}),e("col",{style:{width:"160px"}}),e("col",{style:{width:"220px"}}),e("col",{style:{width:"220px"}}),e("col",{style:{width:"180px"}}),e("col",{style:{width:"120px"}}),e("col",{style:{width:"120px"}})],-1)),e("thead",null,[e("tr",null,[t[35]||(t[35]=e("th",{class:"py-2.5 bg-gray-100 border-gray-200 border-y dark:border-gray-600 dark:bg-gray-800"},[e("div",{class:"flex justify-center items-center px-3"},[e("p",{class:"flex flex-col items-center font-medium text-gray-500 whitespace-nowrap dark:text-gray-400"}," No. ")])],-1)),e("th",{onClick:t[6]||(t[6]=r=>V("name")),class:"py-3 bg-gray-100 border border-gray-200 dark:border-gray-600 dark:bg-gray-800"},[e("div",Qe,[t[29]||(t[29]=e("p",{class:"font-medium text-gray-500 whitespace-nowrap dark:text-gray-400"}," Nama Kendaraan ",-1)),e("div",Xe,[c(M,{class:x(["-mb-1",n.sortBy==="name"&&n.sortDirection==="asc"?"text-gray-900 dark:text-gray-200":"text-gray-400 dark:text-gray-500"])},null,8,["class"]),c(U,{class:x(["-mt-1",n.sortBy==="name"&&n.sortDirection==="desc"?"text-gray-900 dark:text-gray-200":"text-gray-400 dark:text-gray-500"])},null,8,["class"])])])]),e("th",{onClick:t[7]||(t[7]=r=>V("license_code")),class:"py-3 bg-gray-100 border border-gray-200 cursor-pointer dark:border-gray-600 dark:bg-gray-800"},[e("div",Ze,[t[30]||(t[30]=e("p",{class:"font-medium text-gray-500 whitespace-nowrap dark:text-gray-400"}," Plat Nomor ",-1)),e("div",et,[c(M,{class:x(["-mb-1",n.sortBy==="license_code"&&n.sortDirection==="asc"?"text-gray-900 dark:text-gray-200":"text-gray-400 dark:text-gray-500"])},null,8,["class"]),c(U,{class:x(["-mt-1",n.sortBy==="license_code"&&n.sortDirection==="desc"?"text-gray-900 dark:text-gray-200":"text-gray-400 dark:text-gray-500"])},null,8,["class"])])])]),e("th",{onClick:t[8]||(t[8]=r=>V("branch_id")),class:"py-3 bg-gray-100 border border-gray-200 cursor-pointer dark:border-gray-600 dark:bg-gray-800"},[e("div",tt,[t[31]||(t[31]=e("p",{class:"font-medium text-gray-500 whitespace-nowrap dark:text-gray-400"}," Cabang ",-1)),e("div",rt,[c(M,{class:x(["-mb-1",n.sortBy==="branch_id"&&n.sortDirection==="asc"?"text-gray-900 dark:text-gray-200":"text-gray-400 dark:text-gray-500"])},null,8,["class"]),c(U,{class:x(["-mt-1",n.sortBy==="branch_id"&&n.sortDirection==="desc"?"text-gray-900 dark:text-gray-200":"text-gray-400 dark:text-gray-500"])},null,8,["class"])])])]),e("th",{onClick:t[9]||(t[9]=r=>V("track")),class:"py-3 bg-gray-100 border border-gray-200 cursor-pointer dark:border-gray-600 dark:bg-gray-800"},[e("div",st,[t[32]||(t[32]=e("p",{class:"font-medium text-gray-500 whitespace-nowrap dark:text-gray-400"}," Rute ",-1)),e("div",at,[c(M,{class:x(["-mb-1",n.sortBy==="track"&&n.sortDirection==="asc"?"text-gray-900 dark:text-gray-200":"text-gray-400 dark:text-gray-500"])},null,8,["class"]),c(U,{class:x(["-mt-1",n.sortBy==="track"&&n.sortDirection==="desc"?"text-gray-900 dark:text-gray-200":"text-gray-400 dark:text-gray-500"])},null,8,["class"])])])]),e("th",{onClick:t[10]||(t[10]=r=>V("employee_id")),class:"py-3 bg-gray-100 border border-gray-200 cursor-pointer dark:border-gray-600 dark:bg-gray-800"},[e("div",ot,[t[33]||(t[33]=e("p",{class:"font-medium text-gray-500 whitespace-nowrap dark:text-gray-400"}," Driver ",-1)),e("div",lt,[c(M,{class:x(["-mb-1",n.sortBy==="employee_id"&&n.sortDirection==="asc"?"text-gray-900 dark:text-gray-200":"text-gray-400 dark:text-gray-500"])},null,8,["class"]),c(U,{class:x(["-mt-1",n.sortBy==="employee_id"&&n.sortDirection==="desc"?"text-gray-900 dark:text-gray-200":"text-gray-400 dark:text-gray-500"])},null,8,["class"])])])]),e("th",{onClick:t[11]||(t[11]=r=>V("status")),class:"py-3 bg-gray-100 border border-gray-200 cursor-pointer dark:border-gray-600 dark:bg-gray-800"},[e("div",dt,[t[34]||(t[34]=e("p",{class:"font-medium text-gray-500 whitespace-nowrap dark:text-gray-400"}," Status ",-1)),e("div",nt,[c(M,{class:x(["-mb-1",n.sortBy==="status"&&n.sortDirection==="asc"?"text-gray-900 dark:text-gray-200":"text-gray-400 dark:text-gray-500"])},null,8,["class"]),c(U,{class:x(["-mt-1",n.sortBy==="status"&&n.sortDirection==="desc"?"text-gray-900 dark:text-gray-200":"text-gray-400 dark:text-gray-500"])},null,8,["class"])])])]),t[36]||(t[36]=e("th",{class:"bg-gray-100 border-gray-200 border-y dark:border-gray-600 dark:bg-gray-800"},[e("div",{class:"flex justify-center items-center"},[e("p",{class:"font-medium text-gray-500 whitespace-nowrap dark:text-gray-400"}," Aksi ")])],-1))]),e("tr",null,[t[41]||(t[41]=e("th",{class:"py-2 px-2 bg-gray-50 border-y border-gray-200 dark:border-gray-600 dark:bg-gray-900"},null,-1)),e("th",it,[f(e("select",{"onUpdate:modelValue":t[12]||(t[12]=r=>y.value.vehicle_type_id=r),class:"w-full h-10 px-3 text-xs sm:text-sm rounded border-gray-300 dark:border-gray-700 dark:bg-gray-800 dark:text-white/90"},[t[37]||(t[37]=e("option",{value:null},"Semua",-1)),(l(!0),d(h,null,C(n.vehicleTypes,r=>(l(),d("option",{key:r.id,value:r.id},i(r.name),9,ct))),128))],512),[[S,y.value.vehicle_type_id]])]),e("th",ut,[f(e("input",{"onUpdate:modelValue":t[13]||(t[13]=r=>y.value.license_code=r),type:"text",placeholder:"Cari plat",class:"w-full h-10 px-3 text-xs sm:text-sm rounded border-gray-300 dark:border-gray-700 dark:bg-gray-800 dark:text-white/90"},null,512),[[T,y.value.license_code]])]),e("th",yt,[f(e("select",{"onUpdate:modelValue":t[14]||(t[14]=r=>y.value.branch_id=r),class:"w-full h-10 px-3 text-xs sm:text-sm rounded border-gray-300 dark:border-gray-700 dark:bg-gray-800 dark:text-white/90"},[t[38]||(t[38]=e("option",{value:null},"Semua",-1)),(l(!0),d(h,null,C(n.branches,r=>(l(),d("option",{key:r.id,value:r.id},i(r.name),9,gt))),128))],512),[[S,y.value.branch_id]])]),e("th",pt,[f(e("input",{"onUpdate:modelValue":t[15]||(t[15]=r=>y.value.track=r),type:"text",placeholder:"Cari rute",class:"w-full h-10 px-3 text-xs sm:text-sm rounded border-gray-300 dark:border-gray-700 dark:bg-gray-800 dark:text-white/90"},null,512),[[T,y.value.track]])]),e("th",bt,[f(e("select",{"onUpdate:modelValue":t[16]||(t[16]=r=>y.value.employee_id=r),class:"w-full h-10 px-3 text-xs sm:text-sm rounded border-gray-300 dark:border-gray-700 dark:bg-gray-800 dark:text-white/90"},[t[39]||(t[39]=e("option",{value:null},"Semua",-1)),(l(!0),d(h,null,C(n.employees,r=>(l(),d("option",{key:r.id,value:r.id},i(r.name),9,xt))),128))],512),[[S,y.value.employee_id]])]),e("th",mt,[f(e("select",{"onUpdate:modelValue":t[17]||(t[17]=r=>y.value.status=r),class:"w-full h-10 px-3 text-xs sm:text-sm rounded border-gray-300 dark:border-gray-700 dark:bg-gray-800 dark:text-white/90"},[...t[40]||(t[40]=[e("option",{value:null},"Semua",-1),e("option",{value:1},"Aktif",-1),e("option",{value:0},"Tidak Aktif",-1)])],512),[[S,y.value.status]])]),t[42]||(t[42]=e("th",{class:"py-2 px-2 bg-gray-50 border-y border-gray-200 dark:border-gray-600 dark:bg-gray-900"},null,-1))])]),e("tbody",null,[n.vehicles.data&&n.vehicles.data.length>0?(l(),d(h,{key:0},[P.value?(l(!0),d(h,{key:0},C(ue.value,(r,p)=>(l(),d(h,{key:r.__group?`g-${p}`:r.data.id},[r.__group?(l(),d("tr",{key:0,class:"cursor-pointer select-none",onClick:v=>ce(r.key)},[e("td",ht,[e("span",kt,[e("span",{class:x(["inline-block",N.value.has(r.key)?"rotate-[-90deg] transition-transform":"rotate-0 transition-transform"])},[c(U)],2),e("span",null,i(r.label),1),e("span",vt,"("+i(r.count)+")",1)])])],8,ft)):(l(),d("tr",_t,[e("td",wt,[e("div",Ct,[e("p",$t,i((n.vehicles.current_page-1)*n.vehicles.per_page+p+1)+". ",1)])]),e("td",jt,[e("div",Dt,[e("img",{class:"object-cover w-10 h-10 rounded-full",src:r.data.photo?`/storage/${r.data.photo}`:`https://ui-avatars.com/api/?name=${encodeURIComponent(r.data.type.name)}&background=3b82f6&color=fff`,alt:"Vehicle photo",loading:"lazy"},null,8,Tt),e("div",St,[e("p",Ut,i(r.data.type.name),1),e("span",At,i(r.data.type.category),1)])])]),e("td",Vt,[e("div",Bt,[e("p",It,i(r.data.license_code),1)])]),e("td",Mt,[e("div",Pt,[e("p",Ft,i(r.data.branch?.name),1)])]),e("td",Et,[e("div",Rt,[e("p",Kt,i(r.data.track),1)])]),e("td",Nt,[e("div",Ot,[e("p",Lt,i(r.data.driver?.name),1)])]),e("td",zt,[e("div",Gt,[r.data.status?(l(),d("span",qt," Aktif ")):(l(),d("span",Ht," Non Aktif "))])]),e("td",Wt,[e("div",Yt,[a(D)("vehicles.view")?(l(),W(j,{key:0,href:o.route("vehicles.show",r.data.id)},{default:Y(()=>[c(ae,{class:"text-blue-400"})]),_:1},8,["href"])):u("",!0),a(D)("vehicles.edit")?(l(),d("button",{key:1,onClick:v=>Z(r.data)},[c(oe,{class:"text-yellow-500"})],8,Jt)):u("",!0),a(D)("vehicles.delete")?(l(),d("button",{key:2,onClick:v=>ee(r.data)},[c(le,{class:"text-red-500"})],8,Qt)):u("",!0)])])]))],64))),128)):(l(!0),d(h,{key:1},C(n.vehicles.data,(r,p)=>(l(),d("tr",{key:r.id,class:"cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-800"},[e("td",Xt,[e("div",Zt,[e("p",er,i((n.vehicles.current_page-1)*n.vehicles.per_page+p+1)+". ",1)])]),e("td",tr,[e("div",rr,[e("img",{class:"object-cover w-10 h-10 rounded-full",src:r.photo?`/storage/${r.photo}`:`https://ui-avatars.com/api/?name=${encodeURIComponent(r.type.name)}&background=3b82f6&color=fff`,alt:"Vehicle photo",loading:"lazy"},null,8,sr),e("div",ar,[e("p",or,i(r.type.name),1),e("span",lr,i(r.type.category),1)])])]),e("td",dr,[e("div",nr,[e("p",ir,i(r.license_code),1)])]),e("td",cr,[e("div",ur,[e("p",yr,i(r.branch?.name),1)])]),e("td",gr,[e("div",pr,[e("p",br,i(r.track),1)])]),e("td",xr,[e("div",mr,[e("p",fr,i(r.driver?.name),1)])]),e("td",hr,[e("div",kr,[r.status?(l(),d("span",vr," Aktif ")):(l(),d("span",_r," Non Aktif "))])]),e("td",wr,[e("div",Cr,[a(D)("vehicles.view")?(l(),W(j,{key:0,href:o.route("vehicles.show",r.id)},{default:Y(()=>[c(ae,{class:"text-blue-400"})]),_:1},8,["href"])):u("",!0),a(D)("vehicles.edit")?(l(),d("button",{key:1,onClick:v=>Z(r)},[c(oe,{class:"text-yellow-500"})],8,$r)):u("",!0),a(D)("vehicles.delete")?(l(),d("button",{key:2,onClick:v=>ee(r)},[c(le,{class:"text-red-500"})],8,jr)):u("",!0)])])]))),128))],64)):(l(),d("tr",Dr,[...t[43]||(t[43]=[e("td",{colspan:"8",class:"py-6 font-medium text-center text-gray-500 dark:text-gray-400"}," Tidak ada kendaraan ditemukan ",-1)])]))])]),c(Be,{show:O.value,title:B.value?`Edit ${b.value?.type?.name||"Kendaraan"} - ${b.value?.license_code||""}`:"Tambah Kendaraan",confirmText:"Simpan",maxWidth:"lg",onClose:q,onConfirm:ve},{default:Y(()=>[e("div",Tr,[e("div",Sr,[t[48]||(t[48]=e("label",{class:"block mb-2 font-semibold text-gray-900 dark:text-white"},"Foto Kendaraan",-1)),B.value&&b.value?(l(),d("div",Ur,[t[46]||(t[46]=e("p",{class:"mb-2 text-xs text-gray-600"},"Foto Saat Ini:",-1)),e("div",Ar,[b.value.files&&b.value.files.length>0?(l(!0),d(h,{key:0},C(b.value.files,(r,p)=>(l(),d("div",{key:r.id||p,class:x(["relative group",{"opacity-50 border-red-500":G(r.id)}])},[e("img",{src:`/storage/${r.file_path}`,alt:`Vehicle photo ${p+1}`,class:"object-cover w-full h-24 rounded-lg border border-gray-300"},null,8,Vr),G(r.id)?(l(),d("div",{key:1,class:"absolute top-1 right-1 bg-green-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs cursor-pointer hover:bg-green-600 z-10",onClick:v=>xe(r.id)}," ↺ ",8,Ir)):(l(),d("div",{key:0,class:"absolute top-1 right-1 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs cursor-pointer hover:bg-red-600 z-10",onClick:v=>be(r.id)}," × ",8,Br)),G(r.id)?(l(),d("div",Mr,[...t[45]||(t[45]=[e("span",{class:"text-xs font-semibold text-red-600"},"Akan dihapus",-1)])])):u("",!0)],2))),128)):u("",!0),!b.value.files||b.value.files.length===0?(l(),d("div",Pr," Tidak ada foto ")):u("",!0)])])):u("",!0),K.value.length>0?(l(),d("div",Fr,[t[47]||(t[47]=e("p",{class:"mb-2 text-xs text-gray-600"},"Preview Foto Baru:",-1)),e("div",Er,[(l(!0),d(h,null,C(K.value,(r,p)=>(l(),d("div",{key:p,class:"relative group"},[e("img",{src:r,alt:`Preview ${p+1}`,class:"object-cover w-full h-24 rounded-lg border border-gray-300"},null,8,Rr),e("div",{class:"absolute top-1 right-1 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs cursor-pointer hover:bg-red-600",onClick:v=>pe(p)}," × ",8,Kr)]))),128))])])):u("",!0),e("div",Ce(a(me)(),{class:["p-6 text-center rounded-lg border-2 cursor-pointer border-1",a(s).errors.files?"text-red-500 bg-red-50 border-red-300 dark:bg-red-900/20 dark:border-red-500":"text-blue-500 bg-sky-400 bg-opacity-5 border-blue-300"]}),[e("input",$e(je(a(fe)())),null,16),e("div",Nr,[c(Ve,{class:x(a(s).errors.files?"w-12 h-12 text-red-300":"w-12 h-12 text-blue-300")},null,8,["class"]),e("div",Or,[a(he)?(l(),d("p",Lr," Lepaskan file di sini ... ")):(l(),d("p",zr,i(B.value?"Ganti atau tambah foto dengan drag & drop":"Drag & drop file di sini, atau klik untuk pilih"),1))])])],16),a(s).errors.files?(l(),d("div",Gr,i(Array.isArray(a(s).errors.files)?a(s).errors.files[0]:a(s).errors.files),1)):u("",!0)]),e("div",qr,[t[49]||(t[49]=e("label",{for:"vehicle_type_id",class:"block mb-1 font-semibold text-gray-900 dark:text-white"},[w("Tipe Kendaraan"),e("span",{class:"text-red-500"},"*")],-1)),c(Pe,{modelValue:a(s).vehicle_type_id,"onUpdate:modelValue":t[18]||(t[18]=r=>a(s).vehicle_type_id=r),label:"Pilih Tipe Kendaraan",items:ie.value,taggable:!0},null,8,["modelValue","items"]),a(s).errors.vehicle_type_id?(l(),d("div",Hr,i(Array.isArray(a(s).errors.vehicle_type_id)?a(s).errors.vehicle_type_id[0]:a(s).errors.vehicle_type_id),1)):u("",!0)]),e("div",Wr,[t[50]||(t[50]=e("label",{for:"license_code",class:"font-semibold text-gray-900 dark:text-white"},[w("No. Plat"),e("span",{class:"text-red-500"},"*")],-1)),f(e("input",{id:"license_code",class:"px-4 w-full text-sm font-medium placeholder-gray-500 text-gray-600 rounded-lg border-gray-300 placeholder:font-normal dark:border-white dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 dark:focus:border-blue-500 dark:focus:ring-blue-500",type:"text","onUpdate:modelValue":t[19]||(t[19]=r=>a(s).license_code=r),required:"",placeholder:"Masukkan nomor plat kendaraan"},null,512),[[T,a(s).license_code]]),a(s).errors.license_code?(l(),d("div",Yr,i(Array.isArray(a(s).errors.license_code)?a(s).errors.license_code[0]:a(s).errors.license_code),1)):u("",!0)]),e("div",Jr,[t[51]||(t[51]=e("label",{for:"chassis_code",class:"font-semibold text-gray-900 dark:text-white"},[w("No. Rangka"),e("span",{class:"text-red-500"},"*")],-1)),f(e("input",{id:"chassis_code",class:"px-4 w-full text-sm font-medium placeholder-gray-500 text-gray-600 rounded-lg border-gray-300 placeholder:font-normal dark:border-white dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 dark:focus:border-blue-500 dark:focus:ring-blue-500",type:"text","onUpdate:modelValue":t[20]||(t[20]=r=>a(s).chassis_code=r),required:"",placeholder:"Masukkan nomor rangka kendaraan"},null,512),[[T,a(s).chassis_code]]),a(s).errors.chassis_code?(l(),d("div",Qr,i(Array.isArray(a(s).errors.chassis_code)?a(s).errors.chassis_code[0]:a(s).errors.chassis_code),1)):u("",!0)]),e("div",Xr,[t[52]||(t[52]=e("label",{for:"machine_code",class:"font-semibold text-gray-900 dark:text-white"},[w("No. Mesin"),e("span",{class:"text-red-500"},"*")],-1)),f(e("input",{id:"machine_code",class:"px-4 w-full text-sm font-medium placeholder-gray-500 text-gray-600 rounded-lg border-gray-300 placeholder:font-normal dark:border-white dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 dark:focus:border-blue-500 dark:focus:ring-blue-500",type:"text","onUpdate:modelValue":t[21]||(t[21]=r=>a(s).machine_code=r),required:"",placeholder:"Masukkan nomor mesin kendaraan"},null,512),[[T,a(s).machine_code]]),a(s).errors.machine_code?(l(),d("div",Zr,i(Array.isArray(a(s).errors.machine_code)?a(s).errors.machine_code[0]:a(s).errors.machine_code),1)):u("",!0)]),e("div",es,[t[54]||(t[54]=e("label",{for:"branch_id",class:"font-semibold text-gray-900 dark:text-white"},[w("Cabang"),e("span",{class:"text-red-500"},"*")],-1)),f(e("select",{"onUpdate:modelValue":t[22]||(t[22]=r=>a(s).branch_id=r),class:"px-4 w-full text-sm font-medium text-gray-600 rounded-lg border-gray-300 dark:border-white dark:bg-gray-700 dark:text-white"},[t[53]||(t[53]=e("option",{value:null},"Pilih cabang",-1)),(l(!0),d(h,null,C(n.branches,r=>(l(),d("option",{key:r.id,value:r.id},i(r.name),9,ts))),128))],512),[[S,a(s).branch_id]]),a(s).errors.branch_id?(l(),d("div",rs,i(Array.isArray(a(s).errors.branch_id)?a(s).errors.branch_id[0]:a(s).errors.branch_id),1)):u("",!0)]),e("div",ss,[t[56]||(t[56]=e("label",{for:"employee_id",class:"font-semibold text-gray-900 dark:text-white"},[w("Driver"),e("span",{class:"text-red-500"},"*")],-1)),f(e("select",{"onUpdate:modelValue":t[23]||(t[23]=r=>a(s).employee_id=r),class:"px-4 w-full text-sm font-medium text-gray-600 rounded-lg border-gray-300 dark:border-white dark:bg-gray-700 dark:text-white"},[t[55]||(t[55]=e("option",{value:null},"Pilih driver",-1)),(l(!0),d(h,null,C(n.employees,r=>(l(),d("option",{key:r.id,value:r.id},i(r.name),9,as))),128))],512),[[S,a(s).employee_id]]),a(s).errors.employee_id?(l(),d("div",os,i(Array.isArray(a(s).errors.employee_id)?a(s).errors.employee_id[0]:a(s).errors.employee_id),1)):u("",!0)]),e("div",ls,[t[57]||(t[57]=e("label",{for:"track",class:"font-semibold text-gray-900 dark:text-white"},[w("Rute"),e("span",{class:"text-red-500"},"*")],-1)),f(e("input",{id:"track",class:"px-4 w-full text-sm font-medium placeholder-gray-500 text-gray-600 rounded-lg border-gray-300 placeholder:font-normal dark:border-white dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 dark:focus:border-blue-500 dark:focus:ring-blue-500",type:"text","onUpdate:modelValue":t[24]||(t[24]=r=>a(s).track=r),required:"",placeholder:"Masukkan rute penugasan"},null,512),[[T,a(s).track]]),a(s).errors.track?(l(),d("div",ds,i(Array.isArray(a(s).errors.track)?a(s).errors.track[0]:a(s).errors.track),1)):u("",!0)]),e("div",ns,[t[59]||(t[59]=e("label",{for:"status",class:"font-semibold text-gray-900 dark:text-white"},[w("Status"),e("span",{class:"text-red-500"},"*")],-1)),f(e("select",{id:"type","onUpdate:modelValue":t[25]||(t[25]=r=>a(s).status=r),class:"w-full text-sm font-medium placeholder-gray-500 text-gray-600 rounded-lg border-gray-300 placeholder:font-normal dark:border-white dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 dark:focus:border-blue-500 dark:focus:ring-blue-500"},[...t[58]||(t[58]=[e("option",{value:1},"Aktif",-1),e("option",{value:0},"Tidak Aktif",-1)])],512),[[S,a(s).status]]),a(s).errors.status?(l(),d("div",is,i(Array.isArray(a(s).errors.status)?a(s).errors.status[0]:a(s).errors.status),1)):u("",!0)])])]),_:1},8,["show","title"]),c(Ie,{show:H.value,question:"Yakin ingin menghapus kendaraan",selected:`${b.value?.type?.name||"Kendaraan"} - ${b.value?.license_code||""}`,title:"Hapus Kendaraan",confirmText:"Ya, Hapus!",maxWidth:"md",onClose:te,onConfirm:_e},null,8,["show","selected"])]),n.vehicles.data&&n.vehicles.data.length>0?(l(),W(Me,{key:0,pagination:n.vehicles},null,8,["pagination"])):u("",!0)])])],64)}}});export{Ss as default};
