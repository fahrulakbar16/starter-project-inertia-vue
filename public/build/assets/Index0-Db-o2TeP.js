import{y as w,d as c,z as A,u as G,U as N,e as m,o as p,b as f,a as e,g as o,D as L,f as y,c as q,E as n,J as S,G as i,F as C,i as B,t as d,w as R,K as z,H as D}from"./app-CJkCV51W.js";import{_ as J}from"./AppLayout-BlEKf3Fz.js";import{P as W}from"./PlusSquareIcon-DA_kLpvy.js";import{S as Y}from"./SearchIcon-B0safoHl.js";import{_ as Q}from"./Breadcrumb-BJQpsGcc.js";import{_ as X}from"./Modal-Ddbg9qvg.js";import{_ as Z}from"./Pagination-C2dOEo8X.js";import"./FlashMessage-D4C-FUm8.js";import"./LayoutShell-FWpWJLvi.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./useAuth-DvuTgkfF.js";import"./LayoutShell.vue_vue_type_style_index_0_lang-CRqqKi3W.js";const ee={class:"flex overflow-hidden flex-col gap-3 px-3 h-full"},te={class:"flex justify-between items-center h-10"},re={class:"flex flex-col overflow-hidden rounded-lg border border-gray-200 bg-white dark:border-gray-600 dark:bg-white/[0.03]"},le={class:"flex flex-col gap-2 px-8 h-16 sm:flex-row sm:items-center sm:justify-between"},se={class:"flex gap-3 justify-between items-center"},oe={class:"flex gap-2 items-center"},ae={class:"relative py-2"},ne={class:"absolute left-4 top-1/2 -translate-y-1/2"},de={class:"overflow-auto","data-simplebar":""},ie={class:"min-w-full text-sm table-fixed"},ue={class:"py-2.5 bg-gray-100 border border-gray-200"},pe={class:"py-2.5 bg-gray-100 border border-gray-200"},me={class:"py-2.5 bg-gray-100 border border-gray-200"},be={class:"py-2.5 bg-gray-100 border border-gray-200"},ge={class:"py-2.5 bg-gray-100 border border-gray-200"},ye={class:"py-2.5 bg-gray-100 border border-gray-200"},xe={class:"py-2.5 bg-gray-100 border border-gray-200"},ce={class:"py-2.5 bg-gray-100 border border-gray-200"},fe={class:"px-2 py-2 bg-gray-50 border border-gray-200"},ve={class:"px-2 py-2 bg-gray-50 border border-gray-200"},ke={class:"px-2 py-2 bg-gray-50 border border-gray-200"},he=["value"],_e={class:"px-2 py-2 bg-gray-50 border border-gray-200"},we={class:"px-2 py-2 bg-gray-50 border border-gray-200"},Se={class:"px-2 py-2 bg-gray-50 border border-gray-200"},Ce={class:"px-2 py-2 bg-gray-50 border border-gray-200"},Ve={class:"px-2 py-2 bg-gray-50 border border-gray-200"},Ue={class:"px-2 py-2 bg-gray-50 border border-gray-200"},Be={key:0},Ie={class:"px-3 py-3 text-center"},$e={class:"px-3 py-3"},Ke={class:"px-3 py-3"},Ne={class:"px-3 py-3"},De={class:"px-3 py-3"},Me={class:"px-3 py-3"},Te={class:"px-3 py-3 text-right"},je={class:"px-3 py-3 text-right"},Ee={class:"px-3 py-3 text-right"},Fe={class:"px-3 py-3"},He={class:"px-3 py-3"},Oe={class:"flex gap-2 justify-center"},Pe=["onClick"],Ae=["onClick"],Ge={class:"grid grid-cols-1 gap-3 md:grid-cols-2"},Le={key:0,class:"text-red-500"},qe={key:0,class:"text-red-500"},Re=["value"],ze={key:0,class:"text-red-500"},Je={class:"md:col-span-2"},We={class:"flex gap-2 justify-end pt-2"},Ye=["disabled"],it=Object.assign({layout:J},{__name:"Index0",props:{items:Object,departments:Array,filters:Object},setup(V){const u=V,M=[{label:"Persediaan"},{label:"Daftar Barang"}],b=w(()=>u.items??{}),I=w(()=>b.value?.data??[]),T=w(()=>((b.value?.current_page??1)-1)*(b.value?.per_page??10)),U=c(u.filters?.sort_field??"id"),v=c(u.filters?.sort_order??1),a=c({q:u.filters?.q??"",name:u.filters?.name??"",code:u.filters?.code??"",branch:u.filters?.branch??"",unit:u.filters?.unit??"",min_from:u.filters?.min_from??null,stock_from:u.filters?.stock_from??null,price_from:u.filters?.price_from??null,status:u.filters?.status??null});function x(s={}){D.get(route("items.index"),{...a.value,sort_field:U.value,sort_order:v.value,per_page:b.value?.per_page??10,page:b.value?.current_page??1,...s},{preserveScroll:!0,preserveState:!0,replace:!0})}function g(s){U.value===s?v.value=v.value===1?-1:1:(U.value=s,v.value=1),x()}let $;A(()=>({...a.value}),()=>{clearTimeout($),$=setTimeout(()=>x(),400)},{deep:!0});function j(s){s?.id&&confirm("Yakin ingin menghapus barang ini?")&&D.delete(route("items.destroy",s.id),{preserveScroll:!0,onSuccess:()=>x()})}const k=c(!1),h=c(!1),l=G({id:null,name:"",code:"",department_id:null,unit:"",price:null,stock:null,description:""}),E=w(()=>h.value?"Ubah Barang":"Tambah Barang");function F(){h.value=!1,l.reset(),l.department_id=u.departments?.[0]?.id??null,k.value=!0}function H(s){s&&(h.value=!0,l.id=s.id,l.name=s.name??"",l.code=s.code??"",l.department_id=s.department?.id??null,l.unit=s.unit??"",l.price=s.price??null,l.stock=s.stock??null,l.description=s.description??"",k.value=!0)}function _(){k.value=!1,l.clearErrors()}function K(){h.value&&l.id?l.put(route("items.update",l.id),{preserveScroll:!0,onSuccess:()=>{_(),x()}}):l.post(route("items.store"),{preserveScroll:!0,onSuccess:()=>{_(),x()}})}return(s,t)=>(N("Select"),N("ConfirmModal"),p(),m(C,null,[f(o(L),{title:"Daftar Barang"}),e("div",ee,[e("div",te,[f(Q,{items:M}),e("button",{onClick:F,type:"button",class:"flex gap-2 items-center px-3 py-2 text-white bg-blue-500 rounded"},[f(W),t[48]||(t[48]=e("span",{class:"hidden text-sm md:block"},"Tambah Barang",-1))])]),e("div",re,[e("div",le,[t[50]||(t[50]=e("div",{class:"font-bold text-gray-700 md:text-xl dark:text-gray-300"}," Daftar Barang ",-1)),e("div",se,[e("div",oe,[n(e("select",{"onUpdate:modelValue":t[0]||(t[0]=r=>s.groupByLocal=r),class:"px-3 h-10 text-sm text-gray-800 bg-transparent rounded-lg border border-gray-200 dark:border-gray-700 dark:bg-gray-800 dark:text-white/90"},[...t[49]||(t[49]=[e("option",{value:""},"Kelompokan Berdasarkan",-1),e("option",{value:"warehouse"},"Group: Cabang",-1),e("option",{value:"item"},"Group: Kategori",-1),e("option",{value:"item"},"Group: Satuan",-1)])],512),[[S,s.groupByLocal]])]),e("div",ae,[e("div",ne,[f(Y,{class:"text-gray-400"})]),n(e("input",{"onUpdate:modelValue":t[1]||(t[1]=r=>s.search=r),type:"text",placeholder:"Cari barang",class:"h-10 w-full rounded-lg border border-gray-200 bg-transparent py-2.5 pl-12 pr-4 text-sm text-gray-800 placeholder:text-gray-400 focus:border-blue-300 focus:outline-hidden focus:ring-3 focus:ring-blue-500/10 dark:border-gray-700 dark:bg-gray-800 dark:text-white/90 dark:placeholder:text-gray-400 dark:focus:border-blue-800 xl:w-[200px]"},null,512),[[i,s.search]])])])]),e("div",de,[e("table",ie,[t[59]||(t[59]=e("colgroup",null,[e("col",{style:{width:"56px"}}),e("col",{style:{width:"200px"}}),e("col",{style:{width:"120px"}}),e("col",{style:{width:"160px"}}),e("col",{style:{width:"100px"}}),e("col",{style:{width:"120px"}}),e("col",{style:{width:"120px"}}),e("col",{style:{width:"120px"}}),e("col",{style:{width:"100px"}}),e("col",{style:{width:"120px"}})],-1)),e("thead",null,[e("tr",null,[t[51]||(t[51]=e("th",{class:"py-2.5 bg-gray-100 border-gray-200 border-y"},[e("div",{class:"px-3 font-medium text-center text-gray-600"}," No ")],-1)),e("th",ue,[e("button",{class:"px-3 w-full font-medium text-left text-gray-600",onClick:t[2]||(t[2]=r=>g("name"))}," Nama Barang ")]),e("th",pe,[e("button",{class:"px-3 w-full font-medium text-left text-gray-600",onClick:t[3]||(t[3]=r=>g("code"))}," Kode ")]),t[52]||(t[52]=e("th",{class:"py-2.5 bg-gray-100 border border-gray-200"},[e("div",{class:"px-3 font-medium text-left text-gray-600"}," Kategori ")],-1)),e("th",me,[e("button",{class:"px-3 w-full font-medium text-left text-gray-600",onClick:t[4]||(t[4]=r=>g("branch"))}," Cabang ")]),e("th",be,[e("button",{class:"px-3 w-full font-medium text-left text-gray-600",onClick:t[5]||(t[5]=r=>g("unit"))}," Satuan ")]),e("th",ge,[e("button",{class:"px-3 w-full font-medium text-right text-gray-600",onClick:t[6]||(t[6]=r=>g("min_stock"))}," Minimal Stok ")]),e("th",ye,[e("button",{class:"px-3 w-full font-medium text-right text-gray-600",onClick:t[7]||(t[7]=r=>g("stock"))}," Stok Saat Ini ")]),e("th",xe,[e("button",{class:"px-3 w-full font-medium text-right text-gray-600",onClick:t[8]||(t[8]=r=>g("price"))}," Harga ")]),e("th",ce,[e("button",{class:"px-3 w-full font-medium text-left text-gray-600",onClick:t[9]||(t[9]=r=>g("status"))}," Status ")]),t[53]||(t[53]=e("th",{class:"py-2.5 bg-gray-100 border-gray-200 border-y"},[e("div",{class:"px-3 font-medium text-center text-gray-600"}," Aksi ")],-1))]),e("tr",null,[t[56]||(t[56]=e("th",{class:"px-2 py-2 bg-gray-50 border-gray-200 border-y"},null,-1)),e("th",fe,[n(e("input",{"onUpdate:modelValue":t[10]||(t[10]=r=>a.value.name=r),type:"text",placeholder:"Cari Nama",class:"px-3 w-full h-9 text-sm rounded border-gray-300"},null,512),[[i,a.value.name]])]),e("th",ve,[n(e("input",{"onUpdate:modelValue":t[11]||(t[11]=r=>a.value.code=r),type:"text",placeholder:"Kode",class:"px-3 w-full h-9 text-sm rounded border-gray-300"},null,512),[[i,a.value.code]])]),e("th",ke,[n(e("select",{"onUpdate:modelValue":t[12]||(t[12]=r=>a.value.department_id=r),class:"px-3 w-full h-9 text-sm rounded border-gray-300"},[t[54]||(t[54]=e("option",{value:null},"Semua",-1)),(p(!0),m(C,null,B(V.departments||[],r=>(p(),m("option",{key:r.id,value:r.id},d(r.name),9,he))),128))],512),[[S,a.value.department_id,void 0,{number:!0}]])]),e("th",_e,[n(e("input",{"onUpdate:modelValue":t[13]||(t[13]=r=>a.value.branch=r),type:"text",placeholder:"Cabang",class:"px-3 w-full h-9 text-sm rounded border-gray-300"},null,512),[[i,a.value.branch]])]),e("th",we,[n(e("input",{"onUpdate:modelValue":t[14]||(t[14]=r=>a.value.unit=r),type:"text",placeholder:"Satuan",class:"px-3 w-full h-9 text-sm rounded border-gray-300"},null,512),[[i,a.value.unit]])]),e("th",Se,[n(e("input",{"onUpdate:modelValue":t[15]||(t[15]=r=>a.value.min_from=r),type:"number",placeholder:"Min ≥",class:"px-3 w-full h-9 text-sm text-right rounded border-gray-300"},null,512),[[i,a.value.min_from,void 0,{number:!0}]])]),e("th",Ce,[n(e("input",{"onUpdate:modelValue":t[16]||(t[16]=r=>a.value.stock_from=r),type:"number",placeholder:"Stok ≥",class:"px-3 w-full h-9 text-sm text-right rounded border-gray-300"},null,512),[[i,a.value.stock_from,void 0,{number:!0}]])]),e("th",Ve,[n(e("input",{"onUpdate:modelValue":t[17]||(t[17]=r=>a.value.price_from=r),type:"number",placeholder:"Harga ≥",class:"px-3 w-full h-9 text-sm text-right rounded border-gray-300"},null,512),[[i,a.value.price_from,void 0,{number:!0}]])]),e("th",Ue,[n(e("select",{"onUpdate:modelValue":t[18]||(t[18]=r=>a.value.status=r),class:"px-3 w-full h-9 text-sm rounded border-gray-300"},[...t[55]||(t[55]=[e("option",{value:null},"Semua",-1),e("option",{value:"aktif"},"Aktif",-1),e("option",{value:"nonaktif"},"Nonaktif",-1)])],512),[[S,a.value.status]])]),t[57]||(t[57]=e("th",{class:"px-2 py-2 bg-gray-50 border-gray-200 border-y"},null,-1))])]),e("tbody",null,[I.value.length?y("",!0):(p(),m("tr",Be,[...t[58]||(t[58]=[e("td",{colspan:"10",class:"py-6 text-center text-gray-500"}," Tidak ada data ",-1)])])),(p(!0),m(C,null,B(I.value,(r,O)=>(p(),m("tr",{key:r.id,class:"border-b border-gray-200"},[e("td",Ie,d(T.value+O+1),1),e("td",$e,d(r.name),1),e("td",Ke,d(r.code),1),e("td",Ne,d(r.department?.name??"-"),1),e("td",De,d(r.branch?.name??"-"),1),e("td",Me,d(r.unit||"-"),1),e("td",Te,d(r.min_stock??"-"),1),e("td",je,d(r.stock??0),1),e("td",Ee," Rp"+d(new Intl.NumberFormat("id-ID").format(r.price||0)),1),e("td",Fe,d(r.status||"-"),1),e("td",He,[e("div",Oe,[e("button",{type:"button",class:"text-yellow-600",onClick:P=>H(r)}," Edit ",8,Pe),e("button",{type:"button",class:"text-red-600",onClick:P=>j(r)}," Hapus ",8,Ae)])])]))),128))])])]),f(X,{show:k.value,title:E.value,confirmText:"Simpan",maxWidth:"lg",onClose:_,onConfirm:K},{default:R(()=>[e("form",{onSubmit:z(K,["prevent"]),class:"space-y-3"},[e("div",Ge,[e("div",null,[t[60]||(t[60]=e("label",{class:"block mb-1 text-sm text-gray-600"},"Nama Barang",-1)),n(e("input",{"onUpdate:modelValue":t[19]||(t[19]=r=>o(l).name=r),type:"text",class:"w-full rounded border-gray-300",placeholder:"Nama"},null,512),[[i,o(l).name]]),o(l).errors.name?(p(),m("small",Le,d(o(l).errors.name),1)):y("",!0)]),e("div",null,[t[61]||(t[61]=e("label",{class:"block mb-1 text-sm text-gray-600"},"Kode",-1)),n(e("input",{"onUpdate:modelValue":t[20]||(t[20]=r=>o(l).code=r),type:"text",class:"w-full rounded border-gray-300",placeholder:"Kode"},null,512),[[i,o(l).code]]),o(l).errors.code?(p(),m("small",qe,d(o(l).errors.code),1)):y("",!0)]),e("div",null,[t[63]||(t[63]=e("label",{class:"block mb-1 text-sm text-gray-600"},"Departemen",-1)),n(e("select",{"onUpdate:modelValue":t[21]||(t[21]=r=>o(l).department_id=r),class:"w-full rounded border-gray-300"},[t[62]||(t[62]=e("option",{value:null,disabled:""}," Pilih departemen ",-1)),(p(!0),m(C,null,B(V.departments||[],r=>(p(),m("option",{key:r.id,value:r.id},d(r.name),9,Re))),128))],512),[[S,o(l).department_id,void 0,{number:!0}]]),o(l).errors.department_id?(p(),m("small",ze,d(o(l).errors.department_id),1)):y("",!0)]),e("div",null,[t[64]||(t[64]=e("label",{class:"block mb-1 text-sm text-gray-600"},"Satuan",-1)),n(e("input",{"onUpdate:modelValue":t[22]||(t[22]=r=>o(l).unit=r),type:"text",class:"w-full rounded border-gray-300",placeholder:"Satuan (pcs, sak)"},null,512),[[i,o(l).unit]])]),e("div",null,[t[65]||(t[65]=e("label",{class:"block mb-1 text-sm text-gray-600"},"Harga",-1)),n(e("input",{"onUpdate:modelValue":t[23]||(t[23]=r=>o(l).price=r),type:"number",class:"w-full rounded border-gray-300",placeholder:"Harga"},null,512),[[i,o(l).price,void 0,{number:!0}]])]),e("div",null,[t[66]||(t[66]=e("label",{class:"block mb-1 text-sm text-gray-600"},"Stok",-1)),n(e("input",{"onUpdate:modelValue":t[24]||(t[24]=r=>o(l).stock=r),type:"number",class:"w-full rounded border-gray-300",placeholder:"Stok"},null,512),[[i,o(l).stock,void 0,{number:!0}]])]),e("div",Je,[t[67]||(t[67]=e("label",{class:"block mb-1 text-sm text-gray-600"},"Keterangan",-1)),n(e("textarea",{"onUpdate:modelValue":t[25]||(t[25]=r=>o(l).description=r),rows:"3",class:"w-full rounded border-gray-300",placeholder:"Keterangan"},null,512),[[i,o(l).description]])])]),e("div",We,[e("button",{type:"button",class:"px-3 py-2 rounded border",onClick:_}," Batal "),e("button",{type:"submit",class:"px-3 py-2 text-white bg-blue-600 rounded",disabled:o(l).processing}," Simpan ",8,Ye)])],32)]),_:1},8,["show","title"]),y("",!0),b.value&&b.value.data&&b.value.data.length>0?(p(),q(Z,{key:1,pagination:b.value},null,8,["pagination"])):y("",!0)])])],64))}});export{it as default};
