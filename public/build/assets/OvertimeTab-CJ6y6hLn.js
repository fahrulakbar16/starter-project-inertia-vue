import{d as i,e as r,o as a,a as e,c as x,f as u,F as h,i as _,t as l,K as M,n as L,T,L as B}from"./app-CJkCV51W.js";import{_ as $}from"./Pagination-C2dOEo8X.js";import{_ as N}from"./AvatarInitials-XMdLKKbn.js";const S={class:"overflow-auto","data-simplebar":""},z={class:"min-w-full text-sm"},E={class:"p-3 text-center"},J={class:"p-3"},P={class:"flex gap-3 items-center"},F=["src"],I={class:"flex flex-col"},q={class:"font-medium text-gray-800"},A={class:"text-xs text-gray-500"},H={class:"p-3"},O={class:"p-3"},V={class:"p-3"},W={class:"p-3"},Y=["onClick"],G={key:1},K={class:"bg-white rounded-lg shadow-xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-hidden"},R={class:"flex justify-between items-center p-6 border-b"},U={class:"text-lg font-semibold text-gray-900"},Q={class:"p-6 overflow-y-auto max-h-[calc(90vh-140px)]"},X={key:0,class:"flex justify-center items-center py-12"},Z={key:1,class:"py-12 text-center"},ee={key:2,class:"space-y-4"},te={class:"flex justify-between items-start mb-3"},se={class:"font-semibold text-gray-900"},ae={class:"text-right"},oe={class:"text-sm font-medium text-gray-900"},le={class:"grid grid-cols-2 gap-4 text-sm"},re={class:"font-medium text-gray-900"},ne={class:"font-medium text-gray-900"},de={key:0,class:"mt-3"},ie={class:"text-sm text-gray-900"},ce={key:1,class:"mt-3 text-xs text-gray-500"},me={__name:"OvertimeTab",props:{rows:{type:Object,required:!0}},setup(n){const g=i(!1),c=i(!1),d=i([]),b=i(null),y=i(""),k=()=>{const o=new URLSearchParams(window.location.search);return{year:parseInt(o.get("year"))||new Date().getFullYear(),month:parseInt(o.get("month"))||new Date().getMonth()+1}},w=async(o,s)=>{b.value=o,y.value=s,g.value=!0,c.value=!0,d.value=[];try{const{year:t,month:p}=k(),f=`/attendance-recap/overtime-details/${o}?year=${t}&month=${p}`,v=await B.get(f);v.data.success&&(d.value=v.data.data)}catch(t){console.error("Error fetching overtime details:",t),alert("Gagal memuat data lembur")}finally{c.value=!1}},m=()=>{g.value=!1,b.value=null,y.value="",d.value=[]},j=o=>o?new Date(o).toLocaleDateString("id-ID",{day:"2-digit",month:"long",year:"numeric"}):"-",D=o=>({approved:"Disetujui",pending:"Menunggu",rejected:"Ditolak"})[o]||o,C=o=>({approved:"text-green-800 bg-green-100",pending:"text-yellow-800 bg-yellow-100",rejected:"text-red-800 bg-red-100"})[o]||"text-gray-800 bg-gray-100";return(o,s)=>(a(),r(h,null,[e("div",S,[e("table",z,[s[1]||(s[1]=e("thead",null,[e("tr",null,[e("th",{class:"p-3 bg-gray-100 border-gray-200 border-y"},[e("div",{class:"font-medium text-center text-gray-600"}," No ")]),e("th",{class:"p-3 bg-gray-100 border border-gray-200"},[e("div",{class:"font-medium text-left text-gray-600"}," Nama & Jabatan Pekerja ")]),e("th",{class:"p-3 bg-gray-100 border border-gray-200"},[e("div",{class:"font-medium text-left text-gray-600"}," Total Pengajuan ")]),e("th",{class:"p-3 bg-gray-100 border border-gray-200"},[e("div",{class:"font-medium text-left text-gray-600"}," Total Disetujui ")]),e("th",{class:"p-3 bg-gray-100 border border-gray-200"},[e("div",{class:"font-medium text-left text-gray-600"}," Total Jam Lembur ")]),e("th",{class:"p-3 bg-gray-100 border-gray-200 border-y"},[e("div",{class:"font-medium text-left text-gray-600"}," Aksi ")])])],-1)),e("tbody",null,[n.rows.data&&n.rows.data.length?(a(!0),r(h,{key:0},_(n.rows.data,(t,p)=>(a(),r("tr",{key:t.id,class:"border-b border-gray-200"},[e("td",E,l((n.rows.current_page-1)*n.rows.per_page+p+1),1),e("td",J,[e("div",P,[t.employee.photo_url?(a(),r("img",{key:0,src:t.employee.photo_url?`/storage/${t.employee.photo_url}`:"",alt:"avatar",class:"object-cover w-8 h-8 rounded-full"},null,8,F)):(a(),x(N,{key:1,name:t.employee.name,gender:t.employee.gender||"",size:32},null,8,["name","gender"])),e("div",I,[e("span",q,l(t.employee?.name||"-"),1),e("span",A,l(t.department||"-"),1)])])]),e("td",H,l(t.ot_requests??0)+" Hari",1),e("td",O,l(t.ot_approved??0)+" Hari",1),e("td",V,l(t.ot_hours??0)+" Jam",1),e("td",W,[e("button",{onClick:f=>w(t.employee.id,t.employee.name),class:"text-blue-600 hover:underline focus:outline-none"}," Lihat Detail ",8,Y)])]))),128)):(a(),r("tr",G,[...s[0]||(s[0]=[e("td",{colspan:"6",class:"py-6 text-center text-gray-500"}," Tidak ada data ",-1)])]))])])]),n.rows.data&&n.rows.data.length?(a(),x($,{key:0,pagination:n.rows,class:"border-t"},null,8,["pagination"])):u("",!0),(a(),x(T,{to:"body"},[g.value?(a(),r("div",{key:0,class:"flex fixed inset-0 z-50 justify-center items-center bg-black bg-opacity-50",onClick:M(m,["self"])},[e("div",K,[e("div",R,[e("h3",U," Detail Lembur - "+l(y.value),1),e("button",{onClick:m,class:"text-gray-400 hover:text-gray-600 focus:outline-none"},[...s[2]||(s[2]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",Q,[c.value?(a(),r("div",X,[...s[3]||(s[3]=[e("div",{class:"w-12 h-12 rounded-full border-b-2 border-blue-600 animate-spin"},null,-1)])])):!c.value&&d.value.length===0?(a(),r("div",Z,[...s[4]||(s[4]=[e("svg",{class:"mx-auto w-12 h-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),e("p",{class:"mt-4 text-gray-600"}," Tidak ada data lembur yang disetujui ",-1)])])):(a(),r("div",ee,[(a(!0),r(h,null,_(d.value,t=>(a(),r("div",{key:t.id,class:"p-4 rounded-lg border border-gray-200 transition-shadow hover:shadow-md"},[e("div",te,[e("div",null,[e("h4",se,l(j(t.date)),1),e("span",{class:L([C(t.status),"inline-flex items-center px-2.5 py-0.5 mt-1 text-xs font-medium rounded-full"])},l(D(t.status)),3)]),e("div",ae,[e("p",oe,l(t.duration_hours)+" Jam ",1)])]),e("div",le,[e("div",null,[s[5]||(s[5]=e("p",{class:"text-gray-500"},"Waktu Mulai",-1)),e("p",re,l(t.start_time||"-"),1)]),e("div",null,[s[6]||(s[6]=e("p",{class:"text-gray-500"},"Waktu Selesai",-1)),e("p",ne,l(t.end_time||"-"),1)])]),t.reason&&t.reason!=="-"?(a(),r("div",de,[s[7]||(s[7]=e("p",{class:"text-sm text-gray-500"},"Alasan",-1)),e("p",ie,l(t.reason),1)])):u("",!0),t.approved_by?(a(),r("div",ce," Disetujui oleh: "+l(t.approved_by),1)):u("",!0)]))),128))]))]),e("div",{class:"flex justify-end p-6 border-t"},[e("button",{onClick:m,class:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg transition-colors hover:bg-gray-200"}," Tutup ")])])])):u("",!0)]))],64))}};export{me as default};
