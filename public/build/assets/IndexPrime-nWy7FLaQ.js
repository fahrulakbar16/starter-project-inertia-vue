import{y as u,d as g,u as H,z as A,H as k,e as x,o as d,a as s,b as o,c as j,f as c,g as t,w as n,h as w,t as C,K as M}from"./app-CJkCV51W.js";import{_ as G}from"./AppLayout-BlEKf3Fz.js";import{s as h,a as W}from"./index-0NiEyZ8l.js";import{s as S}from"./index-B9o0VbjL.js";import{s as Y}from"./index-D_jvqarE.js";import{s as J,a as V,b as Q}from"./index-CMR089Yl.js";import{s as X}from"./index-CLpgtvfm.js";import{u as Z}from"./useAuth-DvuTgkfF.js";import{_ as ee}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./FlashMessage-D4C-FUm8.js";import"./LayoutShell-FWpWJLvi.js";import"./LayoutShell.vue_vue_type_style_index_0_lang-CRqqKi3W.js";import"./index-BD4Vkpl0.js";import"./index-DgaiydM3.js";import"./index-B6ZB8t6H.js";import"./index-jsubnK9F.js";import"./index-BQecbcTn.js";import"./index-CCXKkwqV.js";import"./index-B_J-fD_o.js";const te={class:"px-6 py-6"},se={class:"flex items-center justify-between mb-4"},re={class:"bg-white border border-gray-200 rounded-lg"},ae={class:"flex items-center justify-between px-4 py-3 border-b"},le={class:"flex items-center gap-2"},oe={class:"py-0"},ie={style:{"overflow-x":"auto"}},ne={class:"flex items-center justify-center gap-2"},de=["onClick"],pe=["onClick"],ue={class:"grid grid-cols-1 gap-3 md:grid-cols-2"},ce={key:0,class:"text-red-500"},me={key:0,class:"text-red-500"},ge={class:"md:col-span-2"},xe={key:0,class:"text-red-500"},fe={class:"flex justify-end gap-2 pt-2"},ve=Object.assign({layout:G},{__name:"IndexPrime",props:{departments:Object,filters:Object},setup(N){const{can:i}=Z(),p=N,O=u(()=>p.departments?.data??[]),K=u(()=>p.departments?.total??0),_=u(()=>p.departments?.per_page??10),T=u(()=>p.departments?.current_page??1),D=u(()=>(T.value-1)*_.value),f=g(p.filters?.sort_field??"id"),v=g(p.filters?.sort_order??1),y=g(p.filters?.q??""),b=g(!1),m=g(null),L=g(!1),r=H({name:"",code:"",description:""}),R=u(()=>m.value?"Ubah Departemen":"Tambah Departemen");function F(){i("departments.create")&&(m.value=null,r.reset(),b.value=!0)}function U(a){i("departments.edit")&&(m.value=a.id,r.name=a.name,r.code=a.code,r.description=a.description,b.value=!0)}function P(){b.value=!1}const B=u(()=>r.processing);function q(){if(m.value){if(!i("departments.edit"))return;r.put(`/departments/${m.value}`,{onSuccess:()=>P()})}else{if(!i("departments.create"))return;r.post("/departments",{onSuccess:()=>P()})}}function I(a){i("departments.delete")&&confirm("Yakin ingin menghapus?")&&k.delete(`/departments/${a.id}`)}function z(a){k.get(route("departments.index"),{page:a.page+1,per_page:a.rows,q:y.value,sort_field:f.value,sort_order:v.value},{preserveState:!0,preserveScroll:!0,replace:!0})}function E(a){f.value=a.sortField,v.value=a.sortOrder,k.get(route("departments.index"),{page:1,per_page:_.value,q:y.value,sort_field:f.value,sort_order:v.value},{preserveState:!0,preserveScroll:!0,replace:!0})}let $;return A(y,a=>{clearTimeout($),$=setTimeout(()=>{k.get(route("departments.index"),{page:1,per_page:_.value,q:a,sort_field:f.value,sort_order:v.value},{preserveState:!0,preserveScroll:!0,replace:!0})},400)}),(a,e)=>(d(),x("div",te,[s("div",se,[e[6]||(e[6]=s("h1",{class:"text-2xl font-bold text-gray-800"},"Data Departemen",-1)),t(i)("departments.create")?(d(),j(t(S),{key:0,severity:"info",onClick:F},{default:n(()=>[...e[5]||(e[5]=[s("i",{class:"mr-2 lni lni-plus"},null,-1),w(" Tambah Data Departemen ",-1)])]),_:1})):c("",!0)]),s("div",re,[s("div",ae,[e[8]||(e[8]=s("h1",{class:"text-xl font-semibold text-gray-800"},"Daftar Seluruh Departemen",-1)),s("div",le,[o(t(Q),null,{default:n(()=>[o(t(J),null,{default:n(()=>[...e[7]||(e[7]=[s("i",{class:"lni lni-search-alt"},null,-1)])]),_:1}),o(t(V),{modelValue:y.value,"onUpdate:modelValue":e[0]||(e[0]=l=>y.value=l),placeholder:"Pencarian kata kunci"},null,8,["modelValue"])]),_:1})])]),s("div",oe,[s("div",ie,[o(t(W),{value:O.value,dataKey:"id",responsiveLayout:"scroll",paginator:!0,lazy:!0,totalRecords:K.value,first:D.value,rows:_.value,sortField:f.value,sortOrder:v.value,onPage:z,onSort:E,class:"w-full p-datatable-sm",rowHover:!0,showGridlines:!1,rowsPerPageOptions:[10,25,50,100],paginatorTemplate:"RowsPerPageDropdown FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink",pt:{thead:{class:"bg-gray-50"},headerRow:{class:"text-left"},headerCell:{class:"bg-gray-50 text-gray-500 uppercase text-[11px] tracking-wide px-2"},bodyRow:{class:"text-red-800"},bodyCell:{class:"text-red-800 px-2"}},ptOptions:{mergeSections:!0,mergeProps:!0},loading:L.value,tableStyle:{minWidth:"max-content",width:"100%"}},{empty:n(()=>[...e[9]||(e[9]=[w(" Data departemen tidak ditemukan. ",-1)])]),loading:n(()=>[...e[10]||(e[10]=[w(" Memuat data departemen... ",-1)])]),default:n(()=>[o(t(h),{header:"No",style:{width:"80px"},headerClass:"bg-gray-50 text-gray-500 uppercase text-xs text-center px-2",bodyClass:"text-gray-700 px-2 text-center"},{body:n(({index:l})=>[w(C(D.value+l+1),1)]),_:1}),o(t(h),{field:"name",header:"Nama Departemen",sortable:"",headerClass:"bg-gray-50 text-gray-500 uppercase text-xs text-start px-2",bodyClass:"text-gray-700 px-2"}),o(t(h),{field:"code",header:"Kode",sortable:"",headerClass:"bg-gray-50 text-gray-500 uppercase text-xs text-start px-2",bodyClass:"text-gray-700 px-2"}),o(t(h),{field:"description",header:"Keterangan",headerClass:"bg-gray-50 text-gray-500 uppercase text-xs text-start px-2",bodyClass:"text-gray-700 px-2"}),o(t(h),{header:"Aksi",style:{width:"120px"},headerClass:"bg-gray-50 text-gray-500 uppercase text-xs text-center px-2",bodyClass:"px-2 text-center"},{body:n(({data:l})=>[s("div",ne,[t(i)("departments.edit")?(d(),x("button",{key:0,type:"button","aria-label":"Edit",class:"inline-flex items-center justify-center w-8 h-8 text-white bg-indigo-500 rounded hover:bg-indigo-600 focus:outline-none focus:ring-2 focus:ring-indigo-300",onClick:()=>U(l)},[...e[11]||(e[11]=[s("i",{class:"text-sm lni lni-pencil-1"},null,-1)])],8,de)):c("",!0),t(i)("departments.delete")?(d(),x("button",{key:1,type:"button","aria-label":"Hapus",class:"inline-flex items-center justify-center w-8 h-8 text-white bg-red-500 rounded hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-300",onClick:()=>I(l)},[...e[12]||(e[12]=[s("i",{class:"text-sm lni lni-trash-3"},null,-1)])],8,pe)):c("",!0)])]),_:1})]),_:1},8,["value","totalRecords","first","rows","sortField","sortOrder","loading"])])])]),o(t(Y),{visible:b.value,"onUpdate:visible":e[4]||(e[4]=l=>b.value=l),modal:"",header:R.value,style:{width:"38rem"}},{default:n(()=>[s("form",{onSubmit:M(q,["prevent"]),class:"space-y-4"},[s("div",ue,[s("div",null,[e[13]||(e[13]=s("label",{class:"block mb-1 text-sm text-gray-600"},"Nama Departemen",-1)),o(t(V),{modelValue:t(r).name,"onUpdate:modelValue":e[1]||(e[1]=l=>t(r).name=l),placeholder:"Nama",class:"w-full"},null,8,["modelValue"]),t(r).errors.name?(d(),x("small",ce,C(t(r).errors.name),1)):c("",!0)]),s("div",null,[e[14]||(e[14]=s("label",{class:"block mb-1 text-sm text-gray-600"},"Kode",-1)),o(t(V),{modelValue:t(r).code,"onUpdate:modelValue":e[2]||(e[2]=l=>t(r).code=l),placeholder:"Kode",class:"w-full"},null,8,["modelValue"]),t(r).errors.code?(d(),x("small",me,C(t(r).errors.code),1)):c("",!0)]),s("div",ge,[e[15]||(e[15]=s("label",{class:"block mb-1 text-sm text-gray-600"},"Keterangan",-1)),o(t(X),{modelValue:t(r).description,"onUpdate:modelValue":e[3]||(e[3]=l=>t(r).description=l),rows:"3",autoResize:"",placeholder:"Keterangan",class:"w-full"},null,8,["modelValue"]),t(r).errors.description?(d(),x("small",xe,C(t(r).errors.description),1)):c("",!0)])]),s("div",fe,[t(i)(m.value.value?"departments.edit":"departments.create")?(d(),j(t(S),{key:0,type:"submit",label:"Simpan",icon:"pi pi-check",loading:B.value},null,8,["loading"])):c("",!0),o(t(S),{type:"button",label:"Batal",severity:"secondary",icon:"pi pi-times",onClick:P})])],32)]),_:1},8,["visible","header"])]))}}),Fe=ee(ve,[["__scopeId","data-v-e99452a5"]]);export{Fe as default};
