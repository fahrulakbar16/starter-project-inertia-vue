import{y as c,d as b,u as G,z as W,H as w,e as m,o as i,a,b as o,c as S,f as n,g as e,w as u,h as C,P as N,t as g,n as J,K as Q,F as Z}from"./app-CJkCV51W.js";import{_ as ee}from"./AppLayout-BlEKf3Fz.js";import{s as x,a as te}from"./index-0NiEyZ8l.js";import{s as j}from"./index-B9o0VbjL.js";import{s as se,a as L,b as ae}from"./index-CMR089Yl.js";import{s as le}from"./index-D_jvqarE.js";import{s as V}from"./index-HUbOgymH.js";import{s as re}from"./index-CLpgtvfm.js";import{u as oe}from"./useAuth-DvuTgkfF.js";import{_ as ie}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./FlashMessage-D4C-FUm8.js";import"./LayoutShell-FWpWJLvi.js";import"./LayoutShell.vue_vue_type_style_index_0_lang-CRqqKi3W.js";import"./index-BD4Vkpl0.js";import"./index-DgaiydM3.js";import"./index-B6ZB8t6H.js";import"./index-jsubnK9F.js";import"./index-BQecbcTn.js";import"./index-CCXKkwqV.js";import"./index-B_J-fD_o.js";const ne={class:"px-6 py-6"},de={class:"flex items-center justify-between mb-4"},ue={class:"bg-white border border-gray-200 rounded-lg"},pe={class:"flex items-center justify-between px-4 py-3 border-b"},ce={class:"flex items-center gap-2"},me={class:"py-0"},ge={style:{"overflow-x":"auto"}},xe={class:"flex items-center justify-center gap-2"},be=["onClick"],fe=["onClick"],ye={class:"grid grid-cols-1 gap-3 md:grid-cols-2"},ve={key:0,class:"text-red-500"},he={key:0,class:"text-red-500"},ke={key:0,class:"text-red-500"},_e={key:0,class:"text-red-500"},we={key:0,class:"text-red-500"},Ce={key:0,class:"text-red-500"},Ve={class:"md:col-span-2"},Pe={key:0,class:"text-red-500"},Se={class:"flex justify-end gap-2 pt-2"},Le=Object.assign({layout:ee},{__name:"IndexPrime",props:{checklists:Object,filters:Object,categories:Array,departments:Array,branches:Array},setup($){const{can:d}=oe(),p=$,U=c(()=>p.checklists?.data??[]),A=c(()=>p.checklists?.total??0),h=c(()=>p.checklists?.per_page??10),F=c(()=>p.checklists?.current_page??1),O=c(()=>(F.value-1)*h.value),f=b(p.filters?.sort_field??"id"),y=b(p.filters?.sort_order??1),v=b(p.filters?.q??""),T=b(!1),k=b(!1),_=b(null),s=G({name:"",code_sop:"",category_id:null,department_id:null,branch_id:null,status:"draft",description:""}),K=c(()=>(p.categories??[]).map(l=>({label:l.name,value:l.id}))),R=c(()=>(p.departments??[]).map(l=>({label:l.name,value:l.id}))),B=c(()=>(p.branches??[]).map(l=>({label:l.name,value:l.id}))),q=[{label:"Draft",value:"draft"},{label:"Aktif",value:"active"},{label:"Nonaktif",value:"inactive"}],z=c(()=>_.value?"Ubah Checklist":"Tambah Checklist");function I(l){d("checklists.edit")&&(_.value=l.id,s.name=l.name,s.code_sop=l.code_sop,s.status=l.status,s.description=l.description,s.category_id=l.category_id??null,s.department_id=l.department_id??null,s.branch_id=l.branch_id??null,k.value=!0)}function P(){k.value=!1}const Y=c(()=>s.processing);function E(){if(_.value){if(!d("checklists.edit"))return;s.put(`/checklists/${_.value}`,{onSuccess:()=>P()})}else{if(!d("checklists.create"))return;s.post("/checklists",{onSuccess:()=>P()})}}function H(l){d("checklists.delete")&&confirm("Yakin ingin menghapus?")&&w.delete(`/checklists/${l.id}`)}function M(l){w.get(route("checklists.index"),{page:l.page+1,per_page:l.rows,q:v.value,sort_field:f.value,sort_order:y.value},{preserveState:!0,preserveScroll:!0,replace:!0})}function X(l){f.value=l.sortField,y.value=l.sortOrder,w.get(route("checklists.index"),{page:1,per_page:h.value,q:v.value,sort_field:f.value,sort_order:y.value},{preserveState:!0,preserveScroll:!0,replace:!0})}let D;return W(v,l=>{clearTimeout(D),D=setTimeout(()=>{w.get(route("checklists.index"),{page:1,per_page:h.value,q:l,sort_field:f.value,sort_order:y.value},{preserveState:!0,preserveScroll:!0,replace:!0})},400)}),(l,t)=>(i(),m(Z,null,[a("div",ne,[a("div",de,[t[10]||(t[10]=a("h1",{class:"text-2xl font-bold text-gray-800"}," Manajemen Checklistsss ",-1)),e(d)("checklists.create")?(i(),S(e(N),{key:0,href:l.route("checklists.create"),as:"button",class:"inline-flex items-center px-3 py-2 rounded-md p-button p-button-info p-component"},{default:u(()=>[...t[9]||(t[9]=[a("i",{class:"mr-2 lni lni-plus"},null,-1),C(" Tambah Data Checklist ",-1)])]),_:1},8,["href"])):n("",!0)]),a("div",ue,[a("div",pe,[t[12]||(t[12]=a("h1",{class:"text-xl font-semibold text-gray-800"}," Daftar Checklist ",-1)),a("div",ce,[o(e(ae),null,{default:u(()=>[o(e(se),null,{default:u(()=>[...t[11]||(t[11]=[a("i",{class:"lni lni-search-alt"},null,-1)])]),_:1}),o(e(L),{modelValue:v.value,"onUpdate:modelValue":t[0]||(t[0]=r=>v.value=r),placeholder:"Pencarian kata kunci"},null,8,["modelValue"])]),_:1})])]),a("div",me,[a("div",ge,[o(e(te),{value:U.value,dataKey:"id",responsiveLayout:"scroll",paginator:!0,lazy:!0,totalRecords:A.value,first:O.value,rows:h.value,sortField:f.value,sortOrder:y.value,class:"w-full p-datatable-sm",rowHover:!0,showGridlines:!1,rowsPerPageOptions:[10,25,50,100],paginatorTemplate:"RowsPerPageDropdown FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink",pt:{thead:{class:"bg-gray-50"},headerRow:{class:"text-left"},headerCell:{class:"bg-gray-50 text-gray-500 uppercase text-[11px] tracking-wide px-2"},bodyRow:{class:"text-gray-800"},bodyCell:{class:"text-gray-800 px-2"}},ptOptions:{mergeSections:!0,mergeProps:!0},loading:T.value,tableStyle:{minWidth:"max-content",width:"100%"},onPage:M,onSort:X},{empty:u(()=>[...t[13]||(t[13]=[C(" Data checklist tidak ditemukan. ",-1)])]),loading:u(()=>[...t[14]||(t[14]=[C(" Memuat data checklist... ",-1)])]),default:u(()=>[o(e(x),{header:"No",style:{width:"80px"},headerClass:"bg-gray-50 text-gray-500 uppercase text-xs text-center px-2",bodyClass:"text-gray-700 px-2 text-center"},{body:u(({index:r})=>[C(g(O.value+r+1),1)]),_:1}),o(e(x),{field:"name",header:"Nama Checklist",sortable:"",headerClass:"bg-gray-50 text-gray-500 uppercase text-xs text-start px-2",bodyClass:"text-gray-700 px-2"}),o(e(x),{field:"code_sop",header:"Nomor SOP",sortable:"",headerClass:"bg-gray-50 text-gray-500 uppercase text-xs text-start px-2",bodyClass:"text-gray-700 px-2"}),o(e(x),{field:"category",header:"Kategori",headerClass:"bg-gray-50 text-gray-500 uppercase text-xs text-start px-2",bodyClass:"text-gray-700 px-2"}),o(e(x),{field:"department",header:"Departemen",headerClass:"bg-gray-50 text-gray-500 uppercase text-xs text-start px-2",bodyClass:"text-gray-700 px-2"}),o(e(x),{field:"branch",header:"Cabang",headerClass:"bg-gray-50 text-gray-500 uppercase text-xs text-start px-2",bodyClass:"text-gray-700 px-2"}),o(e(x),{field:"status",header:"Status",sortable:"",headerClass:"bg-gray-50 text-gray-500 uppercase text-xs text-start px-2",bodyClass:"text-gray-700 px-2"},{body:u(({data:r})=>[a("span",{class:J({"rounded-full px-2 py-0.5 text-xs font-medium":!0,"bg-green-50 text-green-600 dark:bg-green-500/15 dark:text-green-500":(r.status||"").toLowerCase()==="active","bg-red-50 text-red-600 dark:bg-red-500/15 dark:text-red-500":(r.status||"").toLowerCase()==="inactive","bg-gray-50 text-gray-600 dark:bg-gray-500/15 dark:text-gray-200":(r.status||"").toLowerCase()==="draft"})},g((r.status||"").toLowerCase()==="active"?"Aktif":(r.status||"").toLowerCase()==="inactive"?"Tidak Aktif":"Draft"),3)]),_:1}),e(d)("checklists.view")||e(d)("checklists.edit")||e(d)("checklists.delete")?(i(),S(e(x),{key:0,header:"Aksi",style:{width:"160px"},headerClass:"bg-gray-50 text-gray-500 uppercase text-xs text-center px-2",bodyClass:"px-2 text-center"},{body:u(({data:r})=>[a("div",xe,[e(d)("checklists.view")?(i(),S(e(N),{key:0,href:l.route("checklists.show",r.id),class:"inline-flex items-center justify-center w-8 h-8 text-white bg-blue-500 rounded hover:bg-blue-600","aria-label":"Lihat"},{default:u(()=>[...t[15]||(t[15]=[a("i",{class:"text-sm lni lni-eye"},null,-1)])]),_:1},8,["href"])):n("",!0),e(d)("checklists.edit")?(i(),m("button",{key:1,type:"button","aria-label":"Edit",class:"inline-flex items-center justify-center w-8 h-8 text-white bg-indigo-500 rounded hover:bg-indigo-600 focus:outline-none focus:ring-2 focus:ring-indigo-300",onClick:()=>I(r)},[...t[16]||(t[16]=[a("i",{class:"text-sm lni lni-pencil-1"},null,-1)])],8,be)):n("",!0),e(d)("checklists.delete")?(i(),m("button",{key:2,type:"button","aria-label":"Hapus",class:"inline-flex items-center justify-center w-8 h-8 text-white bg-red-500 rounded hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-300",onClick:()=>H(r)},[...t[17]||(t[17]=[a("i",{class:"text-sm lni lni-trash-3"},null,-1)])],8,fe)):n("",!0)])]),_:1})):n("",!0)]),_:1},8,["value","totalRecords","first","rows","sortField","sortOrder","loading"])])])])]),o(e(le),{visible:k.value,"onUpdate:visible":t[8]||(t[8]=r=>k.value=r),modal:"",header:z.value,style:{width:"44rem"}},{default:u(()=>[a("form",{onSubmit:Q(E,["prevent"]),class:"space-y-4"},[a("div",ye,[a("div",null,[t[18]||(t[18]=a("label",{class:"block mb-1 text-sm text-gray-600"},"Nama Checklist",-1)),o(e(L),{modelValue:e(s).name,"onUpdate:modelValue":t[1]||(t[1]=r=>e(s).name=r),placeholder:"Nama",class:"w-full"},null,8,["modelValue"]),e(s).errors.name?(i(),m("small",ve,g(e(s).errors.name),1)):n("",!0)]),a("div",null,[t[19]||(t[19]=a("label",{class:"block mb-1 text-sm text-gray-600"},"Nomor SOP",-1)),o(e(L),{modelValue:e(s).code_sop,"onUpdate:modelValue":t[2]||(t[2]=r=>e(s).code_sop=r),placeholder:"SOP-XXX-YYY",class:"w-full"},null,8,["modelValue"]),e(s).errors.code_sop?(i(),m("small",he,g(e(s).errors.code_sop),1)):n("",!0)]),a("div",null,[t[20]||(t[20]=a("label",{class:"block mb-1 text-sm text-gray-600"},"Kategori",-1)),o(e(V),{class:"w-full",modelValue:e(s).category_id,"onUpdate:modelValue":t[3]||(t[3]=r=>e(s).category_id=r),options:K.value,optionLabel:"label",optionValue:"value",placeholder:"Pilih Kategori"},null,8,["modelValue","options"]),e(s).errors.category_id?(i(),m("small",ke,g(e(s).errors.category_id),1)):n("",!0)]),a("div",null,[t[21]||(t[21]=a("label",{class:"block mb-1 text-sm text-gray-600"},"Departemen",-1)),o(e(V),{class:"w-full",modelValue:e(s).department_id,"onUpdate:modelValue":t[4]||(t[4]=r=>e(s).department_id=r),options:R.value,optionLabel:"label",optionValue:"value",placeholder:"Pilih Departemen"},null,8,["modelValue","options"]),e(s).errors.department_id?(i(),m("small",_e,g(e(s).errors.department_id),1)):n("",!0)]),a("div",null,[t[22]||(t[22]=a("label",{class:"block mb-1 text-sm text-gray-600"},"Cabang",-1)),o(e(V),{class:"w-full",modelValue:e(s).branch_id,"onUpdate:modelValue":t[5]||(t[5]=r=>e(s).branch_id=r),options:B.value,optionLabel:"label",optionValue:"value",placeholder:"Pilih Cabang"},null,8,["modelValue","options"]),e(s).errors.branch_id?(i(),m("small",we,g(e(s).errors.branch_id),1)):n("",!0)]),a("div",null,[t[23]||(t[23]=a("label",{class:"block mb-1 text-sm text-gray-600"},"Status",-1)),o(e(V),{class:"w-full",modelValue:e(s).status,"onUpdate:modelValue":t[6]||(t[6]=r=>e(s).status=r),options:q,optionLabel:"label",optionValue:"value",placeholder:"Pilih Status"},null,8,["modelValue"]),e(s).errors.status?(i(),m("small",Ce,g(e(s).errors.status),1)):n("",!0)]),a("div",Ve,[t[24]||(t[24]=a("label",{class:"block mb-1 text-sm text-gray-600"},"Keterangan",-1)),o(e(re),{modelValue:e(s).description,"onUpdate:modelValue":t[7]||(t[7]=r=>e(s).description=r),rows:"3",autoResize:"",placeholder:"Keterangan",class:"w-full"},null,8,["modelValue"]),e(s).errors.description?(i(),m("small",Pe,g(e(s).errors.description),1)):n("",!0)])]),a("div",Se,[o(e(j),{type:"submit",label:"Simpan",icon:"pi pi-check",loading:Y.value},null,8,["loading"]),o(e(j),{type:"button",label:"Batal",severity:"secondary",icon:"pi pi-times",onClick:P})])],32)]),_:1},8,["visible","header"])],64))}}),Ge=ie(Le,[["__scopeId","data-v-a315aea8"]]);export{Ge as default};
