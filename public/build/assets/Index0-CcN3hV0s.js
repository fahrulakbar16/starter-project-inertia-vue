import{d as T,y as S,z as C,U as A,e as u,o as g,b as n,a as e,g as p,D as Z,w as x,h as y,P as f,E as m,J as P,G as O,F as v,i as k,t as s,f as L,n as N,H}from"./app-CJkCV51W.js";import{_ as J}from"./Pagination-C2dOEo8X.js";import{_ as K}from"./Breadcrumb-BJQpsGcc.js";import{_ as Q}from"./AppLayout-BlEKf3Fz.js";import"./FlashMessage-D4C-FUm8.js";import"./LayoutShell-FWpWJLvi.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./useAuth-DvuTgkfF.js";import"./LayoutShell.vue_vue_type_style_index_0_lang-CRqqKi3W.js";const W={class:"flex overflow-hidden flex-col gap-3 px-3 h-full"},X={class:"flex justify-between items-center h-10"},Y={class:"flex flex-col overflow-hidden rounded-lg border border-gray-200 bg-white dark:border-gray-600 dark:bg-white/[0.03]"},ee={class:"flex flex-col gap-2 px-8 h-16 sm:flex-row sm:items-center sm:justify-between"},re={class:"flex gap-3 items-center"},te={class:"relative py-2"},ae={class:"overflow-auto overflow-x-auto","data-simplebar":""},se={class:"min-w-full text-sm table-fixed"},de={class:"py-2.5 bg-gray-100 border-gray-200 border-y dark:border-gray-600 dark:bg-gray-800"},oe={class:"py-2.5 bg-gray-100 border-gray-200 border-y dark:border-gray-600 dark:bg-gray-800"},le={class:"py-2.5 bg-gray-100 border-gray-200 border-y dark:border-gray-600 dark:bg-gray-800"},ne={class:"py-2.5 bg-gray-100 border-gray-200 border-y dark:border-gray-600 dark:bg-gray-800"},ie={class:"px-2 py-2 bg-gray-50 border-gray-200 border-y dark:border-gray-600 dark:bg-gray-900"},ue={class:"px-2 py-2 bg-gray-50 border border-gray-200 dark:border-gray-600 dark:bg-gray-900"},ge=["value"],ye={class:"px-2 py-2 bg-gray-50 border border-gray-200 dark:border-gray-600 dark:bg-gray-900"},pe={class:"grid grid-cols-2 gap-2"},be={class:"px-2 py-2 bg-gray-50 border border-gray-200 dark:border-gray-600 dark:bg-gray-900"},xe=["value"],fe={key:0},ce={colspan:7,class:"px-4 py-2 font-semibold text-left text-gray-600 bg-gray-50 dark:bg-gray-900/40 dark:text-gray-300"},me=["onClick"],ve={class:"text-xs"},he={class:"ml-1 text-xs font-medium text-gray-500"},ke={class:"px-3 py-3"},we={class:"px-3 py-3 font-mono"},_e={class:"px-3 py-3"},Be={class:"px-3 py-3"},De={class:"px-3 py-3"},Se={class:"px-3 py-3"},Ce={class:"px-3 py-3"},Oe={class:"px-3 py-3"},Ve={class:"flex gap-2 items-center"},Te={class:"px-3 py-3"},Pe={class:"px-3 py-3 font-mono"},$e={class:"px-3 py-3"},qe={class:"px-3 py-3"},Ge={class:"px-3 py-3"},Ue={class:"px-3 py-3"},je={class:"px-3 py-3"},Ie={class:"px-3 py-3"},Le={class:"flex gap-2 items-center"},Ne={class:"flex justify-between items-center px-8 py-3"},Ee={class:"text-xs text-gray-500"},Fe={components:{SortIcon:{props:{active:Boolean,direction:String},template:`
                <span class="inline-block ml-2 text-xs">
                    <template v-if="active">
                        {{ direction === 'asc' ? '▲' : '▼' }}
                    </template>
                    <template v-else>
                        ⇅
                    </template>
                </span>
            `}}},We=Object.assign(Fe,{layout:Q},{__name:"Index0",props:{purchaseOrders:{type:Object,required:!0},vendors:{type:Array,required:!0},filters:{type:Object,default:()=>({})},sortBy:{type:String,default:"date"},sortDirection:{type:String,default:"desc"},groupBy:{type:String,default:null}},setup(l){const o=l,E=[{label:"Dashboard",href:route("dashboard")},{label:"Purchase Order"}],d=T({q:o.filters.q??"",vendor_id:o.filters.vendor_id??null,date_from:o.filters.date_from??"",date_to:o.filters.date_to??"",status:o.filters.status??""}),h=T(o.groupBy??""),w=S(()=>h.value||(o.groupBy??"")),$=S(()=>!!w.value),q=S(()=>{const a={},r=((o.purchaseOrders.current_page||1)-1)*(o.purchaseOrders.per_page||20);return(o.purchaseOrders.data||[]).forEach((t,c)=>{a[t.id]=r+c+1}),a}),V=T(new Set),F=S(()=>{if(!$.value)return{};const a=o.purchaseOrders.data||[],r={};for(const b of a){const t=M(b);r[t]||(r[t]=[]),r[t].push(b)}return r});function M(a){switch(w.value){case"vendor":return a.vendor?.name??"Tanpa Vendor";case"date":return a.date??"-";case"status":return D(a.status);default:return"ungrouped"}}function z(a){switch(w.value){case"vendor":return`Vendor: ${a}`;case"date":return`Tanggal: ${a}`;case"status":return`Status: ${a}`;default:return a}}function G(a){return V.value.has(a)}function R(a){const r=new Set(V.value);r.has(a)?r.delete(a):r.add(a),V.value=r}function _({sortBy:a=o.sortBy,sortDirection:r=o.sortDirection}={}){H.get(route("purchase-orders.index"),{...d.value,groupBy:w.value||null,sortBy:a,sortDirection:r},{preserveScroll:!0,preserveState:!0,replace:!0,onStart:()=>{typeof window<"u"&&(window.__suppressProgress=!0)},onFinish:()=>{typeof window<"u"&&(window.__suppressProgress=!1)}})}let U;C(()=>d.value.q,()=>{clearTimeout(U),U=setTimeout(()=>_({}),400)}),C(()=>[d.value.vendor_id,d.value.status,d.value.date_from,d.value.date_to],()=>{_({})}),C(h,()=>{_({})}),C(()=>o.groupBy,a=>{!h.value&&a&&(h.value=a)});function B(a){const r=o.sortBy===a&&o.sortDirection==="asc"?"desc":"asc";_({sortBy:a,sortDirection:r})}function D(a){return{draft:"Draft",sent:"Terkirim",approved:"Disetujui",received_partial:"Diterima Sebagian",received_full:"Diterima Penuh",canceled:"Dibatalkan"}[a]??a}function j(a){return{draft:"bg-slate-100 text-slate-700",sent:"bg-blue-100 text-blue-700",approved:"bg-emerald-100 text-emerald-800",received_partial:"bg-amber-100 text-amber-700",received_full:"bg-emerald-200 text-emerald-800",canceled:"bg-rose-100 text-rose-700"}[a]??"bg-gray-100 text-gray-700"}function I(a){try{return new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",maximumFractionDigits:0}).format(a||0)}catch{return a}}return(a,r)=>{const b=A("SortIcon");return g(),u(v,null,[n(p(Z),{title:"Purchase Order"}),e("div",W,[e("div",X,[n(K,{items:E}),e("div",null,[n(p(f),{href:a.route("purchase-orders.create"),class:"inline-flex items-center px-3 py-2 text-sm font-medium text-white rounded-md bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"},{default:x(()=>[...r[11]||(r[11]=[y(" Buat PO ",-1)])]),_:1},8,["href"])])]),e("div",Y,[e("div",ee,[r[15]||(r[15]=e("div",{class:"font-bold text-gray-700 md:text-xl dark:text-gray-300"}," Daftar Purchase Order ",-1)),e("div",re,[e("div",null,[m(e("select",{"onUpdate:modelValue":r[0]||(r[0]=t=>h.value=t),class:"px-3 h-10 text-sm text-gray-800 bg-transparent rounded-lg border border-gray-200 dark:border-gray-700 dark:bg-gray-800 dark:text-white/90"},[...r[12]||(r[12]=[e("option",{value:""},"Kelompokan Berdasarkan",-1),e("option",{value:"vendor"},"Group: Vendor",-1),e("option",{value:"date"},"Group: Tanggal",-1),e("option",{value:"status"},"Group: Status",-1)])],512),[[P,h.value]])]),e("div",te,[r[13]||(r[13]=e("div",{class:"absolute left-4 top-1/2 text-gray-400 -translate-y-1/2"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"size-5"},[e("path",{"fill-rule":"evenodd",d:"M10.5 3.75a6.75 6.75 0 1 0 4.215 12.06l3.237 3.238a.75.75 0 1 0 1.06-1.061l-3.238-3.237A6.75 6.75 0 0 0 10.5 3.75Zm-5.25 6.75a5.25 5.25 0 1 1 10.5 0 5.25 5.25 0 0 1-10.5 0Z","clip-rule":"evenodd"})])],-1)),m(e("input",{"onUpdate:modelValue":r[1]||(r[1]=t=>d.value.q=t),type:"text",placeholder:"Cari nomor / vendor",class:"h-10 w-full rounded-lg border border-gray-200 bg-transparent py-2.5 pl-12 pr-4 text-sm text-gray-800 placeholder:text-gray-400 focus:border-blue-300 focus:outline-hidden focus:ring-3 focus:ring-blue-500/10 dark:border-gray-700 dark:bg-gray-800 dark:text-white/90 dark:placeholder:text-gray-400 dark:focus:border-blue-800 xl:w-[240px]"},null,512),[[O,d.value.q]])]),e("div",null,[n(p(f),{href:a.route("purchase-orders.create"),class:"inline-flex items-center gap-2 rounded-lg border border-gray-300 bg-blue-500 px-4 py-2 text-sm font-medium text-white-700 hover:bg-gray-50 hover:text-gray-800 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-400 dark:hover:bg-white/[0.03] dark:hover:text-gray-200"},{default:x(()=>[...r[14]||(r[14]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"size-4"},[e("path",{"fill-rule":"evenodd",d:"M12 3.75a.75.75 0 0 1 .75.75v6.75h6.75a.75.75 0 0 1 0 1.5h-6.75v6.75a.75.75 0 0 1-1.5 0v-6.75H4.5a.75.75 0 0 1 0-1.5h6.75V4.5a.75.75 0 0 1 .75-.75Z","clip-rule":"evenodd"})],-1),y(" Buat Permintaan ",-1)])]),_:1},8,["href"])])])]),e("div",ae,[e("table",se,[r[37]||(r[37]=e("colgroup",null,[e("col",{style:{width:"70px"}}),e("col",{style:{width:"180px"}}),e("col",{style:{width:"180px"}}),e("col",{style:{width:"260px"}}),e("col",{style:{width:"220px"}}),e("col",{style:{width:"160px"}}),e("col",{style:{width:"140px"}}),e("col",{style:{width:"140px"}})],-1)),e("thead",null,[e("tr",null,[r[20]||(r[20]=e("th",{class:"py-2.5 bg-gray-100 border-gray-200 border-y dark:border-gray-600 dark:bg-gray-800"},[e("div",{class:"px-3 font-medium text-gray-600 dark:text-gray-300"}," No. ")],-1)),r[21]||(r[21]=e("th",{class:"py-2.5 bg-gray-100 border-gray-200 border-y dark:border-gray-600 dark:bg-gray-800"},[e("div",{class:"px-3 font-medium text-gray-600 dark:text-gray-300"}," No. PO ")],-1)),r[22]||(r[22]=e("th",{class:"py-2.5 bg-gray-100 border-gray-200 border-y dark:border-gray-600 dark:bg-gray-800"},[e("div",{class:"px-3 font-medium text-gray-600 dark:text-gray-300"},"Referensi (PR)")],-1)),e("th",de,[e("button",{onClick:r[2]||(r[2]=t=>B("vendor")),class:"px-3 w-full font-medium text-left text-gray-600 dark:text-gray-300"},[r[16]||(r[16]=y(" Vendor ",-1)),n(b,{active:l.sortBy==="vendor",direction:l.sortDirection},null,8,["active","direction"])])]),e("th",oe,[e("button",{onClick:r[3]||(r[3]=t=>B("date")),class:"px-3 w-full font-medium text-left text-gray-600 dark:text-gray-300"},[r[17]||(r[17]=y(" Tanggal ",-1)),n(b,{active:l.sortBy==="date",direction:l.sortDirection},null,8,["active","direction"])])]),e("th",le,[e("button",{onClick:r[4]||(r[4]=t=>B("total")),class:"px-3 w-full font-medium text-left text-gray-600 dark:text-gray-300"},[r[18]||(r[18]=y(" Total ",-1)),n(b,{active:l.sortBy==="total",direction:l.sortDirection},null,8,["active","direction"])])]),e("th",ne,[e("button",{onClick:r[5]||(r[5]=t=>B("status")),class:"px-3 w-full font-medium text-left text-gray-600 dark:text-gray-300"},[r[19]||(r[19]=y(" Status ",-1)),n(b,{active:l.sortBy==="status",direction:l.sortDirection},null,8,["active","direction"])])]),r[23]||(r[23]=e("th",{class:"py-2.5 bg-gray-100 border-gray-200 border-y dark:border-gray-600 dark:bg-gray-800"},[e("div",{class:"px-3 font-medium text-gray-600 dark:text-gray-300"}," Aksi ")],-1))]),e("tr",null,[r[26]||(r[26]=e("th",{class:"px-2 py-2 bg-gray-50 border-gray-200 border-y dark:border-gray-600 dark:bg-gray-900"},null,-1)),e("th",ie,[m(e("input",{"onUpdate:modelValue":r[6]||(r[6]=t=>d.value.q=t),type:"text",placeholder:"Cari nomor / vendor",class:"px-3 w-full h-10 text-xs rounded border-gray-300 sm:text-sm dark:border-gray-700 dark:bg-gray-800 dark:text-white/90"},null,512),[[O,d.value.q]])]),r[27]||(r[27]=e("th",{class:"px-2 py-2 bg-gray-50 border border-gray-200 dark:border-gray-600 dark:bg-gray-900"},null,-1)),e("th",ue,[m(e("select",{"onUpdate:modelValue":r[7]||(r[7]=t=>d.value.vendor_id=t),class:"px-3 w-full h-10 text-xs rounded border-gray-300 sm:text-sm dark:border-gray-700 dark:bg-gray-800 dark:text-white/90"},[r[24]||(r[24]=e("option",{value:null},"Semua",-1)),(g(!0),u(v,null,k(l.vendors,t=>(g(),u("option",{key:t.id,value:t.id},s(t.name),9,ge))),128))],512),[[P,d.value.vendor_id]])]),r[28]||(r[28]=e("th",{class:"px-2 py-2 bg-gray-50 border border-gray-200 dark:border-gray-600 dark:bg-gray-900"},null,-1)),e("th",ye,[e("div",pe,[m(e("input",{"onUpdate:modelValue":r[8]||(r[8]=t=>d.value.date_from=t),type:"date",class:"px-2 w-full h-10 text-xs rounded border-gray-300 sm:text-sm dark:border-gray-700 dark:bg-gray-800 dark:text-white/90"},null,512),[[O,d.value.date_from]]),m(e("input",{"onUpdate:modelValue":r[9]||(r[9]=t=>d.value.date_to=t),type:"date",class:"px-2 w-full h-10 text-xs rounded border-gray-300 sm:text-sm dark:border-gray-700 dark:bg-gray-800 dark:text-white/90"},null,512),[[O,d.value.date_to]])])]),e("th",be,[m(e("select",{"onUpdate:modelValue":r[10]||(r[10]=t=>d.value.status=t),class:"px-3 w-full h-10 text-xs rounded border-gray-300 sm:text-sm dark:border-gray-700 dark:bg-gray-800 dark:text-white/90"},[r[25]||(r[25]=e("option",{value:""},"Semua",-1)),(g(!0),u(v,null,k(a.statusOptions,t=>(g(),u("option",{key:t,value:t},s(D(t)),9,xe))),128))],512),[[P,d.value.status]])]),r[29]||(r[29]=e("th",{class:"px-2 py-2 bg-gray-50 border-gray-200 border-y dark:border-gray-600 dark:bg-gray-900"},null,-1))])]),e("tbody",null,[!l.purchaseOrders.data||l.purchaseOrders.data.length===0?(g(),u("tr",fe,[...r[30]||(r[30]=[e("td",{colspan:"8",class:"py-8 text-center text-gray-500"}," Tidak ada data ",-1)])])):L("",!0),$.value?(g(!0),u(v,{key:1},k(F.value,(t,c)=>(g(),u(v,{key:c},[e("tr",null,[e("td",ce,[e("button",{class:"inline-flex gap-2 items-center",onClick:i=>R(c)},[e("span",ve,s(G(c)?"▶":"▼"),1),e("span",null,s(z(c)),1),e("span",he,"("+s(t.length)+")",1)],8,me)])]),G(c)?L("",!0):(g(!0),u(v,{key:0},k(t,i=>(g(),u("tr",{key:i.id,class:"border-b border-gray-200 dark:border-gray-700"},[e("td",ke,s(q.value[i.id]??"-"),1),e("td",we,s(i.number),1),e("td",_e,s(i.from_pr?.number||"-"),1),e("td",Be,s(i.vendor?.name||"-"),1),e("td",De,s(i.date),1),e("td",Se,s(I(i.total)),1),e("td",Ce,[e("span",{class:N([j(i.status),"px-2.5 py-1 text-xs font-medium rounded-full"])},s(D(i.status)),3)]),e("td",Oe,[e("div",Ve,[n(p(f),{href:a.route("purchase-orders.show",i.id),class:"text-primary-600 hover:underline"},{default:x(()=>[...r[31]||(r[31]=[y("Lihat",-1)])]),_:1},8,["href"]),n(p(f),{href:a.route("purchase-orders.edit",i.id),class:"inline-flex items-center px-2 py-1 text-xs text-gray-700 rounded border border-gray-300 hover:bg-gray-50 dark:border-gray-700 dark:text-gray-300"},{default:x(()=>[...r[32]||(r[32]=[y("Edit",-1)])]),_:1},8,["href"]),n(p(f),{href:a.route("purchase-orders.print",i.id),class:"inline-flex items-center px-2 py-1 text-xs text-gray-700 rounded border border-gray-300 hover:bg-gray-50"},{default:x(()=>[...r[33]||(r[33]=[y("Cetak",-1)])]),_:1},8,["href"])])])]))),128))],64))),128)):(g(!0),u(v,{key:2},k(l.purchaseOrders.data,t=>(g(),u("tr",{key:t.id,class:"border-b border-gray-200 dark:border-gray-700"},[e("td",Te,s(q.value[t.id]??"-"),1),e("td",Pe,s(t.number),1),e("td",$e,s(t.from_pr?.number||"-"),1),e("td",qe,s(t.vendor?.name||"-"),1),e("td",Ge,s(t.date),1),e("td",Ue,s(I(t.total)),1),e("td",je,[e("span",{class:N([j(t.status),"px-2.5 py-1 text-xs font-medium rounded-full"])},s(D(t.status)),3)]),e("td",Ie,[e("div",Le,[n(p(f),{href:a.route("purchase-orders.show",t.id),class:"text-primary-600 hover:underline"},{default:x(()=>[...r[34]||(r[34]=[y("Lihat",-1)])]),_:1},8,["href"]),n(p(f),{href:a.route("purchase-orders.edit",t.id),class:"inline-flex items-center px-2 py-1 text-xs text-gray-700 rounded border border-gray-300 hover:bg-gray-50 dark:border-gray-700 dark:text-gray-300"},{default:x(()=>[...r[35]||(r[35]=[y("Edit",-1)])]),_:1},8,["href"]),n(p(f),{href:a.route("purchase-orders.print",t.id),class:"inline-flex items-center px-2 py-1 text-xs text-gray-700 rounded border border-gray-300 hover:bg-gray-50"},{default:x(()=>[...r[36]||(r[36]=[y("Cetak",-1)])]),_:1},8,["href"])])])]))),128))])])]),e("div",Ne,[e("div",Ee," Total: "+s(l.purchaseOrders.total),1),n(J,{pagination:l.purchaseOrders},null,8,["pagination"])])])])],64)}}});export{We as default};
