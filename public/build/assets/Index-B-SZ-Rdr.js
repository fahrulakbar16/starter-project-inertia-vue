import{y as B,d as b,z as F,H as y,u as O,e as n,o,b as g,a as e,g as r,D as T,c as V,f as m,E as x,G as v,F as q,i as G,t as u,w as h}from"./app-CJkCV51W.js";import{_ as M}from"./AppLayout-BlEKf3Fz.js";import{_ as N}from"./Breadcrumb-BJQpsGcc.js";import{_ as H}from"./Pagination-C2dOEo8X.js";import{s as I}from"./index-D_jvqarE.js";import"./FlashMessage-D4C-FUm8.js";import"./LayoutShell-FWpWJLvi.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./useAuth-DvuTgkfF.js";import"./LayoutShell.vue_vue_type_style_index_0_lang-CRqqKi3W.js";import"./index-BD4Vkpl0.js";import"./index-B9o0VbjL.js";const A={class:"px-3 h-full flex flex-col gap-3 overflow-hidden"},J={class:"flex items-center justify-between h-10"},z={class:"flex flex-col bg-white border border-gray-200 rounded-lg overflow-hidden"},P={class:"flex items-center justify-between px-6 py-3 border-b"},Y={class:"relative"},K={class:"overflow-auto","data-simplebar":""},Q={class:"min-w-full text-sm"},W={class:"p-3 text-center"},X={class:"p-3"},Z={class:"p-3"},ee=["src"],te={key:1,class:"text-gray-400"},se={class:"p-3 text-center"},ae={class:"p-3 text-center"},le={class:"p-3"},re={class:"flex gap-2 justify-center"},oe=["onClick"],ne=["onClick"],ie={key:1},de={class:"flex items-center justify-between w-full"},ue={class:"text-xl font-semibold text-gray-900"},ce={class:"flex flex-col gap-3"},me={key:0,class:"mt-1 text-xs text-red-600"},pe={class:"flex items-center gap-3"},be={key:0,class:"mt-1 text-xs text-red-600"},ge={key:1,class:"mt-2"},fe=["src"],_e={class:"flex justify-end gap-2"},ye=["disabled"],xe={key:0},ve={key:1},Be=Object.assign({layout:M},{__name:"Index",props:{announcements:Object,q:String},setup(k){const f=k,i=B(()=>f.announcements||{data:[]}),p=b(f.q||"");let _=null;F(p,()=>{clearTimeout(_),_=setTimeout(()=>C(),350)});function C(){y.get(route("announcements.index"),{q:p.value},{preserveScroll:!0,preserveState:!0,replace:!0})}const c=b(!1),t=O({id:null,title:"",img_file:null,created_by:null}),d=b("");function w(){t.defaults({id:null,title:"",created_by:null}),t.reset(),t.clearErrors(),t.img_file=null,d.value="",c.value=!0}function D(a){t.defaults({id:a.id,title:a.title,created_by:a.created_by||null}),t.reset(),t.clearErrors(),Object.assign(t,{id:a.id,title:a.title,created_by:a.created_by||null}),t.img_file=null,d.value=a.img_url||"",c.value=!0}function j(){const a={preserveScroll:!0,forceFormData:!0,onSuccess:()=>{c.value=!1}};t.id?t.put(route("announcements.update",t.id),a):t.post(route("announcements.store"),a)}function S(a){a&&confirm("Yakin hapus pengumuman ini?")&&y.delete(route("announcements.destroy",a),{onSuccess:()=>{},onError:s=>{alert(s?.message||"Gagal menghapus data.")}})}function E(a){return a?new Date(a).toLocaleString("id-ID"):"-"}function L(a){const s=a?.target?.files?.[0];s&&(t.img_file=s,d.value=URL.createObjectURL(s))}function R(){t.img_file=null,d.value=""}return(a,s)=>(o(),n("div",A,[g(r(T),{title:"Reimbursement"}),e("div",J,[g(N,{items:[{label:"Reimbursement"}]}),e("div",{class:"flex gap-2"},[e("button",{class:"px-3 py-2 text-sm text-white bg-blue-600 rounded",onClick:w},"Ajukan Reimbursement")])]),e("div",z,[e("div",P,[s[5]||(s[5]=e("div",{class:"text-xl font-semibold text-gray-800"},"Daftar Reimbursement",-1)),e("div",Y,[x(e("input",{"onUpdate:modelValue":s[0]||(s[0]=l=>p.value=l),type:"text",placeholder:"Cari...",class:"h-10 w-64 rounded-lg border border-gray-200 bg-transparent py-2.5 pl-3 pr-8 text-sm text-gray-800 focus:border-blue-300 focus:outline-hidden focus:ring-2 focus:ring-blue-500/20"},null,512),[[v,p.value]]),s[4]||(s[4]=e("span",{class:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400"},"ðŸ”",-1))])]),e("div",K,[e("table",Q,[s[7]||(s[7]=e("thead",null,[e("tr",null,[e("th",{class:"p-3 bg-gray-100 border-y border-gray-200"},[e("div",{class:"text-center font-medium text-gray-600"},"No")]),e("th",{class:"p-3 bg-gray-100 border border-gray-200"},[e("div",{class:"text-left font-medium text-gray-600"},"Judul")]),e("th",{class:"p-3 bg-gray-100 border border-gray-200"},[e("div",{class:"text-left font-medium text-gray-600"},"Gambar")]),e("th",{class:"p-3 bg-gray-100 border-y border-gray-200"},[e("div",{class:"text-center font-medium text-gray-600"},"Dibuat Oleh")]),e("th",{class:"p-3 bg-gray-100 border-y border-gray-200"},[e("div",{class:"text-center font-medium text-gray-600"},"Dibuat")]),e("th",{class:"p-3 bg-gray-100 border-y border-gray-200"},[e("div",{class:"text-center font-medium text-gray-600"},"Aksi")])])],-1)),e("tbody",null,[i.value.data&&i.value.data.length?(o(!0),n(q,{key:0},G(i.value.data,(l,U)=>(o(),n("tr",{key:l.id,class:"border-b border-gray-200"},[e("td",W,u((i.value.current_page-1)*i.value.per_page+U+1),1),e("td",X,u(l.title),1),e("td",Z,[l.img_url?(o(),n("img",{key:0,src:l.img_url,alt:"gambar",class:"h-10 rounded"},null,8,ee)):(o(),n("span",te,"-"))]),e("td",se,u(l.user?.name||"-"),1),e("td",ae,u(E(l.created_at)),1),e("td",le,[e("div",re,[e("button",{class:"p-1 text-yellow-500 hover:text-yellow-700",onClick:$=>D(l)},"Edit",8,oe),e("button",{class:"p-1 text-red-500 hover:text-red-700",onClick:$=>S(l.id)},"Hapus",8,ne)])])]))),128)):(o(),n("tr",ie,[...s[6]||(s[6]=[e("td",{colspan:"6",class:"py-6 text-center text-gray-500"},"Tidak ada data",-1)])]))])])]),i.value.data&&i.value.data.length?(o(),V(H,{key:0,pagination:i.value,class:"border-t"},null,8,["pagination"])):m("",!0)]),g(r(I),{visible:c.value,"onUpdate:visible":s[3]||(s[3]=l=>c.value=l),modal:"",dismissableMask:"",style:{width:"520px",padding:"6px"}},{header:h(()=>[e("div",de,[e("h3",ue,u(r(t).id?"Edit":"Tambah")+" Pengumuman",1)])]),default:h(()=>[e("div",ce,[e("div",null,[s[8]||(s[8]=e("label",{class:"block mb-1 text-sm text-gray-600"},"Judul",-1)),x(e("input",{"onUpdate:modelValue":s[1]||(s[1]=l=>r(t).title=l),type:"text",class:"w-full h-10 px-3 rounded border border-gray-300"},null,512),[[v,r(t).title]]),r(t).errors.title?(o(),n("p",me,u(r(t).errors.title),1)):m("",!0)]),e("div",null,[s[9]||(s[9]=e("label",{class:"block mb-1 text-sm text-gray-600"},"Gambar (opsional)",-1)),e("div",pe,[e("input",{type:"file",accept:"image/*",onChange:L,class:"w-full h-10 px-3 rounded border border-gray-300"},null,32),d.value||r(t).img_url?(o(),n("button",{key:0,type:"button",class:"px-2 h-10 text-xs rounded border",onClick:R},"Hapus")):m("",!0)]),r(t).errors.img_file?(o(),n("p",be,u(r(t).errors.img_file),1)):m("",!0),d.value||r(t).img_url?(o(),n("div",ge,[e("img",{src:d.value||r(t).img_url,alt:"preview",class:"h-24 rounded border"},null,8,fe)])):m("",!0)]),e("div",_e,[e("button",{class:"px-3 h-10 rounded border",type:"button",onClick:s[2]||(s[2]=l=>c.value=!1)},"Batal"),e("button",{disabled:r(t).processing,class:"px-3 h-10 text-white bg-blue-600 rounded disabled:opacity-60",type:"button",onClick:j},[r(t).processing?(o(),n("span",xe,"Menyimpan...")):(o(),n("span",ve,"Simpan"))],8,ye)])])]),_:1},8,["visible"])]))}});export{Be as default};
