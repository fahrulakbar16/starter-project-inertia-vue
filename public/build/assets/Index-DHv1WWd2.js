import{d as C,y as R,z as $,U as te,e as c,o as i,b as s,a as t,g as k,D as re,c as U,f as w,w as P,P as S,E as _,J as G,S as ae,h as f,G as I,F as x,i as D,t as n,n as g,H as q}from"./app-CJkCV51W.js";import{_ as oe}from"./AppLayout-BlEKf3Fz.js";import{_ as ne}from"./Breadcrumb-BJQpsGcc.js";import{_ as se}from"./Pagination-C2dOEo8X.js";import{_ as le}from"./ConfirmModal-DAlWp-FQ.js";import{P as de}from"./PlusSquareIcon-DA_kLpvy.js";import{S as E}from"./ShowIcon-CiA5nZAB.js";import{E as F}from"./EditIcon-B9T5EQzJ.js";import{T as M}from"./TrashIcon-DSAHmBPH.js";import"./sweetalert2.esm.all-Dr03eess.js";import"./FlashMessage-D4C-FUm8.js";import"./LayoutShell-FWpWJLvi.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./useAuth-DvuTgkfF.js";import"./LayoutShell.vue_vue_type_style_index_0_lang-CRqqKi3W.js";const ie={class:"flex overflow-hidden flex-col gap-3 px-3 h-full"},ue={class:"flex justify-between items-center h-10"},ce={class:"flex flex-col overflow-hidden rounded-lg border border-gray-200 bg-white dark:border-gray-600 dark:bg-white/[0.03]"},ge={class:"flex flex-col gap-2 px-8 h-16 sm:flex-row sm:items-center sm:justify-between"},ye={class:"flex gap-3 items-center"},pe={class:"overflow-auto overflow-x-auto","data-simplebar":""},be={class:"min-w-full text-sm table-fixed"},me={class:"py-2.5 whitespace-nowrap border-y border-gray-200 bg-gray-100 dark:border-gray-600 dark:bg-gray-800"},fe={class:"py-2.5 bg-gray-100 border-gray-200 border-y dark:border-gray-600 dark:bg-gray-800"},xe={class:"py-2.5 bg-gray-100 border-gray-200 border-y dark:border-gray-600 dark:bg-gray-800"},ve={class:"py-2.5 bg-gray-100 border-gray-200 border-y dark:border-gray-600 dark:bg-gray-800"},he={class:"py-2.5 bg-gray-100 border-gray-200 border-y dark:border-gray-600 dark:bg-gray-800"},ke={class:"py-2.5 bg-gray-100 border-gray-200 border-y dark:border-gray-600 dark:bg-gray-800"},we={class:"py-2.5 bg-gray-100 border-gray-200 border-y dark:border-gray-600 dark:bg-gray-800"},_e={colspan:"5",class:"p-2 bg-gray-50 border-gray-200 border-y dark:border-gray-600 dark:bg-gray-900"},Be={class:"relative space-x-4"},Ce={class:"p-2 bg-gray-50 border border-gray-200 dark:border-gray-600 dark:bg-gray-900"},Pe=["value"],Se={class:"p-2 bg-gray-50 border border-gray-200 dark:border-gray-600 dark:bg-gray-900"},De=["value"],$e={class:"p-2 bg-gray-50 border border-gray-200 dark:border-gray-600 dark:bg-gray-900"},qe={class:"flex justify-center gap-2"},Ve={key:0},Te={colspan:7,class:"px-4 py-2 font-semibold text-left text-gray-600 bg-gray-50 dark:bg-gray-900/40 dark:text-gray-300"},Re=["onClick"],Ue={class:"text-xs"},Ge={class:"ml-1 text-xs font-medium text-gray-500"},Ie={class:"px-3 py-3 text-center"},Ne={class:"p-3 text-center"},je={class:"px-6 py-3"},Oe={class:"flex gap-3 items-center justify-between"},Le=["onClick"],Ae={class:"p-3 text-center"},Ee={class:"p-3 text-center"},Fe={class:"px-6 py-3"},Me={class:"flex gap-3 items-center justify-between"},He=["onClick"],ze={components:{SortIcon:{props:{active:Boolean,direction:String},template:`
                <span class="inline-block ml-2 text-xs">
                    <template v-if="active">
                        {{ direction === 'asc' ? 'â–²' : 'â–¼' }}
                    </template>
                    <template v-else>
                        â‡…
                    </template>
                </span>
            `}}},it=Object.assign(ze,{layout:oe},{__name:"Index",props:{can_edit:{type:Boolean,required:!0},can_delete:{type:Boolean,required:!0},can_view:{type:Boolean,required:!0},can_create:{type:Boolean,required:!0},goodReceipts:{type:Object,required:!0},branches:{type:Array,required:!0},filters:{type:Object,default:()=>({})},sortBy:{type:String,default:"received_at"},employees:{type:Array,required:!0},sortDirection:{type:String,default:"desc"},groupBy:{type:String,default:null}},setup(o){const H=[{label:"Penyimpanan"},{label:"Penerimaan Barang"}],u=o,d=C({q:u.filters.q??"",branch_id:u.filters.branch_id??null,date_from:u.filters.date_from??"",date_to:u.filters.date_to??"",employee_id:u.filters.employee_id??null}),p=C(u.groupBy??""),B=R(()=>p.value||(u.groupBy??"")),N=R(()=>!!B.value),V=C(!1),v=C(null),T=C(new Set),z=R(()=>{if(!N.value)return{};const a=u.goodReceipts.data||[],e={};for(const y of a){const r=Y(y);e[r]||(e[r]=[]),e[r].push(y)}return e});function Y(a){switch(B.value){case"source":return a.source??"-";case"vendor":return a.vendor??"-";case"from_branch":return a.from_branch??"-";case"received_at":return a.received_at??"-";default:return"ungrouped"}}function J(a){switch(B.value){case"source":return`Sumber: ${a}`;case"vendor":return`Vendor oleh: ${a}`;case"from_branch":return`Dari Cabang: ${a}`;case"received_at":return`Tanggal: ${a}`;default:return a}}function j(a){return T.value.has(a)}function K(a){const e=new Set(T.value);e.has(a)?e.delete(a):e.add(a),T.value=e}function h({sortBy:a=u.sortBy,sortDirection:e=u.sortDirection}={}){console.log("effectiveGroup",B.value),q.get(route("good-receipts.index"),{...d.value,groupBy:B.value||null,sortBy:a,sortDirection:e},{preserveScroll:!0,preserveState:!0,replace:!0,onStart:()=>{typeof window<"u"&&(window.__suppressProgress=!0)},onFinish:()=>{typeof window<"u"&&(window.__suppressProgress=!1)}})}let O;$(()=>d.value.q,()=>{clearTimeout(O),O=setTimeout(()=>h({}),400)}),$(()=>[d.value.branch_id,d.value.date_from,d.value.date_to,d.value.employee_id],()=>{h({})}),$(p,()=>{h({})}),$(()=>u.groupBy,a=>{!p.value&&a&&(p.value=a)});function b(a){const e=u.sortBy===a&&u.sortDirection==="asc"?"desc":"asc";h({sortBy:a,sortDirection:e})}function W(){d.value={q:"",branch_id:null,date_from:"",date_to:"",employee_id:null},p.value="",h({})}function L(a){a?.id&&(v.value=a,V.value=!0)}function A(){V.value=!1,v.value=null}function Q(){v.value?.id&&q.delete(route("good-receipts.destroy",v.value.id),{preserveScroll:!0,onSuccess:()=>{A(),h({})}})}function X(a){const e=new URL(window.location.href);e.searchParams.set("page",a),q.get(e.pathname+e.search,{},{preserveScroll:!0,preserveState:!0,replace:!0})}function Z(a){const e=new URL(window.location.href);e.searchParams.set("per_page",a),e.searchParams.delete("page"),q.get(e.pathname+e.search,{},{preserveScroll:!0,preserveState:!0,replace:!0})}return(a,e)=>{const y=te("SortIcon");return i(),c(x,null,[s(k(re),{title:"Pembelian Barang"}),t("div",ie,[t("div",ue,[s(ne,{items:H}),o.can_create?(i(),U(k(S),{key:0,href:a.route("good-receipts.create"),class:"inline-flex items-center gap-2 text-white hover:text-blue-500 rounded-md border hover:border-gray-300 bg-blue-500 px-3 py-2 text-sm font-medium text-white-700 hover:bg-gray-50 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-400 dark:hover:bg-white/[0.03] dark:hover:text-gray-200"},{default:P(()=>[s(de),e[13]||(e[13]=t("span",{class:"hidden md:block"},"Buat Penerimaan",-1))]),_:1},8,["href"])):w("",!0)]),t("div",ce,[t("div",ge,[e[15]||(e[15]=t("div",{class:"font-bold text-gray-700 md:text-xl dark:text-gray-300"}," Daftar Penerimaan Barang ",-1)),t("div",ye,[t("div",null,[_(t("select",{"onUpdate:modelValue":e[0]||(e[0]=r=>p.value=r),class:"px-3 h-10 text-sm text-gray-800 bg-transparent rounded-lg border border-gray-200 dark:border-gray-700 dark:bg-gray-800 dark:text-white/90"},[...e[14]||(e[14]=[ae('<option value="">Kelompokan Berdasarkan</option><option value="source">Group: Asal Sumber</option><option value="vendor">Group: Vendor</option><option value="from_branch"> Group: Dari Cabang </option><option value="received_at">Group: Tanggal</option>',5)])],512),[[G,p.value]])])])]),t("div",pe,[t("table",be,[t("thead",null,[t("tr",null,[e[23]||(e[23]=t("th",{class:"py-2.5 bg-gray-100 border-gray-200 border-y dark:border-gray-600 dark:bg-gray-800"},[t("div",{class:"px-3 font-medium text-gray-600 dark:text-gray-300"}," No. ")],-1)),t("th",me,[t("button",{onClick:e[1]||(e[1]=r=>b("source")),class:"px-3 font-medium text-gray-600 dark:text-gray-300"},[e[16]||(e[16]=f(" Sumber ",-1)),s(y,{active:o.sortBy==="source",direction:o.sortDirection},null,8,["active","direction"])])]),t("th",fe,[t("button",{onClick:e[2]||(e[2]=r=>b("order_no")),class:"px-3 font-medium whitespace-nowrap text-gray-600 dark:text-gray-300"},[e[17]||(e[17]=f(" No. Order ",-1)),s(y,{active:o.sortBy==="order_no",direction:o.sortDirection},null,8,["active","direction"])])]),t("th",xe,[t("button",{onClick:e[3]||(e[3]=r=>b("vendor")),class:"px-3 w-full font-medium text-gray-600 dark:text-gray-300 whitespace-nowrap"},[e[18]||(e[18]=f(" Vendor ",-1)),s(y,{active:o.sortBy==="vendor",direction:o.sortDirection},null,8,["active","direction"])])]),t("th",ve,[t("button",{onClick:e[4]||(e[4]=r=>b("transfer_no")),class:"px-3 w-full font-medium text-gray-600 dark:text-gray-300"},[e[19]||(e[19]=f(" No. Transfer ",-1)),s(y,{active:o.sortBy==="transfer_no",direction:o.sortDirection},null,8,["active","direction"])])]),t("th",he,[t("button",{onClick:e[5]||(e[5]=r=>b("branch")),class:"px-3 w-full font-medium text-gray-600 dark:text-gray-300"},[e[20]||(e[20]=f(" Dari Cabang ",-1)),s(y,{active:o.sortBy==="branch",direction:o.sortDirection},null,8,["active","direction"])])]),t("th",ke,[t("button",{onClick:e[6]||(e[6]=r=>b("employee")),class:"px-3 w-full font-medium text-gray-600 dark:text-gray-300"},[e[21]||(e[21]=f(" Diterima Oleh ",-1)),s(y,{active:o.sortBy==="employee",direction:o.sortDirection},null,8,["active","direction"])])]),t("th",we,[t("button",{onClick:e[7]||(e[7]=r=>b("received_at")),class:"px-3 w-full font-medium text-gray-600 dark:text-gray-300"},[e[22]||(e[22]=f(" Tanggal Penerimaan ",-1)),s(y,{active:o.sortBy==="received_at",direction:o.sortDirection},null,8,["active","direction"])])]),e[24]||(e[24]=t("th",{class:"py-2.5 bg-gray-100 border-gray-200 border-y dark:border-gray-600 dark:bg-gray-800"},[t("div",{class:"px-3 font-medium text-gray-600 dark:text-gray-300"}," Aksi ")],-1))]),t("tr",null,[t("th",_e,[t("div",Be,[_(t("input",{"onUpdate:modelValue":e[8]||(e[8]=r=>d.value.q=r),type:"text",placeholder:"Cari Nomor / Vendor",class:"rounded-lg border border-gray-200 bg-transparent py-2.5 pl-4 pr-32 text-sm text-gray-800 focus:border-blue-300 focus:outline-hidden focus:ring-2 focus:ring-blue-500/20"},null,512),[[I,d.value.q]]),e[25]||(e[25]=t("span",{class:"absolute right-36 top-1/2 -translate-y-1/2 text-gray-400"},"ðŸ”",-1))])]),t("th",Ce,[_(t("select",{"onUpdate:modelValue":e[9]||(e[9]=r=>d.value.branch_id=r),class:"px-3 w-28 text-xs rounded border-gray-300 sm:text-sm dark:border-gray-700 dark:bg-gray-800 dark:text-white/90"},[e[26]||(e[26]=t("option",{value:null},"Semua",-1)),(i(!0),c(x,null,D(o.branches,r=>(i(),c("option",{key:r.id,value:r.id},n(r.name),9,Pe))),128))],512),[[G,d.value.branch_id]])]),t("th",Se,[_(t("select",{"onUpdate:modelValue":e[10]||(e[10]=r=>d.value.employee_id=r),class:"px-3 w-28 text-xs rounded border-gray-300 sm:text-sm dark:border-gray-700 dark:bg-gray-800 dark:text-white/90"},[e[27]||(e[27]=t("option",{value:null},"Semua",-1)),(i(!0),c(x,null,D(o.employees,r=>(i(),c("option",{key:r.id,value:r.id},n(r.name),9,De))),128))],512),[[G,d.value.employee_id]])]),t("th",$e,[t("div",qe,[_(t("input",{"onUpdate:modelValue":e[11]||(e[11]=r=>d.value.date_from=r),type:"date",class:"px-2 w-32 h-10 text-xs rounded border-gray-300 sm:text-sm dark:border-gray-700 dark:bg-gray-800 dark:text-white/90"},null,512),[[I,d.value.date_from]]),_(t("input",{"onUpdate:modelValue":e[12]||(e[12]=r=>d.value.date_to=r),type:"date",class:"px-2 w-32 h-10 text-xs rounded border-gray-300 sm:text-sm dark:border-gray-700 dark:bg-gray-800 dark:text-white/90"},null,512),[[I,d.value.date_to]])])]),t("th",{class:"p-2 bg-gray-50 border-gray-200 border-y dark:border-gray-600 dark:bg-gray-900"},[t("button",{onClick:W,class:"px-3 py-2 text-xs rounded bg-red-500 text-white hover:bg-red-600"}," Clear ")])])]),t("tbody",null,[!o.goodReceipts.data||o.goodReceipts.data.length===0?(i(),c("tr",Ve,[...e[28]||(e[28]=[t("td",{colspan:"7",class:"py-8 text-center text-gray-500"}," Tidak ada data penerimaan barang. ",-1)])])):w("",!0),N.value?(i(!0),c(x,{key:1},D(z.value,(r,m)=>(i(),c(x,{key:m},[t("tr",null,[t("td",Te,[t("button",{class:"inline-flex gap-2 items-center",onClick:l=>K(m)},[t("span",Ue,n(j(m)?"â–¶":"â–¼"),1),t("span",null,n(J(m)),1),t("span",Ge,"("+n(r.length)+")",1)],8,Re)])]),j(m)?w("",!0):(i(!0),c(x,{key:0},D(r,(l,ee)=>(i(),c("tr",{key:l.id,class:"border-b border-gray-200 dark:border-gray-700"},[t("td",Ie,n(ee+1)+". ",1),t("td",{class:g(["p-3 text-center font-semibold whitespace-nowrap",l.source==="Pembelian"?"text-yellow-400":"text-green-400"])},n(l.source),3),t("td",{class:g(["p-3 font-mono font-semibold text-center whitespace-nowrap",l.source==="Pembelian"?"text-yellow-400":"text-green-400"])},n(l.order_no??"-"),3),t("td",{class:g(["p-3 text-center  font-semibold",l.source==="Pembelian"?"text-yellow-400":"text-green-400"])},n(l.vendor??"-"),3),t("td",{class:g(["p-3 text-center font-semibold whitespace-nowrap",l.source==="Pembelian"?"text-yellow-400":"text-green-400"])},n(l.transfer_no),3),t("td",{class:g(["p-3 text-center font-semibold",l.source==="Pembelian"?"text-yellow-400":"text-green-400"])},n(l.from_branch),3),t("td",{class:g(["p-3 text-center font-semibold",l.source==="Pembelian"?"text-yellow-400":"text-green-400"])},n(l.employee??"-"),3),t("td",Ne,n(l.received_at),1),t("td",je,[t("div",Oe,[s(k(S),{href:a.route("good-receipts.show",l.id)},{default:P(()=>[s(E,{class:"text-blue-400"})]),_:1},8,["href"]),s(k(S),{href:a.route("good-receipts.edit",l.id)},{default:P(()=>[s(F,{class:"text-yellow-500"})]),_:1},8,["href"]),t("button",{type:"button",onClick:Ye=>L(l)},[s(M,{class:"text-red-500"})],8,Le)])])]))),128))],64))),128)):(i(!0),c(x,{key:2},D(o.goodReceipts.data,(r,m)=>(i(),c("tr",{key:r.id,class:"border-b border-gray-200 dark:border-gray-700"},[t("td",Ae,n(o.goodReceipts.current_page*o.goodReceipts.per_page-o.goodReceipts.per_page+m+1)+". ",1),t("td",{class:g(["p-3 text-center font-semibold whitespace-nowrap",r.source==="Pembelian"?"text-yellow-400":"text-green-400"])},n(r.source),3),t("td",{class:g(["p-3 font-mono font-semibold text-center whitespace-nowrap",r.source==="Pembelian"?"text-yellow-400":"text-green-400"])},n(r.order_no??"-"),3),t("td",{class:g(["p-3 text-center  font-semibold",r.source==="Pembelian"?"text-yellow-400":"text-green-400"])},n(r.vendor??"-"),3),t("td",{class:g(["p-3 text-center font-semibold whitespace-nowrap",r.source==="Pembelian"?"text-yellow-400":"text-green-400"])},n(r.transfer_no),3),t("td",{class:g(["p-3 text-center font-semibold",r.source==="Pembelian"?"text-yellow-400":"text-green-400"])},n(r.from_branch),3),t("td",{class:g(["p-3 text-center font-semibold",r.source==="Pembelian"?"text-yellow-400":"text-green-400"])},n(r.employee??"-"),3),t("td",Ee,n(r.received_at),1),t("td",Fe,[t("div",Me,[o.can_view?(i(),U(k(S),{key:0,href:a.route("good-receipts.show",r.id)},{default:P(()=>[s(E,{class:"text-blue-400"})]),_:1},8,["href"])):w("",!0),o.can_edit?(i(),U(k(S),{key:1,href:a.route("good-receipts.edit",r.id)},{default:P(()=>[s(F,{class:"text-yellow-500"})]),_:1},8,["href"])):w("",!0),o.can_delete?(i(),c("button",{key:2,type:"button",onClick:l=>L(r)},[s(M,{class:"text-red-500"})],8,He)):w("",!0)])])]))),128))])]),s(se,{pagination:o.goodReceipts,onPageChange:X,onPerPageChange:Z,class:"border-t"},null,8,["pagination"])]),s(le,{show:V.value,question:"Yakin ingin menghapus penerimaan barang",selected:`${v.value?.transfer_no||v.value?.order_no||"ini"}`,title:"Hapus Penerimaan Barang",confirmText:"Ya, Hapus!",maxWidth:"md",onClose:A,onConfirm:Q},null,8,["show","selected"])])])],64)}}});export{it as default};
