import{u as v,x as p,e as n,o as y,b,a as e,g as m,D as q,f as B,F as c,i as N,t as d,E as x,G as f,H as V}from"./app-CJkCV51W.js";import{_ as D}from"./Breadcrumb-BJQpsGcc.js";import O from"./Form0-BlxML1bH.js";import{_ as S}from"./AppLayout-BlEKf3Fz.js";import"./FlashMessage-D4C-FUm8.js";import"./LayoutShell-FWpWJLvi.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./useAuth-DvuTgkfF.js";import"./LayoutShell.vue_vue_type_style_index_0_lang-CRqqKi3W.js";const A={class:"flex overflow-hidden flex-col gap-3 px-3 h-full"},C={class:"flex justify-between items-center h-10"},F={class:"overflow-hidden rounded-lg border border-gray-200 bg-white p-6 dark:border-gray-700 dark:bg-white/[0.03]"},T={class:"overflow-hidden rounded-lg border border-gray-200 bg-white dark:border-gray-700 dark:bg-white/[0.03]"},U={class:"overflow-auto","data-simplebar":""},j={class:"min-w-full text-sm table-fixed"},E={class:"px-3 py-2"},I={class:"px-3 py-2 font-mono"},P={class:"px-3 py-2"},$={class:"px-3 py-2"},Q={class:"px-3 py-2"},G=["onUpdate:modelValue"],H={class:"px-3 py-2"},K=["onUpdate:modelValue"],L={key:0,class:"px-6 py-3 text-xs text-rose-600"},re=Object.assign({layout:S},{__name:"Create0",props:{departments:{type:Array,required:!0},employees:{type:Array,required:!0},statusOptions:{type:Array,required:!0},items:{type:Array,default:()=>[]}},setup(o){const u=o,h=[{label:"Dashboard",href:route("dashboard")},{label:"Permintaan Barang",href:route("material-requests.index")},{label:"Tambah"}],s=v({request_no:"",request_date:new Date().toISOString().slice(0,10),department_id:null,request_by:null,status:"on_progress",notes:"",items:[]}),l=p({}),i=p({});u.items.forEach(a=>{l[a.id]=0,i[a.id]=""});function k(){s.transform(a=>({...a,items:u.items.map(r=>({item_id:r.id,qty:Number(l[r.id]||0),notes:i[r.id]||""})).filter(r=>r.qty>0)})).post(route("material-requests.store"),{onFinish:()=>s.transform(a=>a)})}function _(){V.get(route("material-requests.index"))}return s.errors,(a,r)=>(y(),n(c,null,[b(m(q),{title:"Tambah Permintaan Barang"}),e("div",A,[e("div",C,[b(D,{items:h})]),e("div",F,[r[0]||(r[0]=e("h1",{class:"mb-4 text-lg font-semibold text-gray-700 dark:text-gray-200"}," Tambah Permintaan Barang ",-1)),b(O,{form:m(s),departments:o.departments,employees:o.employees,statusOptions:o.statusOptions,onSubmit:k,onCancel:_},null,8,["form","departments","employees","statusOptions"])]),e("div",T,[r[3]||(r[3]=e("div",{class:"flex items-center justify-between px-6 py-4 border-b border-gray-200 dark:border-gray-700"},[e("div",{class:"font-semibold text-gray-700 dark:text-gray-200"}," Daftar Item ")],-1)),e("div",U,[e("table",j,[r[1]||(r[1]=e("colgroup",null,[e("col",{style:{width:"60px"}}),e("col",{style:{width:"180px"}}),e("col"),e("col",{style:{width:"120px"}}),e("col",{style:{width:"100px"}}),e("col",{style:{width:"220px"}})],-1)),r[2]||(r[2]=e("thead",null,[e("tr",null,[e("th",{class:"py-2.5 bg-gray-100 border-y border-gray-200 dark:border-gray-600 dark:bg-gray-800"},[e("div",{class:"px-3 text-left font-medium text-gray-600 dark:text-gray-300"}," No ")]),e("th",{class:"py-2.5 bg-gray-100 border-y border-gray-200 dark:border-gray-600 dark:bg-gray-800"},[e("div",{class:"px-3 text-left font-medium text-gray-600 dark:text-gray-300"}," Kode ")]),e("th",{class:"py-2.5 bg-gray-100 border-y border-gray-200 dark:border-gray-600 dark:bg-gray-800"},[e("div",{class:"px-3 text-left font-medium text-gray-600 dark:text-gray-300"}," Nama Item ")]),e("th",{class:"py-2.5 bg-gray-100 border-y border-gray-200 dark:border-gray-600 dark:bg-gray-800"},[e("div",{class:"px-3 text-left font-medium text-gray-600 dark:text-gray-300"}," Satuan ")]),e("th",{class:"py-2.5 bg-gray-100 border-y border-gray-200 dark:border-gray-600 dark:bg-gray-800"},[e("div",{class:"px-3 text-left font-medium text-gray-600 dark:text-gray-300"}," Qty ")]),e("th",{class:"py-2.5 bg-gray-100 border-y border-gray-200 dark:border-gray-600 dark:bg-gray-800"},[e("div",{class:"px-3 text-left font-medium text-gray-600 dark:text-gray-300"}," Catatan ")])])],-1)),e("tbody",null,[(y(!0),n(c,null,N(o.items,(t,w)=>(y(),n("tr",{key:t.id,class:"border-b border-gray-200 dark:border-gray-700"},[e("td",E,d(w+1),1),e("td",I,d(t.code),1),e("td",P,d(t.name),1),e("td",$,d(t.unit),1),e("td",Q,[x(e("input",{type:"number",min:"0","onUpdate:modelValue":g=>l[t.id]=g,class:"w-24 h-10 rounded border-gray-300 dark:border-gray-700 dark:bg-gray-800 dark:text-white/90"},null,8,G),[[f,l[t.id],void 0,{number:!0}]])]),e("td",H,[x(e("input",{type:"text","onUpdate:modelValue":g=>i[t.id]=g,class:"w-full h-10 rounded border-gray-300 dark:border-gray-700 dark:bg-gray-800 dark:text-white/90"},null,8,K),[[f,i[t.id]]])])]))),128))])])]),m(s).errors.items?(y(),n("div",L,d(m(s).errors.items),1)):B("",!0)])])],64))}});export{re as default};
