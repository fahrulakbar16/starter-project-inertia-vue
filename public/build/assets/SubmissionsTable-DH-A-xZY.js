import{d as V,x as R,y,z as D,e as l,o,a as t,F as g,i as c,f as b,g as q,n as k,t as r,E as f,G as F,J as S,h as x,S as Q}from"./app-CJkCV51W.js";import{u as W}from"./useAuth-DvuTgkfF.js";const X={class:"w-full bg-white border border-gray-200 rounded-lg shadow-sm dark:bg-gray-800 dark:border-gray-700"},Y={class:"flex flex-wrap text-sm font-medium text-center text-gray-500 border-b border-gray-200 rounded-t-lg bg-white dark:border-gray-700 dark:text-gray-400 dark:bg-gray-800",id:"defaultTab","data-tabs-toggle":"#defaultTabContent",role:"tablist"},ee=["href"],te={class:"rounded-xl border border-gray-200 bg-white dark:border-gray-600 dark:bg-white/[0.03] p-4"},se={class:"overflow-x-auto"},ae={class:"min-w-full divide-y divide-gray-200"},ne={class:"bg-gray-50"},le={key:0,class:"px-4 py-3 text-xs font-semibold text-left text-gray-600 uppercase"},oe={key:1,class:"px-4 py-3 text-xs font-semibold text-left text-gray-600 uppercase"},re={class:"bg-gray-100"},ie={class:"px-4 py-2"},ue={class:"px-4 py-2"},de={class:"relative"},pe={class:"px-4 py-2"},ge=["value"],ce={class:"px-4 py-2"},me=["value"],ye={class:"px-4 py-2"},be=["value"],fe={class:"bg-white divide-y divide-gray-200"},xe={key:0},ve=["colspan"],he={class:"px-2 py-2 text-center align-middle"},ke={class:"px-3 py-3 align-middle"},Ce={class:"px-3 py-3 align-middle"},we={class:"px-3 py-3 align-middle"},Te={key:0,class:"px-3 py-3 align-middle"},_e={key:1,class:"px-3 py-3 align-middle"},Me={class:"px-3 py-3 align-middle"},Se={class:"px-3 py-3 align-middle"},je={class:"px-2 py-2 text-center align-middle"},Be=["onClick"],Pe={class:"flex items-center justify-between border-t border-gray-200 px-5 py-3"},Ve={class:"flex flex-col gap-1 items-start"},De={class:"flex items-center gap-2"},Fe=["value"],Le=["value"],ze={class:"text-sm text-gray-500 mt-1"},Ne={class:"font-medium"},Ae={class:"font-medium"},Ie={class:"font-medium"},Ue={class:"isolate inline-flex -space-x-px rounded-md","aria-label":"Pagination"},Ze=["disabled"],$e=["onClick"],He={key:1,class:"relative inline-flex items-center px-4 py-2 text-sm font-semibold text-gray-400"},Ee=["disabled"],Oe={__name:"SubmissionsTable",props:{submissions:Array,types:Object,currentType:String,branches:Array,submissionTypes:Array,submissionStatuses:Array},emits:["open-modal","filtered-data-updated"],setup(u,{emit:L}){const v=u,{can:z}=W(),j=L,d=V(10),i=V(1),N=[10,15,25,50,100],n=R({date:"",name:"",branch:"",type:"",status:""}),h=y(()=>{let a=[...v.submissions];return n.date&&(a=a.filter(e=>e.tanggal_pengajuan===n.date)),n.name&&(a=a.filter(e=>e.employee?.name?.toLowerCase().includes(n.name.toLowerCase()))),n.branch&&(a=a.filter(e=>e.branch?.id?.toString()===n.branch.toString()||e.employee?.branch_id?.toString()===n.branch.toString())),n.type&&(a=a.filter(e=>e.submission_type===n.type)),n.status&&(a=a.filter(e=>e.status===n.status)),a}),C=y(()=>Math.ceil(h.value.length/d.value)),w=y(()=>{const a=(i.value-1)*d.value,e=a+d.value;return h.value.slice(a,e)}),T=y(()=>{const a=h.value.length,e=a===0?0:(i.value-1)*d.value+1,s=Math.min(i.value*d.value,a);return{from:e,to:s,total:a}}),A=y(()=>{const a=[],e=C.value,s=i.value;if(e<=7)for(let p=1;p<=e;p++)a.push(p);else{a.push(1),s>4&&a.push("...");const p=Math.max(2,s-1),P=Math.min(e-1,s+1);for(let M=p;M<=P;M++)a.push(M);s<e-3&&a.push("..."),e>1&&a.push(e)}return a});function _(a){a>=1&&a<=C.value&&(i.value=a)}function I(a){d.value=parseInt(a.target.value),i.value=1}function m(){i.value=1}function U(){n.date="",n.name="",n.branch="",n.type="",n.status="",i.value=1}let B;function Z(){clearTimeout(B),B=setTimeout(()=>{m()},500)}function $(a){return{pending:"Menunggu",approved:"Disetujui",rejected:"Ditolak",cancelled:"Dibatalkan"}[a]||"Menunggu"}function H(a){return{pending:"bg-yellow-100 text-yellow-800",approved:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800",cancelled:"bg-gray-100 text-gray-800"}[a]||"bg-gray-100 text-gray-800"}function E(a){return{pending:"bg-yellow-500",approved:"bg-green-500",rejected:"bg-red-500",cancelled:"bg-gray-500"}[a]||"bg-gray-500"}function J(a){return{sick:"Sakit",overtime:"Lembur",employee:"Karyawan",debt:"Piutang",annual_leave:"Cuti Tahunan",other:"Lain-lain"}[a]||a||"-"}function K(a){return{sick:"sick",overtime:"overtime",employee:"employee",debt:"debt","annual-leave":"annual-leave",other:"other"}[a]||"sick"}function O(){let a=7;return v.currentType==="debt"&&(a+=2),a}function G(a){const e=K(a.submission_type);j("open-modal",a,e)}return D(()=>v.submissions,()=>{i.value=1},{deep:!0}),D(h,a=>{j("filtered-data-updated",a)},{deep:!0,immediate:!0}),(a,e)=>(o(),l("div",X,[t("ul",Y,[(o(!0),l(g,null,c(v.submissionTypes,s=>(o(),l("li",{class:"me-2",key:s.name},[q(z)(s.permission)?(o(),l("a",{key:0,href:`/${s.name}`,"aria-selected":"true",class:k(["inline-block p-4 rounded-ss-lg hover:bg-gray-100 dark:bg-gray-800 dark:hover:bg-gray-700",s.name===u.currentType?"text-blue-600 dark:text-blue-500 font-semibold border-b-2 border-blue-600":"text-gray-500 dark:text-gray-400"])},r(s.label),11,ee)):b("",!0)]))),128))]),t("div",te,[t("div",se,[t("table",ae,[t("thead",ne,[t("tr",null,[e[7]||(e[7]=t("th",{class:"px-4 py-3 text-xs font-semibold text-left text-gray-600 uppercase"}," No ",-1)),e[8]||(e[8]=t("th",{class:"px-4 py-3 text-xs font-semibold text-left text-gray-600 uppercase"}," Tanggal Pengajuan ",-1)),e[9]||(e[9]=t("th",{class:"px-4 py-3 text-xs font-semibold text-left text-gray-600 uppercase"}," Karyawan ",-1)),e[10]||(e[10]=t("th",{class:"px-4 py-3 text-xs font-semibold text-left text-gray-600 uppercase"}," Cabang ",-1)),u.currentType==="debt"?(o(),l("th",le," Tenor ")):b("",!0),u.currentType==="debt"?(o(),l("th",oe," Jumlah ")):b("",!0),e[11]||(e[11]=t("th",{class:"px-4 py-3 text-xs font-semibold text-left text-gray-600 uppercase"}," Tipe ",-1)),e[12]||(e[12]=t("th",{class:"px-4 py-3 text-xs font-semibold text-left text-gray-600 uppercase"}," Status ",-1)),e[13]||(e[13]=t("th",{class:"px-4 py-3 text-xs font-semibold text-center text-gray-600 uppercase"}," Aksi ",-1))]),t("tr",re,[e[19]||(e[19]=t("th",{class:"px-4 py-2"},null,-1)),t("th",ie,[f(t("input",{type:"date","onUpdate:modelValue":e[0]||(e[0]=s=>n.date=s),onChange:m,class:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Filter tanggal"},null,544),[[F,n.date]])]),t("th",ue,[t("div",de,[f(t("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=s=>n.name=s),onInput:Z,class:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 pr-8",placeholder:"Cari nama..."},null,544),[[F,n.name]]),e[14]||(e[14]=t("div",{class:"absolute inset-y-0 right-2 flex items-center pointer-events-none"},[t("svg",{class:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1))])]),t("th",pe,[f(t("select",{"onUpdate:modelValue":e[2]||(e[2]=s=>n.branch=s),onChange:m,class:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"},[e[15]||(e[15]=t("option",{value:""},"Semua Cabang",-1)),(o(!0),l(g,null,c(u.branches,s=>(o(),l("option",{key:s.id,value:s.id},r(s.name),9,ge))),128))],544),[[S,n.branch]])]),t("th",ce,[f(t("select",{"onUpdate:modelValue":e[3]||(e[3]=s=>n.type=s),onChange:m,class:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"},[e[16]||(e[16]=t("option",{value:""},"Semua Tipe",-1)),(o(!0),l(g,null,c(u.submissionTypes,s=>(o(),l("option",{key:s.value,value:s.value},r(s.label),9,me))),128))],544),[[S,n.type]])]),t("th",ye,[f(t("select",{"onUpdate:modelValue":e[4]||(e[4]=s=>n.status=s),onChange:m,class:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"},[e[17]||(e[17]=t("option",{value:""},"Semua Status",-1)),(o(!0),l(g,null,c(u.submissionStatuses,s=>(o(),l("option",{key:s.value,value:s.value},r(s.label),9,be))),128))],544),[[S,n.status]])]),t("th",{class:"px-4 py-2 text-center"},[t("button",{onClick:U,class:"px-3 py-1 text-sm bg-purple-600 text-white rounded hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-purple-500 flex items-center gap-1 mx-auto"},[...e[18]||(e[18]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1),x(" Clear ",-1)])])])])]),t("tbody",fe,[!w.value||w.value.length===0?(o(),l("tr",xe,[t("td",{colspan:O(),class:"px-4 py-12 text-center"},[...e[20]||(e[20]=[Q('<div class="flex flex-col items-center justify-center"><svg class="w-16 h-16 mb-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg><h3 class="mb-2 text-lg font-medium text-gray-900"> Tidak ada data </h3><p class="mb-4 text-sm text-gray-500"> Belum ada pengajuan yang tersedia. </p></div>',1)])],8,ve)])):(o(!0),l(g,{key:1},c(w.value,(s,p)=>(o(),l("tr",{key:s.id,class:"hover:bg-gray-50 transition"},[t("td",he,r(p+(i.value-1)*d.value+1),1),t("td",ke,r(s?.tanggal_pengajuan||"-"),1),t("td",Ce,r(s?.employee?.name||"-"),1),t("td",we,r(s?.branch?.name||s?.employee?.branch_name||"-"),1),u.currentType==="debt"?(o(),l("td",Te,r(s?.tenor??"-"),1)):b("",!0),u.currentType==="debt"?(o(),l("td",_e,r(Intl.NumberFormat("id-ID").format(Number(s?.amount??0))),1)):b("",!0),t("td",Me,r(J(s.submission_type)),1),t("td",Se,[t("div",{class:k(["flex gap-2 items-center px-3 py-1 rounded-full text-sm font-medium",H(s.status)])},[t("span",{class:k(["w-2 h-2 rounded-full",E(s.status)])},null,2),t("span",null,r($(s.status)),1)],2)]),t("td",je,[t("button",{onClick:P=>G(s),class:"inline-flex items-center gap-2 px-3 py-1 rounded-md border border-blue-100 bg-blue-50 hover:bg-blue-100 text-blue-700 text-sm font-medium transition"},[...e[21]||(e[21]=[t("svg",{class:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M11.9992 15.2094C13.77 15.2094 15.2055 13.7739 15.2055 12.0031C15.2055 10.2324 13.77 8.79688 11.9992 8.79688C10.2285 8.79688 8.79297 10.2324 8.79297 12.0031C8.79297 13.7739 10.2285 15.2094 11.9992 15.2094Z",fill:"#1B84FF"}),t("path",{opacity:"0.3",d:"M12 2.36719C6.67875 2.36719 0.75 7.56469 0.75 11.9972C0.75 16.2272 6.67875 21.6272 12 21.6272C17.625 21.6272 23.25 16.4634 23.25 11.9972C23.25 7.69969 17.3213 2.36719 12 2.36719ZM12 16.8909C11.0321 16.8909 10.086 16.6039 9.28118 16.0662C8.4764 15.5285 7.84916 14.7642 7.47876 13.8699C7.10837 12.9757 7.01146 11.9918 7.20028 11.0425C7.38911 10.0932 7.85519 9.22119 8.5396 8.53678C9.22401 7.85238 10.0961 7.3863 11.0453 7.19747C11.9946 7.00864 12.9785 7.10556 13.8728 7.47595C14.7671 7.84635 15.5313 8.47359 16.0691 9.27837C16.6068 10.0831 16.8938 11.0293 16.8938 11.9972C16.8938 13.2951 16.3782 14.5398 15.4604 15.4576C14.5426 16.3753 13.2979 16.8909 12 16.8909Z",fill:"#1B84FF"})],-1),t("span",null,"Lihat Detail",-1)])],8,Be)])]))),128))])]),t("div",Pe,[t("div",Ve,[t("div",De,[e[22]||(e[22]=t("label",{for:"per-page",class:"text-sm text-gray-500"},"Tampilkan:",-1)),t("select",{id:"per-page",value:d.value,onChange:I,class:"px-2 py-1 text-sm border border-gray-300 rounded-md bg-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},[(o(),l(g,null,c(N,s=>t("option",{key:s,value:s},r(s),9,Le)),64))],40,Fe),e[23]||(e[23]=t("span",{class:"text-sm text-gray-500"},"per halaman",-1))]),t("p",ze,[e[24]||(e[24]=x(" Menampilkan ",-1)),t("span",Ne,r(T.value.from),1),e[25]||(e[25]=x(" ke ",-1)),t("span",Ae,r(T.value.to),1),e[26]||(e[26]=x(" dari ",-1)),t("span",Ie,r(T.value.total),1),e[27]||(e[27]=x(" hasil ",-1))])]),t("div",null,[t("nav",Ue,[t("button",{onClick:e[5]||(e[5]=s=>_(i.value-1)),disabled:i.value<=1,class:"relative inline-flex items-center rounded-l-md px-2 py-2 text-gray-400 hover:bg-gray-50 focus:z-20 focus:outline-offset-0 disabled:opacity-50"},[...e[28]||(e[28]=[t("span",{class:"sr-only"},"Previous",-1),t("svg",{class:"size-5",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M11.78 5.22a.75.75 0 0 1 0 1.06L8.06 10l3.72 3.72a.75.75 0 1 1-1.06 1.06l-4.25-4.25a.75.75 0 0 1 0-1.06l4.25-4.25a.75.75 0 0 1 1.06 0Z"})],-1)])],8,Ze),(o(!0),l(g,null,c(A.value,s=>(o(),l(g,{key:s},[s!=="..."?(o(),l("button",{key:0,onClick:p=>_(s),class:k(["relative inline-flex items-center px-4 py-2 text-sm font-semibold focus:z-20",s===i.value?"bg-blue-500 text-white focus-visible:outline-indigo-500":"text-gray-500 hover:bg-gray-50"])},r(s),11,$e)):(o(),l("span",He," ... "))],64))),128)),t("button",{onClick:e[6]||(e[6]=s=>_(i.value+1)),disabled:i.value>=C.value,class:"relative inline-flex items-center rounded-r-md px-2 py-2 text-gray-400 hover:bg-gray-50 focus:z-20 focus:outline-offset-0 disabled:opacity-50"},[...e[29]||(e[29]=[t("span",{class:"sr-only"},"Next",-1),t("svg",{class:"size-5",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M8.22 5.22a.75.75 0 0 1 1.06 0l4.25 4.25a.75.75 0 0 1 0 1.06l-4.25 4.25a.75.75 0 0 1-1.06-1.06L11.94 10 8.22 6.28a.75.75 0 0 1 0-1.06Z"})],-1)])],8,Ee)])])])])])]))}};export{Oe as default};
