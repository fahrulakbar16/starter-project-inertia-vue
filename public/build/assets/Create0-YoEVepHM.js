import{d as N,y as D,e as a,o as d,b as c,a as e,g as U,D as C,E as n,G as u,J as B,F as p,i as x,t as i,f as O,H as q}from"./app-CJkCV51W.js";import{_ as S}from"./Breadcrumb-BJQpsGcc.js";import{_ as I}from"./AppLayout-BlEKf3Fz.js";import"./FlashMessage-D4C-FUm8.js";import"./LayoutShell-FWpWJLvi.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./useAuth-DvuTgkfF.js";import"./LayoutShell.vue_vue_type_style_index_0_lang-CRqqKi3W.js";const P={class:"flex overflow-hidden flex-col gap-3 px-3 h-full"},T={class:"flex justify-between items-center h-10"},F={class:"overflow-hidden rounded-lg border border-gray-200 bg-white p-6"},j={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},A=["value"],H=["value"],M={class:"mt-4"},R={class:"overflow-hidden rounded-lg border border-gray-200 bg-white"},$={class:"overflow-auto","data-simplebar":""},E={class:"min-w-full text-sm table-fixed"},G={class:"px-3 py-2"},J={class:"px-3 py-2"},K=["onUpdate:modelValue"],L={class:"px-3 py-2"},Q=["onUpdate:modelValue"],z={class:"px-3 py-2"},W=["onUpdate:modelValue"],X={class:"px-3 py-2"},Y={class:"px-3 py-2"},Z=["onClick"],ee={key:0},te={class:"px-3 py-3 font-medium"},ie=Object.assign({layout:I},{__name:"Create0",props:{autoNumber:{type:String,required:!0},vendors:{type:Array,required:!0},statusOptions:{type:Array,required:!0}},setup(m){const g=m,f=[{label:"Dashboard",href:route("dashboard")},{label:"Purchase Order",href:route("purchase-orders.index")},{label:"Buat"}],s=N({number:g.autoNumber,date:new Date().toISOString().slice(0,10),vendor_id:null,notes:"",status:"draft",items:[]}),v=D(()=>(s.value.items||[]).reduce((o,t)=>o+Number(t.qty||0)*Number(t.price||0),0));function h(){s.value.items.push({_key:crypto.randomUUID?.()||Math.random().toString(36).slice(2),name:"",qty:0,price:0})}function _(o){s.value.items.splice(o,1)}function w(){console.log("save draft",s.value)}function k(){console.log("send PO",s.value)}function V(){q.get(route("purchase-orders.index"))}function y(o){try{return new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",maximumFractionDigits:0}).format(o||0)}catch{return o}}return(o,t)=>(d(),a(p,null,[c(U(C),{title:"Buat Purchase Order"}),e("div",P,[e("div",T,[c(S,{items:f}),e("div",{class:"flex gap-2"},[e("button",{type:"button",class:"px-3 h-9 text-sm rounded border",onClick:V},"Batal"),e("button",{type:"button",class:"px-3 h-9 text-sm rounded bg-blue-600 text-white",onClick:w},"Simpan Draft"),e("button",{type:"button",class:"px-3 h-9 text-sm rounded bg-emerald-600 text-white",onClick:k},"Kirim")])]),e("div",F,[e("div",j,[e("div",null,[t[3]||(t[3]=e("label",{class:"block text-xs text-gray-500 mb-1"},"No. PO",-1)),e("input",{value:m.autoNumber,disabled:"",class:"w-full h-10 rounded border-gray-300 bg-gray-50 text-gray-700"},null,8,A)]),e("div",null,[t[4]||(t[4]=e("label",{class:"block text-xs text-gray-500 mb-1"},"Tanggal",-1)),n(e("input",{"onUpdate:modelValue":t[0]||(t[0]=r=>s.value.date=r),type:"date",class:"w-full h-10 rounded border-gray-300"},null,512),[[u,s.value.date]])]),e("div",null,[t[6]||(t[6]=e("label",{class:"block text-xs text-gray-500 mb-1"},"Vendor",-1)),n(e("select",{"onUpdate:modelValue":t[1]||(t[1]=r=>s.value.vendor_id=r),class:"w-full h-10 rounded border-gray-300"},[t[5]||(t[5]=e("option",{value:null},"Pilih Vendor",-1)),(d(!0),a(p,null,x(m.vendors,r=>(d(),a("option",{key:r.id,value:r.id},i(r.name),9,H))),128))],512),[[B,s.value.vendor_id]])])]),e("div",M,[t[7]||(t[7]=e("label",{class:"block text-xs text-gray-500 mb-1"},"Catatan",-1)),n(e("textarea",{"onUpdate:modelValue":t[2]||(t[2]=r=>s.value.notes=r),rows:"2",class:"w-full rounded border-gray-300"},null,512),[[u,s.value.notes]])])]),e("div",R,[e("div",{class:"flex items-center justify-between px-6 py-4 border-b border-gray-200"},[t[8]||(t[8]=e("div",{class:"font-semibold text-gray-700"},"Item PO",-1)),e("button",{type:"button",class:"px-3 h-9 text-sm rounded border",onClick:h},"Tambah Baris")]),e("div",$,[e("table",E,[t[12]||(t[12]=e("colgroup",null,[e("col",{style:{width:"60px"}}),e("col"),e("col",{style:{width:"120px"}}),e("col",{style:{width:"140px"}}),e("col",{style:{width:"160px"}}),e("col",{style:{width:"120px"}})],-1)),t[13]||(t[13]=e("thead",null,[e("tr",null,[e("th",{class:"py-2.5 bg-gray-100 border-y border-gray-200"},[e("div",{class:"px-3 text-left font-medium text-gray-600"},"No")]),e("th",{class:"py-2.5 bg-gray-100 border-y border-gray-200"},[e("div",{class:"px-3 text-left font-medium text-gray-600"},"Nama Item")]),e("th",{class:"py-2.5 bg-gray-100 border-y border-gray-200"},[e("div",{class:"px-3 text-left font-medium text-gray-600"},"Qty")]),e("th",{class:"py-2.5 bg-gray-100 border-y border-gray-200"},[e("div",{class:"px-3 text-left font-medium text-gray-600"},"Harga")]),e("th",{class:"py-2.5 bg-gray-100 border-y border-gray-200"},[e("div",{class:"px-3 text-left font-medium text-gray-600"},"Subtotal")]),e("th",{class:"py-2.5 bg-gray-100 border-y border-gray-200"},[e("div",{class:"px-3 text-left font-medium text-gray-600"},"Aksi")])])],-1)),e("tbody",null,[(d(!0),a(p,null,x(s.value.items,(r,b)=>(d(),a("tr",{key:r._key,class:"border-b border-gray-200"},[e("td",G,i(b+1),1),e("td",J,[n(e("input",{"onUpdate:modelValue":l=>r.name=l,type:"text",class:"w-full h-10 rounded border-gray-300",placeholder:"Nama item"},null,8,K),[[u,r.name]])]),e("td",L,[n(e("input",{"onUpdate:modelValue":l=>r.qty=l,type:"number",min:"0",class:"w-24 h-10 rounded border-gray-300"},null,8,Q),[[u,r.qty,void 0,{number:!0}]])]),e("td",z,[n(e("input",{"onUpdate:modelValue":l=>r.price=l,type:"number",min:"0",class:"w-32 h-10 rounded border-gray-300"},null,8,W),[[u,r.price,void 0,{number:!0}]])]),e("td",X,i(y(r.qty*r.price)),1),e("td",Y,[e("button",{class:"px-2 py-1 text-xs rounded border",onClick:l=>_(b)},"Hapus",8,Z)])]))),128)),s.value.items.length?O("",!0):(d(),a("tr",ee,[...t[9]||(t[9]=[e("td",{colspan:"6",class:"py-6 text-center text-gray-500"},"Belum ada item",-1)])]))]),e("tfoot",null,[e("tr",null,[t[10]||(t[10]=e("td",{colspan:"4",class:"px-3 py-3 text-right font-medium"},"Total",-1)),e("td",te,i(y(v.value)),1),t[11]||(t[11]=e("td",null,null,-1))])])])])])])],64))}});export{ie as default};
