import{y,d as x,e as n,o as i,b as k,a as t,g as L,D as O,w as T,h as A,P as B,t as r,f as E,E as b,V as N,G as j,F as f,i as _,J as K}from"./app-CJkCV51W.js";import{_ as M}from"./AppLayout-BlEKf3Fz.js";import{_ as R}from"./Breadcrumb-BJQpsGcc.js";import"./FlashMessage-D4C-FUm8.js";import"./LayoutShell-FWpWJLvi.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./useAuth-DvuTgkfF.js";import"./LayoutShell.vue_vue_type_style_index_0_lang-CRqqKi3W.js";const P={class:"flex overflow-hidden flex-col gap-3 px-3 h-full"},F={class:"flex justify-between items-center h-10"},J={class:"bg-white rounded-lg border border-gray-200"},Q={class:"p-6"},q={class:"grid grid-cols-1 gap-4 md:grid-cols-2"},G={class:"text-gray-800"},H={class:"text-gray-800"},I={class:"text-gray-800"},W={class:"text-gray-800"},Y={class:"text-gray-800"},z={class:"text-gray-800"},X={class:"md:col-span-2"},Z={class:"text-gray-800"},tt={class:"bg-white rounded-lg border border-gray-200"},et={class:"p-4 space-y-3"},st={class:"flex flex-col gap-2 md:flex-row md:items-center md:justify-between"},at={class:"flex gap-2 items-center"},rt=["value"],ot={class:"overflow-auto","data-simplebar":""},lt={class:"min-w-full text-sm"},nt={class:"p-3 text-center"},it={class:"p-3"},dt={class:"p-3"},ct={class:"p-3"},ut={key:1},gt={class:"p-4 space-y-3"},yt={class:"flex gap-2 items-center"},bt={class:"overflow-auto","data-simplebar":""},mt={class:"min-w-full text-sm"},pt={class:"p-3 text-center"},vt={class:"p-3"},xt={class:"p-3"},ft={class:"p-3"},ht={class:"p-3"},kt={key:1},_t={components:{InfoRow:{props:{label:String,value:[String,Number,null]},template:`
            <div>
              <label class='block mb-1 text-sm text-gray-600'>{{ label }}</label>
              <div class='p-2 min-h-[40px] rounded border bg-gray-50 text-gray-800'>{{ value ?? '-' }}</div>
            </div>`}}},Vt=Object.assign(_t,{layout:M},{__name:"Show",props:{checklist:Object,general:Object,questions:{type:Array,default:()=>[]},activities:{type:Array,default:()=>[]},approvals:{type:Array,default:()=>[]}},setup(l){const d=l,D=[{label:"Menu Utama"},{label:`${d.general?.inspection_number||d.inspection?.id}`}];y(()=>{const a={};return(d.questions||[]).forEach(e=>{const s=e.category||"Umum";a[s]||(a[s]=[]),a[s].push(e)}),Object.entries(a).map(([e,s])=>({category:e,items:s}))});const w=y(()=>(d.questions||[]).map(a=>({title:a.title,category:a.category,answer:a.answer}))),m=x(""),p=x(""),U=y(()=>{const a=new Set((w.value||[]).map(e=>e.category).filter(Boolean));return Array.from(a).sort()}),h=y(()=>{let a=w.value||[];if(p.value&&(a=a.filter(e=>(e.category||"")===p.value)),m.value){const e=m.value.toLowerCase();a=a.filter(s=>String(s.title).toLowerCase().includes(e)||String(s.answer??"").toLowerCase().includes(e))}return a}),v=x(""),S=y(()=>{let a=(d.activities||[]).slice();if(v.value){const e=v.value.toLowerCase();a=a.filter(s=>String(s.action||"").toLowerCase().includes(e)||String(s.by||"").toLowerCase().includes(e)||String(s.notes||"").toLowerCase().includes(e))}return a});function V(){const a=[["No","Pertanyaan","Kategori","Jawaban"]];(h.value||[]).forEach((c,g)=>{a.push([String(g+1),String(c.title||""),String(c.category||""),String(c.answer??"")])});const e=a.map(c=>c.map(g=>'"'+String(g).replace(/"/g,'""')+'"').join(",")).join(`
`),s=new Blob([e],{type:"text/csv;charset=utf-8;"}),o=URL.createObjectURL(s),u=document.createElement("a");u.href=o,u.download=`inspection_${d.general?.inspection_number||d.inspection?.id}_questions.csv`,u.click(),URL.revokeObjectURL(o)}const C=x("questions");function $(a){if(!a)return"-";const e=new Date(a);if(isNaN(e.getTime()))return String(a);const s=e.getFullYear(),o=String(e.getMonth()+1).padStart(2,"0"),u=String(e.getDate()).padStart(2,"0"),c=String(e.getHours()).padStart(2,"0"),g=String(e.getMinutes()).padStart(2,"0");return`${s}-${o}-${u} ${c}.${g}`}return(a,e)=>(i(),n(f,null,[k(L(O),{title:"Detail Checklist"}),t("div",P,[t("div",F,[k(R,{items:D}),k(L(B),{href:a.route("checklists.index"),class:"px-3 py-2 text-sm text-gray-700 rounded border"},{default:T(()=>[...e[3]||(e[3]=[A("Kembali",-1)])]),_:1},8,["href"])]),t("div",J,[e[11]||(e[11]=t("div",{class:"px-6 py-4 border-b"},[t("h2",{class:"text-xl font-semibold text-gray-800"}," Detail Checklist ")],-1)),t("div",Q,[t("div",q,[t("div",null,[e[4]||(e[4]=t("label",{class:"block mb-1 text-sm text-gray-600"},"Checklist",-1)),t("h3",G,r(l.general.checklist_name??"-"),1)]),t("div",null,[e[5]||(e[5]=t("label",{class:"block mb-1 text-sm text-gray-600"},"Nomor SOP",-1)),t("h3",H,r(l.general.sop_code??l.general.inspection_number??"-"),1)]),t("div",null,[e[6]||(e[6]=t("label",{class:"block mb-1 text-sm text-gray-600"},"Kategori Checklist",-1)),t("h3",I,r(l.general.category??"-"),1)]),t("div",null,[e[7]||(e[7]=t("label",{class:"block mb-1 text-sm text-gray-600"},"Departemen",-1)),t("h3",W,r(l.general.department??"-"),1)]),t("div",null,[e[8]||(e[8]=t("label",{class:"block mb-1 text-sm text-gray-600"},"Cabang",-1)),t("h3",Y,r(l.general.branch??"-"),1)]),t("div",null,[e[9]||(e[9]=t("label",{class:"block mb-1 text-sm text-gray-600"},"Status",-1)),t("h3",z,r(l.general.status??"-"),1)]),t("div",X,[e[10]||(e[10]=t("label",{class:"block mb-1 text-sm text-gray-600"},"Deskripsi",-1)),t("h3",Z,r(l.general.remarks||"-"),1)])])])]),t("div",tt,[E("",!0),b(t("div",et,[t("div",st,[t("div",at,[b(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>m.value=s),type:"text",placeholder:"Cari pertanyaan...",class:"px-3 w-64 h-9 text-sm rounded border border-gray-300 focus:border-sky-400 focus:ring-sky-200"},null,512),[[j,m.value]]),b(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>p.value=s),class:"px-2 h-9 text-sm rounded border border-gray-300 focus:border-sky-400 focus:ring-sky-200"},[e[12]||(e[12]=t("option",{value:""},"Semua Kategori",-1)),(i(!0),n(f,null,_(U.value,s=>(i(),n("option",{key:s,value:s},r(s),9,rt))),128))],512),[[K,p.value]])]),t("div",{class:"flex gap-2 items-center"},[t("button",{type:"button",onClick:V,class:"px-3 py-2 text-sm bg-white rounded border hover:bg-gray-50"}," Unduh CSV ")])]),t("div",ot,[t("table",lt,[e[14]||(e[14]=t("thead",null,[t("tr",null,[t("th",{class:"sticky top-0 p-3 bg-gray-100 border-gray-200 border-y"},[t("div",{class:"font-medium text-center text-gray-600"}," No ")]),t("th",{class:"sticky top-0 p-3 bg-gray-100 border border-gray-200"},[t("div",{class:"font-medium text-left text-gray-600"}," Pertanyaan ")]),t("th",{class:"sticky top-0 p-3 bg-gray-100 border border-gray-200"},[t("div",{class:"font-medium text-left text-gray-600"}," Kategori ")]),t("th",{class:"sticky top-0 p-3 bg-gray-100 border border-gray-200"},[t("div",{class:"font-medium text-left text-gray-600"}," Jawaban ")])])],-1)),t("tbody",null,[h.value.length?(i(!0),n(f,{key:0},_(h.value,(s,o)=>(i(),n("tr",{key:o,class:"border-b border-gray-200"},[t("td",nt,r(o+1),1),t("td",it,r(s.title),1),t("td",dt,r(s.category||"-"),1),t("td",ct,r(s.answer??"-"),1)]))),128)):(i(),n("tr",ut,[...e[13]||(e[13]=[t("td",{colspan:"4",class:"py-6 text-center text-gray-500"}," Tidak ada pertanyaan ",-1)])]))])])])],512),[[N,C.value==="questions"]]),b(t("div",gt,[t("div",yt,[b(t("input",{"onUpdate:modelValue":e[2]||(e[2]=s=>v.value=s),type:"text",placeholder:"Cari aktivitas/oleh/catatan...",class:"px-3 w-72 h-9 text-sm rounded border border-gray-300 focus:border-sky-400 focus:ring-sky-200"},null,512),[[j,v.value]])]),t("div",bt,[t("table",mt,[e[16]||(e[16]=t("thead",null,[t("tr",null,[t("th",{class:"sticky top-0 p-3 bg-gray-100 border-gray-200 border-y"},[t("div",{class:"font-medium text-center text-gray-600"}," No ")]),t("th",{class:"sticky top-0 p-3 bg-gray-100 border border-gray-200"},[t("div",{class:"font-medium text-left text-gray-600"}," Waktu ")]),t("th",{class:"sticky top-0 p-3 bg-gray-100 border border-gray-200"},[t("div",{class:"font-medium text-left text-gray-600"}," Aktivitas ")]),t("th",{class:"sticky top-0 p-3 bg-gray-100 border border-gray-200"},[t("div",{class:"font-medium text-left text-gray-600"}," Oleh ")]),t("th",{class:"sticky top-0 p-3 bg-gray-100 border border-gray-200"},[t("div",{class:"font-medium text-left text-gray-600"}," Catatan ")])])],-1)),t("tbody",null,[S.value.length?(i(!0),n(f,{key:0},_(S.value,(s,o)=>(i(),n("tr",{key:o,class:"border-b border-gray-200"},[t("td",pt,r(o+1),1),t("td",vt,r($(s.at)),1),t("td",xt,r(s.action),1),t("td",ft,r(s.by||"-"),1),t("td",ht,r(s.notes||"-"),1)]))),128)):(i(),n("tr",kt,[...e[15]||(e[15]=[t("td",{colspan:"5",class:"py-6 text-center text-gray-500"}," Tidak ada aktivitas ",-1)])]))])])])],512),[[N,C.value==="activities"]])])])],64))}});export{Vt as default};
