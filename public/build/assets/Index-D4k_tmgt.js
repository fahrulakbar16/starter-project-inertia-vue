import{d as C,y as P,z as $,U as ne,e as y,o as d,b as i,a as e,g as s,D as de,c as D,f,w as _,h as m,P as S,E as B,J as M,G as U,t as n,n as V,F as T,i as G,H as O}from"./app-CJkCV51W.js";import{_ as le}from"./Pagination-C2dOEo8X.js";import{_ as ie}from"./Breadcrumb-BJQpsGcc.js";import{_ as ue}from"./ConfirmModal-DAlWp-FQ.js";import{_ as H}from"./SelectPemakaian-bo5sz744.js";import{P as ge}from"./PlusSquareIcon-DA_kLpvy.js";import{S as R}from"./ShowIcon-CiA5nZAB.js";import{E as z}from"./EditIcon-B9T5EQzJ.js";import{T as W}from"./TrashIcon-DSAHmBPH.js";import{_ as ce}from"./AppLayout-BlEKf3Fz.js";import{u as ye}from"./useAuth-DvuTgkfF.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./FlashMessage-D4C-FUm8.js";import"./LayoutShell-FWpWJLvi.js";import"./LayoutShell.vue_vue_type_style_index_0_lang-CRqqKi3W.js";const fe={class:"flex flex-col h-full gap-3 px-3 overflow-hidden"},be={class:"flex items-center justify-between h-10"},pe={class:"flex flex-col overflow-hidden rounded-lg border border-gray-200 bg-white dark:border-gray-600 dark:bg-white/[0.03]"},me={class:"flex flex-col h-16 gap-2 px-8 sm:flex-row sm:items-center sm:justify-between"},xe={class:"flex items-center gap-3"},ve={class:"overflow-auto overflow-x-auto","data-simplebar":""},_e={class:"min-w-full text-sm table-fixed"},he={class:"py-2.5 bg-gray-100 border-gray-200 border-y dark:border-gray-600 dark:bg-gray-800"},ke={class:"py-2.5 bg-gray-100 border-gray-200 border-y dark:border-gray-600 dark:bg-gray-800"},we={class:"py-2.5 bg-gray-100 border-gray-200 border-y dark:border-gray-600 dark:bg-gray-800"},Ce={class:"py-2.5 bg-gray-100 border-gray-200 border-y dark:border-gray-600 dark:bg-gray-800"},De={class:"py-2.5 bg-gray-100 border-gray-200 border-y dark:border-gray-600 dark:bg-gray-800"},Se={key:0,class:"py-2.5 bg-gray-100 border-gray-200 border-y dark:border-gray-600 dark:bg-gray-800"},Be={colspan:"2",class:"p-2 border-gray-200 bg-gray-50 border-y dark:border-gray-600 dark:bg-gray-900"},Te={class:"relative space-x-4"},Pe={colspan:"2",class:"px-2 text-center border border-gray-200 bg-gray-50 dark:border-gray-600 dark:bg-gray-900"},$e={class:"flex items-center justify-center gap-2"},Ve={class:"p-2 border border-gray-200 bg-gray-50 dark:border-gray-600 dark:bg-gray-900"},qe={class:"grid grid-cols-2 gap-2"},je={class:"px-6 py-2 border border-gray-200 bg-gray-50 dark:border-gray-600 dark:bg-gray-900"},Ie={key:0},Ue={key:0},Ge={colspan:10,class:"px-4 py-2 font-semibold text-gray-600 bg-gray-50 dark:bg-gray-900/40 dark:text-gray-300"},Oe=["onClick"],Ae={class:"text-xs"},Ke={class:"ml-1 text-xs font-medium text-gray-500"},Ne={class:"px-3 py-3 text-center"},Fe={class:"px-3 py-3 font-mono text-center"},Le={colspan:"2",class:"px-3 py-3 font-mono text-center"},Ee={class:"flex items-center justify-between gap-3 whitespace-nowrap"},Me={class:"font-semibold text-red-500"},He={class:"font-semibold text-green-500"},Re={class:"px-3 py-3 text-center"},ze={class:"px-3 py-3 text-center"},We={class:"px-3 py-3 text-center"},Ye={class:"px-3 py-3 text-center"},Je={key:0,class:"px-6 py-3"},Qe={class:"flex items-center justify-center gap-2"},Xe=["onClick"],Ze={class:"p-3 text-center"},et={class:"p-3 text-center"},tt={colspan:"2",class:"p-3 font-mono text-center"},rt={class:"flex items-center justify-between gap-3 whitespace-nowrap"},at={class:"font-semibold text-red-500"},st={class:"font-semibold text-green-500"},ot={class:"p-3 text-center"},nt={class:"p-3 text-center"},dt={class:"p-3 text-center"},lt={class:"p-3 text-center"},it={key:0,class:"px-6 py-3"},ut={class:"flex items-center justify-center gap-2"},gt=["onClick"],ct={components:{SortIcon:{props:{active:Boolean,direction:String},template:`
                <span class="inline-block ml-2 text-xs">
                    <template v-if="active">
                        {{ direction === 'asc' ? 'â–²' : 'â–¼' }}
                    </template>
                    <template v-else>
                        â‡…
                    </template>
                </span>
            `}}},Pt=Object.assign(ct,{layout:ce},{__name:"Index",props:{goodTransfers:{type:Object,required:!0},branches:{type:Array,required:!0},filters:{type:Object,default:()=>({})},sortBy:{type:String,default:"transferred_at"},sortDirection:{type:String,default:"desc"},groupBy:{type:String,default:null},branch_to:{type:Array,required:!0},employees:{type:Array,required:!0}},setup(l){const{can:g}=ye(),u=l,Y=[{label:"Penyimpanan"},{label:"Perpindahan Barang"}],o=C({q:u.filters.q??"",from_branch:u.filters.from_branch??null,to_branch:u.filters.to_branch??null,date_from:u.filters.date_from??"",date_to:u.filters.date_to??"",status:u.filters.status??""}),b=C(u.groupBy??"all"),h=P(()=>b.value||(u.groupBy??"all")),A=P(()=>!!h.value),J=P(()=>[{id:null,name:"Semua"},...u.branches]),q=C(!1),k=C(null),j=C(new Set),Q=P(()=>{if(!A.value)return{};const r=u.goodTransfers.data||[],t={};for(const p of r){const a=X(p);t[a]||(t[a]=[]),t[a].push(p)}return t});function X(r){switch(h.value){case"from_branch":return r.from_branch?.name??"Dari Cabang";case"to_branch":return r.to_branch?.name??"Ke Cabang";case"transferred_at":return r.transferred_at??"Tanggal Pengiriman";case"status":return I(r.status);default:return"ungrouped"}}function Z(r){switch(h.value){case"from_branch":return`Dari Cabang: ${r}`;case"to_branch":return`Ke Cabang: ${r}`;case"transferred_at":return`Dikirim Tanggal: ${r}`;case"status":return`Status: ${r}`;default:return r}}function K(r){return j.value.has(r)}function ee(r){const t=new Set(j.value);t.has(r)?t.delete(r):t.add(r),j.value=t}function x({sortBy:r=u.sortBy,sortDirection:t=u.sortDirection}={}){O.get(route("good-transfers.index"),{...o.value,groupBy:h.value||null,sortBy:r,sortDirection:t},{preserveScroll:!0,preserveState:!0,replace:!0,onStart:()=>{typeof window<"u"&&(window.__suppressProgress=!0)},onFinish:()=>{typeof window<"u"&&(window.__suppressProgress=!1)}})}let N;$(()=>o.value.q,()=>{clearTimeout(N),N=setTimeout(()=>x({}),400)}),$(()=>[o.value.from_branch,o.value.to_branch,o.value.status,o.value.date_from,o.value.date_to],()=>{x({})}),$(b,()=>{x({})}),$(()=>u.groupBy,r=>{!b.value&&r&&(b.value=r)});function w(r){const t=u.sortBy===r&&u.sortDirection==="asc"?"desc":"asc";x({sortBy:r,sortDirection:t})}function te(){o.value={q:"",from_branch:null,to_branch:null,date_from:"",date_to:"",status:""},b.value="",x({})}function I(r){return{Shipped:"Dikirim",Received:"Diterima",Canceled:"Dibatalkan"}[r]??r}function F(r){return{Shipped:"bg-yellow-100 text-yellow-800 dark:bg-yellow-500/20 dark:text-yellow-300",Received:"bg-emerald-100 text-emerald-800 dark:bg-emerald-500/20 dark:text-emerald-300",Canceled:"bg-rose-100 text-rose-800 dark:bg-rose-500/20 dark:text-rose-300"}[r]??"bg-gray-100 text-gray-700"}function L(r){r?.id&&(k.value=r,q.value=!0)}function E(){q.value=!1,k.value=null}function re(){k.value?.id&&O.delete(route("good-transfers.destroy",k.value.id),{preserveScroll:!0,onSuccess:()=>{E(),x({})}})}function ae(r){x({})}function se(r){O.get(route("good-transfers.index"),{...o.value,groupBy:h.value||null,sortBy:u.sortBy,sortDirection:u.sortDirection,per_page:r},{preserveScroll:!0,preserveState:!0,replace:!0,onStart:()=>{typeof window<"u"&&(window.__suppressProgress=!0)},onFinish:()=>{typeof window<"u"&&(window.__suppressProgress=!1)}})}return(r,t)=>{const p=ne("SortIcon");return d(),y(T,null,[i(s(de),{title:"Perpindahan Barang"}),e("div",fe,[e("div",be,[i(ie,{items:Y}),e("div",null,[s(g)("good_transfers.create")?(d(),D(s(S),{key:0,href:r.route("good-transfers.create"),class:"inline-flex items-center gap-2 text-white rounded-md border hover:border-gray-300 bg-blue-500 px-3 py-2 text-sm font-medium hover:text-blue-500 hover:bg-gray-50 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-400 dark:hover:bg-white/[0.03] dark:hover:text-gray-200"},{default:_(()=>[i(ge),t[12]||(t[12]=m(" Pindahkan Barang ",-1))]),_:1},8,["href"])):f("",!0)])]),e("div",pe,[e("div",me,[t[14]||(t[14]=e("div",{class:"font-bold text-gray-700 md:text-xl dark:text-gray-300"}," Daftar Perpindahan Barang ",-1)),e("div",xe,[B(e("select",{"onUpdate:modelValue":t[0]||(t[0]=a=>b.value=a),class:"h-10 px-3 text-sm text-gray-800 bg-transparent border border-gray-200 rounded-lg dark:border-gray-700 dark:bg-gray-800 dark:text-white/90"},[...t[13]||(t[13]=[e("option",{value:"all"},"Kelompokan Berdasarkan",-1),e("option",{value:"transferred_at"},"Group: Tanggal Kirim",-1),e("option",{value:"status"},"Group: Status",-1)])],512),[[M,b.value]])])]),e("div",ve,[e("table",_e,[e("thead",null,[e("tr",null,[t[21]||(t[21]=e("th",{class:"py-2.5 bg-gray-100 border-gray-200 border-y dark:border-gray-600 dark:bg-gray-800"},[e("div",{class:"px-3 font-medium text-gray-600 dark:text-gray-300"},"No.")],-1)),e("th",he,[e("button",{onClick:t[1]||(t[1]=a=>w("transfer_no")),class:"w-full px-3 font-medium text-center text-gray-600 dark:text-gray-300"},[t[15]||(t[15]=m(" No. Transfer ",-1)),i(p,{active:l.sortBy==="transfer_no",direction:l.sortDirection},null,8,["active","direction"])])]),t[22]||(t[22]=e("th",{colspan:"1",class:"py-2.5 bg-gray-100 border-gray-200 border-y dark:border-gray-600 dark:bg-gray-800"},[e("div",{class:"px-3 font-medium text-center text-gray-600 dark:text-gray-300"},"Dari Cabang")],-1)),t[23]||(t[23]=e("th",{colspan:"1",class:"py-2.5 bg-gray-100 border-gray-200 border-y dark:border-gray-600 dark:bg-gray-800"},[e("div",{class:"px-3 font-medium text-center text-gray-600 dark:text-gray-300"},"Ke Cabang")],-1)),e("th",ke,[e("button",{onClick:t[2]||(t[2]=a=>w("transfer_date")),class:"w-full px-3 font-medium text-gray-600 dark:text-gray-300"},[t[16]||(t[16]=m(" Tanggal Transfer ",-1)),i(p,{active:l.sortBy==="transfer_date",direction:l.sortDirection},null,8,["active","direction"])])]),e("th",we,[e("button",{onClick:t[3]||(t[3]=a=>w("status")),class:"w-full px-3 font-medium text-gray-600 dark:text-gray-300"},[t[17]||(t[17]=m(" Status ",-1)),i(p,{active:l.sortBy==="status",direction:l.sortDirection},null,8,["active","direction"])])]),e("th",Ce,[e("button",{onClick:t[4]||(t[4]=a=>w("send_by")),class:"w-full px-3 font-medium text-gray-600 dark:text-gray-300"},[t[18]||(t[18]=m(" Dikirim Oleh ",-1)),i(p,{active:l.sortBy==="send_by",direction:l.sortDirection},null,8,["active","direction"])])]),e("th",De,[e("button",{onClick:t[5]||(t[5]=a=>w("received_by")),class:"w-full px-3 font-medium text-gray-600 dark:text-gray-300"},[t[19]||(t[19]=m(" Diterima Oleh ",-1)),i(p,{active:l.sortBy==="received_by",direction:l.sortDirection},null,8,["active","direction"])])]),s(g)("good_transfers.view")||s(g)("good_transfers.edit")||s(g)("good_transfers.delete")?(d(),y("th",Se,[...t[20]||(t[20]=[e("div",{class:"px-3 font-medium text-gray-600 dark:text-gray-300"}," Aksi ",-1)])])):f("",!0)]),e("tr",null,[e("th",Be,[e("div",Te,[B(e("input",{"onUpdate:modelValue":t[6]||(t[6]=a=>o.value.q=a),type:"text",placeholder:"Cari nomor transfer",class:"rounded-lg border border-gray-200 bg-transparent py-2.5 pl-4 pr-12 text-sm text-gray-800 focus:border-blue-300 focus:outline-hidden focus:ring-2 focus:ring-blue-500/20"},null,512),[[U,o.value.q]]),t[24]||(t[24]=e("span",{class:"absolute text-gray-400 -translate-y-1/2 right-4 top-1/2"},"ðŸ”",-1))])]),e("th",Pe,[e("div",$e,[i(H,{modelValue:o.value.from_branch,"onUpdate:modelValue":t[7]||(t[7]=a=>o.value.from_branch=a),items:J.value,label:"Dari Cabang",class:V("w-40 text-xs sm:text-sm")},{item:_(({item:a})=>[e("span",null,n(a.name),1)]),_:1},8,["modelValue","items"]),i(H,{modelValue:o.value.to_branch,"onUpdate:modelValue":t[8]||(t[8]=a=>o.value.to_branch=a),items:l.branch_to,label:"Ke Cabang",class:V("w-40 text-xs sm:text-sm")},{item:_(({item:a})=>[e("span",null,n(a.name),1)]),_:1},8,["modelValue","items"])])]),e("th",Ve,[e("div",qe,[B(e("input",{"onUpdate:modelValue":t[9]||(t[9]=a=>o.value.date_from=a),type:"date",class:"h-10 px-2 text-xs border-gray-300 rounded sm:text-sm dark:border-gray-700 dark:bg-gray-800 dark:text-white/90"},null,512),[[U,o.value.date_from]]),B(e("input",{"onUpdate:modelValue":t[10]||(t[10]=a=>o.value.date_to=a),type:"date",class:"h-10 px-2 text-xs border-gray-300 rounded sm:text-sm dark:border-gray-700 dark:bg-gray-800 dark:text-white/90"},null,512),[[U,o.value.date_to]])])]),e("th",je,[B(e("select",{"onUpdate:modelValue":t[11]||(t[11]=a=>o.value.status=a),class:"h-10 px-3 text-xs border-gray-300 rounded w-36 sm:text-sm dark:border-gray-700 dark:bg-gray-800 dark:text-white/90"},[...t[25]||(t[25]=[e("option",{value:""},"Semua",-1),e("option",{value:"Shipped"},"Dikirim",-1),e("option",{value:"Received"},"Diterima",-1),e("option",{value:"Canceled"},"Dibatalkan",-1)])],512),[[M,o.value.status]])]),t[26]||(t[26]=e("th",{class:"px-2 py-2 border-gray-200 bg-gray-50 border-y dark:border-gray-600 dark:bg-gray-900"},[e("div",{class:"flex items-center h-10 px-3 text-xs text-gray-500"},"-")],-1)),t[27]||(t[27]=e("th",{class:"px-2 py-2 border-gray-200 bg-gray-50 border-y dark:border-gray-600 dark:bg-gray-900"},[e("div",{class:"flex items-center h-10 px-3 text-xs text-gray-500"},"-")],-1)),e("th",{class:"px-2 py-2 border-gray-200 bg-gray-50 border-y dark:border-gray-600 dark:bg-gray-900"},[e("button",{onClick:te,class:"px-3 py-2 text-xs text-white bg-red-500 rounded hover:bg-red-600"}," Clear ")])])]),e("tbody",null,[!l.goodTransfers.data||l.goodTransfers.data.length===0?(d(),y("tr",Ie,[...t[28]||(t[28]=[e("td",{colspan:"10",class:"py-8 text-center text-gray-500"}," Tidak ada pemindahan barang. ",-1)])])):A.value?(d(!0),y(T,{key:1},G(Q.value,(a,v)=>(d(),y(T,{key:v},[b.value!="all"?(d(),y("tr",Ue,[e("td",Ge,[e("button",{class:"inline-flex items-center gap-2",onClick:c=>ee(v)},[e("span",Ae,n(K(v)?"â–¶":"â–¼"),1),e("span",null,n(Z(v)),1),e("span",Ke,"("+n(a.length)+")",1)],8,Oe)])])):f("",!0),K(v)?f("",!0):(d(!0),y(T,{key:1},G(a,(c,oe)=>(d(),y("tr",{key:c.id,class:"border-b border-gray-200 dark:border-gray-700"},[e("td",Ne,n(oe+1)+".",1),e("td",Fe,n(c.transfer_no),1),e("td",Le,[e("div",Ee,[e("span",Me,n(c.from_branch),1),t[29]||(t[29]=m(" âž¡ ",-1)),e("span",He,n(c.to_branch),1)])]),e("td",Re,n(c.transferred_at),1),e("td",ze,[e("span",{class:V([F(c.status),"px-2.5 py-1 text-xs font-medium rounded-full"])},n(I(c.status)),3)]),e("td",We,n(c.sent_by||"-"),1),e("td",Ye,n(c.received_by||"-"),1),s(g)("good_transfers.view")||s(g)("good_transfers.edit")||s(g)("good_transfers.delete")?(d(),y("td",Je,[e("div",Qe,[s(g)("good_transfers.view")?(d(),D(s(S),{key:0,href:r.route("good-transfers.show",c.id)},{default:_(()=>[i(R,{class:"text-blue-400"})]),_:1},8,["href"])):f("",!0),s(g)("good_transfers.edit")?(d(),D(s(S),{key:1,href:r.route("good-transfers.edit",c.id)},{default:_(()=>[i(z,{class:"text-yellow-500"})]),_:1},8,["href"])):f("",!0),s(g)("good_transfers.delete")?(d(),y("button",{key:2,type:"button",onClick:yt=>L(c)},[i(W,{class:"text-red-500"})],8,Xe)):f("",!0)])])):f("",!0)]))),128))],64))),128)):(d(!0),y(T,{key:2},G(l.goodTransfers.data,(a,v)=>(d(),y("tr",{key:a.id,class:"border-b border-gray-200 dark:border-gray-700"},[e("td",Ze,n(v+(l.goodTransfers.current_page-1)*l.goodTransfers.per_page+1)+".",1),e("td",et,n(a.transfer_no),1),e("td",tt,[e("div",rt,[e("span",at,n(a.from_branch),1),t[30]||(t[30]=m(" âž¡ ",-1)),e("span",st,n(a.to_branch),1)])]),e("td",ot,n(a.transferred_at),1),e("td",nt,[e("span",{class:V([F(a.status),"px-2.5 py-1.5 text-xs font-medium rounded-full"])},n(I(a.status)),3)]),e("td",dt,n(a.sent_by||"-"),1),e("td",lt,n(a.received_by||"-"),1),s(g)("good_transfers.view")||s(g)("good_transfers.edit")||s(g)("good_transfers.delete")?(d(),y("td",it,[e("div",ut,[s(g)("good_transfers.view")?(d(),D(s(S),{key:0,href:r.route("good-transfers.show",a.id)},{default:_(()=>[i(R,{class:"text-blue-400"})]),_:1},8,["href"])):f("",!0),s(g)("good_transfers.edit")?(d(),D(s(S),{key:1,href:r.route("good-transfers.edit",a.id)},{default:_(()=>[i(z,{class:"text-yellow-500"})]),_:1},8,["href"])):f("",!0),s(g)("good_transfers.delete")?(d(),y("button",{key:2,type:"button",onClick:c=>L(a)},[i(W,{class:"text-red-500"})],8,gt)):f("",!0)])])):f("",!0)]))),128))])]),i(le,{pagination:l.goodTransfers,onPageChange:ae,onPerPageChange:se,class:"border-t"},null,8,["pagination"])]),i(ue,{show:q.value,question:"Yakin ingin menghapus pemindahan barang",selected:`${k.value?.transfer_no||"ini"}`,title:"Hapus Pemindahan Barang",confirmText:"Ya, Hapus!",maxWidth:"md",onClose:E,onConfirm:re},null,8,["show","selected"])])])],64)}}});export{Pt as default};
