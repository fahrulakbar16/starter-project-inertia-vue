import{d as f,u as z,z as J,H as B,e as i,o as d,b as l,a as e,g as o,D as K,f as m,c as M,E as x,G as j,n as y,F as T,i as V,t as g,w as $,P as L,h as R,J as W,N as Y}from"./app-CJkCV51W.js";import{_ as G}from"./AppLayout-BlEKf3Fz.js";import{P as Q}from"./PlusSquareIcon-DA_kLpvy.js";import{S as X}from"./SearchIcon-B0safoHl.js";import{S as Z}from"./ShowIcon-CiA5nZAB.js";import{E as ee}from"./EditIcon-B9T5EQzJ.js";import{U as _,D}from"./DownIcon-C_yWQF6q.js";import{T as te}from"./TrashIcon-DSAHmBPH.js";import{R as re}from"./RefreshIcon-BE4oV5CY.js";import{_ as ae}from"./Breadcrumb-BJQpsGcc.js";import{_ as se}from"./Modal-Ddbg9qvg.js";import{_ as oe}from"./ConfirmModal-DAlWp-FQ.js";import{_ as ne}from"./Pagination-C2dOEo8X.js";import{u as de}from"./useAuth-DvuTgkfF.js";import"./FlashMessage-D4C-FUm8.js";import"./LayoutShell-FWpWJLvi.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./LayoutShell.vue_vue_type_style_index_0_lang-CRqqKi3W.js";const le={class:"flex flex-col h-full gap-3 px-4"},ie={class:"flex items-center justify-between"},ce={class:"h-[90%] grid-cols-12 gap-3 md:gap-6 overflow-hidden rounded-lg border border-gray-200 bg-white dark:border-gray-600 dark:bg-white/[0.03]"},ue={class:"flex flex-col gap-2 px-8 py-1 sm:flex-row sm:items-center sm:justify-between"},me={class:"flex items-center gap-3"},ge={class:"relative py-2"},ye={type:"button",class:"absolute -translate-y-1/2 left-4 top-1/2"},fe={class:"w-full overflow-auto","data-simplebar":""},pe={class:"min-w-full overflow-auto text-sm"},xe={class:"flex items-center justify-center gap-2"},be={class:"flex flex-col items-center"},he={class:"flex items-center justify-center gap-2"},ke={class:"flex flex-col items-center"},ve={class:"flex items-center justify-center gap-2"},we={class:"flex flex-col items-center"},_e={class:"flex items-center justify-center gap-2"},De={class:"flex flex-col items-center"},Ce={class:"py-2.5 border-gray-200 border-y dark:border-gray-600"},Se={class:"flex items-center justify-center px-3 whitespace-nowrap"},Be={class:"text-gray-500 dark:text-gray-400"},Me={class:"py-2.5 border border-gray-200 dark:border-gray-600"},je={class:"flex items-center whitespace-nowrap"},Te={class:"flex flex-col px-8 leading-tight"},$e={class:"font-medium text-gray-800 dark:text-white/90"},Ie={class:"py-2.5 border border-gray-200 dark:border-gray-600"},Ne={class:"flex items-center whitespace-nowrap"},Ve={class:"flex flex-col px-8 leading-tight"},Ee={class:"font-medium text-gray-800 dark:text-white/90"},Ae={class:"py-2.5 border border-gray-200 dark:border-gray-600"},Ue={class:"flex items-center justify-center px-3 whitespace-nowrap"},Fe={class:"text-gray-500 dark:text-gray-400"},qe={class:"py-2.5 border border-gray-200 dark:border-gray-600"},Oe={class:"flex items-center justify-center px-3 whitespace-nowrap"},Pe={class:"text-red-500 dark:text-gray-400"},He={key:0,class:"p-1 font-normal text-green-600 bg-green-100 border-2 border-green-300 rounded-lg"},ze={key:1,class:"p-1 font-normal text-red-600 bg-red-100 border-2 border-red-300 rounded-lg"},Je={class:"py-2.5 border-gray-200 border-y dark:border-gray-600"},Ke={class:"flex justify-center gap-3 px-4 whitespace-nowrap sm:px-0"},Le=["onClick"],Re=["onClick"],We={key:1},Ye={class:"flex items-center gap-2"},Ge={class:"space-y-3"},Qe={class:"space-y-1 text-sm"},Xe={key:0,class:"text-sm text-red-500"},Ze={class:"space-y-1 text-sm"},et=["value"],tt={key:0,class:"text-sm text-red-500"},rt={class:"space-y-1 text-sm"},at={key:0,class:"text-sm text-red-500"},st={class:"space-y-1 text-sm"},ot={class:"flex items-center gap-2"},nt={key:0,class:"text-sm text-red-500"},Ct=Object.assign({layout:G},{__name:"Index",props:{departments:Object,branches:Array,sortBy:String,sortDirection:String,search:String},setup(a){const{can:u}=de(),E=[{label:"Konfigurasi"},{label:"Departemen"}],b=f(!1),h=f(!1),n=f(!1),r=z({id:null,name:"",branch_id:"",description:"",status:!0});function A(){u("departments.create")&&(r.reset(),h.value=!1,n.value=!1,b.value=!0)}function U(c){u("departments.edit")&&(r.id=c.id,r.name=c.name,r.branch_id=c.branch_id||"",r.description=c.description||"",r.status=c.status||!1,h.value=!0,n.value=!1,b.value=!0)}function C(){b.value=!1,n.value=!1,r.reset(),r.clearErrors()}function F(){if(!n.value)if(n.value=!0,h.value){if(!u("departments.edit")){n.value=!1;return}r.put(route("departments.update",r.id),{onSuccess:()=>{C()},onFinish:()=>{n.value=!1}})}else{if(!u("departments.create")){n.value=!1;return}r.post(route("departments.store"),{onSuccess:()=>{C()},onFinish:()=>{n.value=!1}})}}const k=f(null),S=f(!1),q=c=>{u("departments.delete")&&(k.value=c,S.value=!0)},I=()=>{k.value=null,S.value=!1,n.value=!1},O=()=>{n.value||u("departments.delete")&&(n.value=!0,B.delete(route("departments.destroy",k.value.id),{onSuccess:()=>{I()},onFinish:()=>{n.value=!1},preserveScroll:!0}))},p=a,v=f(p.search||"");let N=null;J(v,c=>{clearTimeout(N),N=setTimeout(()=>{B.get(route("departments.index"),{search:c,sortBy:p.sortBy,sortDirection:p.sortDirection},{preserveScroll:!0,preserveState:!0,replace:!0})},400)});function w(c){let t="asc";p.sortBy===c&&p.sortDirection==="asc"&&(t="desc"),B.get(route("departments.index"),{search:v.value,sortBy:c,sortDirection:t},{preserveState:!0,preserveScroll:!0})}return(c,t)=>(d(),i(T,null,[l(o(K),{title:"Departemen"}),e("div",le,[e("div",ie,[l(ae,{items:E}),o(u)("departments.create")?(d(),i("button",{key:0,onClick:A,type:"button",class:"flex items-center gap-2 px-3 py-2 text-white bg-blue-500 rounded"},[l(Q,{class:"w-4 h-4"}),t[9]||(t[9]=e("span",{class:"hidden text-sm md:block"},"Tambah Departemen",-1))])):m("",!0)]),e("div",ce,[e("div",ue,[t[10]||(t[10]=e("div",{class:"font-bold text-gray-700 md:text-xl dark:text-gray-300"}," Daftar Departemen ",-1)),e("div",me,[e("form",ge,[e("button",ye,[l(X,{class:"text-gray-400"})]),x(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>v.value=s),type:"text",placeholder:"Cari departemen",class:"dark:bg-dark-900 h-10 w-full rounded-lg border border-gray-200 bg-transparent py-2.5 pl-12 pr-4 text-sm text-gray-800 shadow-theme-xs placeholder:text-gray-400 focus:border-blue-300 focus:outline-hidden focus:ring-3 focus:ring-blue-500/10 dark:border-gray-800 dark:bg-gray-900 dark:bg-white/[0.03] dark:text-white/90 dark:placeholder:text-white/30 dark:focus:border-blue-800 xl:w-[200px]"},null,512),[[j,v.value]])])])]),e("div",fe,[e("table",pe,[e("thead",null,[e("tr",null,[t[15]||(t[15]=e("th",{class:"py-2.5 bg-gray-100 border-gray-200 border-y dark:border-gray-600 dark:bg-gray-800"},[e("div",{class:"flex items-center justify-center"},[e("p",{class:"flex flex-col items-center font-medium text-gray-500 whitespace-nowrap dark:text-gray-400"}," No. ")])],-1)),e("th",{onClick:t[1]||(t[1]=s=>w("branch")),class:"py-3 bg-gray-100 border border-gray-200 cursor-pointer dark:border-gray-600 dark:bg-gray-800"},[e("div",xe,[t[11]||(t[11]=e("p",{class:"font-medium text-gray-500 whitespace-nowrap dark:text-gray-400"}," Cabang ",-1)),e("div",be,[l(_,{class:y(["-mb-1",a.sortBy==="branch"&&a.sortDirection==="asc"?"text-gray-900 dark:text-gray-200":"text-gray-400 dark:text-gray-500"])},null,8,["class"]),l(D,{class:y(["-mt-1",a.sortBy==="branch"&&a.sortDirection==="desc"?"text-gray-900 dark:text-gray-200":"text-gray-400 dark:text-gray-500"])},null,8,["class"])])])]),e("th",{onClick:t[2]||(t[2]=s=>w("name")),class:"py-3 bg-gray-100 border border-gray-200 cursor-pointer dark:border-gray-600 dark:bg-gray-800"},[e("div",he,[t[12]||(t[12]=e("p",{class:"font-medium text-gray-500 whitespace-nowrap dark:text-gray-400"}," Nama Departemen ",-1)),e("div",ke,[l(_,{class:y(["-mb-1",a.sortBy==="name"&&a.sortDirection==="asc"?"text-gray-900 dark:text-gray-200":"text-gray-400 dark:text-gray-500"])},null,8,["class"]),l(D,{class:y(["-mt-1",a.sortBy==="name"&&a.sortDirection==="desc"?"text-gray-900 dark:text-gray-200":"text-gray-400 dark:text-gray-500"])},null,8,["class"])])])]),e("th",{onClick:t[3]||(t[3]=s=>w("employees_count")),class:"py-3 bg-gray-100 border border-gray-200 cursor-pointer dark:border-gray-600 dark:bg-gray-800"},[e("div",ve,[t[13]||(t[13]=e("p",{class:"font-medium text-gray-500 whitespace-nowrap dark:text-gray-400"}," Jumlah Karyawan ",-1)),e("div",we,[l(_,{class:y(["-mb-1",a.sortBy==="employees_count"&&a.sortDirection==="asc"?"text-gray-900 dark:text-gray-200":"text-gray-400 dark:text-gray-500"])},null,8,["class"]),l(D,{class:y(["-mt-1",a.sortBy==="employees_count"&&a.sortDirection==="desc"?"text-gray-900 dark:text-gray-200":"text-gray-400 dark:text-gray-500"])},null,8,["class"])])])]),e("th",{onClick:t[4]||(t[4]=s=>w("verification")),class:"py-3 bg-gray-100 border border-gray-200 cursor-pointer dark:border-gray-600 dark:bg-gray-800"},[e("div",_e,[t[14]||(t[14]=e("p",{class:"font-medium text-gray-500 whitespace-nowrap dark:text-gray-400"}," Status ",-1)),e("div",De,[l(_,{class:y(["-mb-1",a.sortBy==="verification"&&a.sortDirection==="asc"?"text-gray-900 dark:text-gray-200":"text-gray-400 dark:text-gray-500"])},null,8,["class"]),l(D,{class:y(["-mt-1",a.sortBy==="verification"&&a.sortDirection==="desc"?"text-gray-900 dark:text-gray-200":"text-gray-400 dark:text-gray-500"])},null,8,["class"])])])]),t[16]||(t[16]=e("th",{class:"py-3 bg-gray-100 border-gray-200 border-y dark:border-gray-600 dark:bg-gray-800"},[e("div",{class:"flex items-center justify-center"},[e("p",{class:"font-medium text-gray-500 whitespace-nowrap dark:text-gray-400"}," Aksi ")])],-1))])]),e("tbody",null,[a.departments.data&&a.departments.data.length>0?(d(!0),i(T,{key:0},V(a.departments.data,(s,P)=>(d(),i("tr",{key:s.id,class:"cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-800"},[e("td",Ce,[e("div",Se,[e("p",Be,g((a.departments.current_page-1)*a.departments.per_page+P+1)+". ",1)])]),e("td",Me,[e("div",je,[e("div",Te,[e("p",$e,g(s.branch?.name||"-"),1)])])]),e("td",Ie,[e("div",Ne,[e("div",Ve,[e("p",Ee,g(s.name),1)])])]),e("td",Ae,[e("div",Ue,[e("p",Fe,g(s.employees_count??0),1)])]),e("td",qe,[e("div",Oe,[e("p",Pe,[s.status===!0?(d(),i("span",He," Aktif ")):(d(),i("span",ze," Non Aktif "))])])]),e("td",Je,[e("div",Ke,[o(u)("departments.view")?(d(),M(o(L),{key:0,href:c.route("departments.show",s.id)},{default:$(()=>[l(Z,{class:"text-blue-400"})]),_:1},8,["href"])):m("",!0),o(u)("departments.edit")?(d(),i("button",{key:1,onClick:H=>U(s)},[l(ee,{class:"text-yellow-500"})],8,Le)):m("",!0),o(u)("departments.delete")?(d(),i("button",{key:2,onClick:H=>q(s)},[l(te,{class:"text-red-500"})],8,Re)):m("",!0)])])]))),128)):(d(),i("tr",We,[...t[17]||(t[17]=[e("td",{colspan:"6",class:"py-6 font-medium text-center text-gray-500 dark:text-gray-400"}," Tidak ada data ditemukan ",-1)])]))])]),l(se,{show:b.value,title:h.value?"Edit Departemen":"Tambah Departemen",confirmText:n.value?"Menyimpan...":"Simpan",disabled:n.value,maxWidth:"lg",onClose:C,onConfirm:F},{confirmButton:$(()=>[e("div",Ye,[n.value?(d(),M(re,{key:0,class:"w-4 h-4 animate-spin"})):m("",!0),e("span",null,g(n.value?"Menyimpan...":"Simpan"),1)])]),default:$(()=>[e("div",Ge,[e("div",Qe,[t[18]||(t[18]=e("label",{for:"name",class:"font-semibold text-gray-900 dark:text-white"},[R(" Nama Departemen "),e("span",{class:"text-red-500"},"*")],-1)),x(e("input",{id:"name",class:"w-full text-sm font-medium text-gray-600 placeholder-gray-500 border-gray-400 rounded-lg placeholder:font-normal dark:border-white dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 dark:focus:border-blue-500 dark:focus:ring-blue-500",type:"text","onUpdate:modelValue":t[5]||(t[5]=s=>o(r).name=s),required:"",placeholder:"Masukkan nama departemen"},null,512),[[j,o(r).name]]),o(r).errors.name?(d(),i("div",Xe,g(o(r).errors.name[0]),1)):m("",!0)]),e("div",Ze,[t[20]||(t[20]=e("label",{for:"branch_id",class:"font-semibold text-gray-900 dark:text-white"},"Cabang",-1)),x(e("select",{id:"branch_id","onUpdate:modelValue":t[6]||(t[6]=s=>o(r).branch_id=s),class:"w-full text-sm font-medium text-gray-600 placeholder-gray-500 border-gray-400 rounded-lg placeholder:font-normal dark:border-white dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 dark:focus:border-blue-500 dark:focus:ring-blue-500"},[t[19]||(t[19]=e("option",{value:""},"Pilih Cabang",-1)),(d(!0),i(T,null,V(a.branches,s=>(d(),i("option",{key:s.id,value:s.id},g(s.name),9,et))),128))],512),[[W,o(r).branch_id]]),o(r).errors.branch_id?(d(),i("div",tt,g(o(r).errors.branch_id[0]),1)):m("",!0)]),e("div",rt,[t[21]||(t[21]=e("label",{for:"description",class:"font-semibold text-gray-900 dark:text-white"}," Deskripsi ",-1)),x(e("textarea",{id:"description","onUpdate:modelValue":t[7]||(t[7]=s=>o(r).description=s),rows:"3",class:"w-full text-sm font-medium text-gray-600 placeholder-gray-500 border-gray-400 rounded-lg placeholder:font-normal dark:border-white dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 dark:focus:border-blue-500 dark:focus:ring-blue-500",placeholder:"Masukkan deskripsi departemen"},null,512),[[j,o(r).description]]),o(r).errors.description?(d(),i("div",at,g(o(r).errors.description[0]),1)):m("",!0)]),e("div",st,[e("label",ot,[x(e("input",{type:"checkbox","onUpdate:modelValue":t[8]||(t[8]=s=>o(r).status=s),class:"text-blue-600 border-gray-300 rounded shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50"},null,512),[[Y,o(r).status]]),t[22]||(t[22]=e("span",{class:"font-semibold text-gray-900 dark:text-white"}," Status Aktif ",-1))]),o(r).errors.status?(d(),i("div",nt,g(o(r).errors.status[0]),1)):m("",!0)])])]),_:1},8,["show","title","confirmText","disabled"]),l(oe,{show:S.value,question:`Yakin ingin menghapus '${k.value?.name}' ?`,title:"Hapus Departemen",confirmText:n.value?"Menghapus...":"Ya, Hapus!",disabled:n.value,maxWidth:"md",onClose:I,onConfirm:O},null,8,["show","question","confirmText","disabled"])]),a.departments.data&&a.departments.data.length>0?(d(),M(ne,{key:0,pagination:a.departments},null,8,["pagination"])):m("",!0)])])],64))}});export{Ct as default};
