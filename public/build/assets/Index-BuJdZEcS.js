import{d as f,y as R,z as N,u as Q,e as n,o,b as g,a as e,g as s,D as X,f as y,c as Z,E as k,J as P,F as C,i as V,t as i,G as M,n as x,h as S,K as O,w as ee,H as F}from"./app-CJkCV51W.js";import{_ as te}from"./AppLayout-BlEKf3Fz.js";import{P as re}from"./PlusSquareIcon-DA_kLpvy.js";import{S as ae}from"./SearchIcon-B0safoHl.js";import{E as se}from"./EditIcon-B9T5EQzJ.js";import{U as j,D as $}from"./DownIcon-C_yWQF6q.js";import{T as oe}from"./TrashIcon-DSAHmBPH.js";import{_ as le}from"./Breadcrumb-BJQpsGcc.js";import{_ as ne}from"./Modal-Ddbg9qvg.js";import{_ as de}from"./ConfirmModal-DAlWp-FQ.js";import{_ as ie}from"./Pagination-C2dOEo8X.js";import{u as ue}from"./useAuth-DvuTgkfF.js";import"./FlashMessage-D4C-FUm8.js";import"./LayoutShell-FWpWJLvi.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./LayoutShell.vue_vue_type_style_index_0_lang-CRqqKi3W.js";const ge={class:"flex flex-col gap-3 px-3 h-full"},ce={class:"flex justify-between items-center h-10"},ye={class:"h-[90%] grid-cols-12 gap-4 md:gap-6 overflow-hidden rounded-lg border border-gray-200 bg-white dark:border-gray-600 dark:bg-white/[0.03]"},xe={class:"flex flex-col gap-2 px-8 py-1 sm:flex-row sm:items-center sm:justify-between"},me={class:"flex gap-3 items-center"},pe=["value"],be={class:"relative py-2"},fe={class:"absolute left-4 top-1/2 -translate-y-1/2"},ke={class:"px-8 border-b border-gray-200 dark:border-gray-600"},ve={class:"flex gap-4 -mb-px"},he={key:0,class:"px-2 py-0.5 ml-2 text-xs text-blue-600 bg-blue-100 rounded-full dark:bg-blue-900 dark:text-blue-300"},we={key:0,class:"px-2 py-0.5 ml-2 text-xs text-green-600 bg-green-100 rounded-full dark:bg-green-900 dark:text-green-300"},_e={key:0,class:"px-2 py-0.5 ml-2 text-xs text-yellow-600 bg-yellow-100 rounded-full dark:bg-yellow-900 dark:text-yellow-300"},De={key:0,class:"px-2 py-0.5 ml-2 text-xs text-red-600 bg-red-100 rounded-full dark:bg-red-900 dark:text-red-300"},Ce={class:"overflow-auto","data-simplebar":""},Me={class:"min-w-full text-sm"},Se={class:"flex gap-2 justify-center items-center px-3"},je={class:"flex flex-col items-center"},$e={class:"flex gap-2 justify-center items-center px-3"},Te={class:"flex flex-col items-center"},Be={class:"flex gap-2 justify-center items-center px-3"},Ue={class:"flex flex-col items-center"},Pe={class:"flex gap-2 justify-center items-center px-3"},Ve={class:"flex flex-col items-center"},Ee={key:0,class:"py-3 bg-gray-100 border border-gray-200 dark:border-gray-600 dark:bg-gray-800"},Ie={class:"py-2.5 border border-gray-200 dark:border-gray-600"},Ae={class:"flex justify-center items-center whitespace-nowrap"},Ne={class:"px-3 text-gray-500 dark:text-gray-400"},Oe={class:"py-2.5 border border-gray-200 dark:border-gray-600"},Fe={class:"flex gap-3 items-center whitespace-nowrap ps-5"},qe=["src"],He={class:"flex flex-col leading-tight"},ze={class:"font-medium text-gray-800 dark:text-white/90"},Le={class:"text-gray-500 dark:text-gray-400"},We={class:"py-2.5 border border-gray-200 dark:border-gray-600"},Ye={class:"flex justify-center items-center px-3 whitespace-nowrap"},Ge={class:"text-gray-500 dark:text-gray-400"},Je={class:"py-2.5 border border-gray-200 dark:border-gray-600"},Ke={class:"flex justify-center items-center px-3 whitespace-nowrap"},Re={class:"text-gray-500 dark:text-gray-400"},Qe={class:"py-2.5 border border-gray-200 dark:border-gray-600"},Xe={class:"flex justify-center items-center px-3 whitespace-nowrap"},Ze={class:"py-2.5 border border-gray-200 dark:border-gray-600"},et={class:"flex justify-center items-center px-3 text-gray-500 whitespace-nowrap dark:text-gray-400"},tt={key:0,class:"px-3 py-1 text-teal-500 bg-teal-200 rounded-full dark:bg-teal-400 dark:text-teal-100"},rt={key:1},at={key:2,class:"text-gray-400"},st={key:0,class:"py-2.5 border border-gray-200 dark:border-gray-600"},ot={class:"flex gap-3 justify-center px-4 whitespace-nowrap sm:px-0"},lt=["onClick"],nt=["onClick"],dt={key:1},it=["colspan"],ut={class:"space-y-3"},gt={class:"space-y-1 text-sm"},ct={key:0,class:"text-sm text-red-500"},yt={class:"space-y-1 text-sm"},xt={key:0,class:"text-sm text-red-500"},mt={class:"space-y-1 text-sm"},pt={key:0,class:"text-sm text-red-500"},bt={class:"space-y-1 text-sm"},ft=["value"],kt={key:0,class:"text-sm text-red-500"},vt={class:"space-y-1 text-sm"},ht={key:0,class:"text-sm text-red-500"},Nt=Object.assign({layout:te},{__name:"Index",props:{users:Object,roles:Object,search:String,role:String,sortBy:String,sortDirection:String},setup(d){const{can:c}=ue(),q=[{label:"Menu Utama"},{label:"Pengguna"}],u=f("all"),m=d,H=l=>l?new Intl.DateTimeFormat("id-ID",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(new Date(l)):"-",z=l=>{if(!l)return!1;const t=new Date,r=new Date(l);return(t-r)/(1e3*60)<2},p=R(()=>!m.users||!m.users.data?[]:u.value==="all"?m.users.data:m.users.data.filter(l=>u.value==="active"?l.status==="active":u.value==="inactive"?l.status==="inactive":u.value==="pending"?l.status==="pending":!0));function T({sortBy:l=m.sortBy,sortDirection:t=m.sortDirection}={}){F.get(route("users.index"),{search:v.value,role:h.value,sortBy:l,sortDirection:t},{preserveScroll:!0,preserveState:!0,replace:!0})}const v=f(m.search||""),h=f(m.role||"");let E=null;N(v,()=>{clearTimeout(E),E=setTimeout(()=>{T()},400)}),N(h,()=>{T()});function w(l){let t="asc";m.sortBy===l&&m.sortDirection==="asc"&&(t="desc"),T({sortBy:l,sortDirection:t})}const _=f(!1),D=f(!1),a=Q({id:null,name:"",username:"",email:"",role:"",status:"active"});function L(){c("users.create")&&(a.reset(),D.value=!1,_.value=!0)}function W(l){c("users.edit")&&(a.id=l.id,a.name=l.name,a.username=l.username,a.email=l.email,a.role=l.roles[0].name,a.status=l.status||"active",b.value=l,D.value=!0,_.value=!0)}function B(){_.value=!1,b.value=null,a.reset(),a.clearErrors()}function Y(){if(D.value){if(!c("users.edit"))return;a.put(route("users.update",a.id),{onSuccess:B})}else{if(!c("users.create"))return;a.post(route("users.store"),{onSuccess:B})}}const b=f(null),U=f(!1),G=l=>{c("users.delete")&&(b.value=l,U.value=!0)},I=()=>{b.value=null,U.value=!1},J=()=>{c("users.delete")&&F.delete(route("users.destroy",b.value.id),{onSuccess:()=>{I()},preserveScroll:!0})};return(l,t)=>(o(),n(C,null,[g(s(X),{title:"Daftar Pengguna"}),e("div",ge,[e("div",ce,[g(le,{items:q}),s(c)("users.create")?(o(),n("button",{key:0,onClick:L,type:"button",class:"flex gap-2 items-center px-3 py-2 text-white bg-blue-500 rounded hover:bg-blue-600"},[g(re),t[15]||(t[15]=e("span",{class:"hidden text-sm md:block"},"Tambah Pengguna",-1))])):y("",!0)]),e("div",ye,[e("div",xe,[t[17]||(t[17]=e("div",{class:"font-bold text-gray-700 md:text-xl dark:text-gray-300"}," Daftar Pengguna ",-1)),e("div",me,[k(e("select",{"onUpdate:modelValue":t[0]||(t[0]=r=>h.value=r),class:"px-3 h-10 text-sm text-gray-800 bg-transparent rounded-lg border border-gray-200 dark:border-gray-700 dark:bg-gray-800 dark:text-white/90 focus:border-blue-300 focus:outline-hidden focus:ring-2 focus:ring-blue-500/20"},[t[16]||(t[16]=e("option",{value:""},"Semua Peran",-1)),(o(!0),n(C,null,V(m.roles,r=>(o(),n("option",{key:r.id,value:r.name},i(r.name),9,pe))),128))],512),[[P,h.value]]),e("div",be,[e("div",fe,[g(ae,{class:"text-gray-400"})]),k(e("input",{"onUpdate:modelValue":t[1]||(t[1]=r=>v.value=r),type:"text",placeholder:"Cari pengguna",class:"h-10 w-full rounded-lg border border-gray-200 bg-transparent py-2.5 pl-12 pr-4 text-sm text-gray-800 placeholder:text-gray-400 focus:border-blue-300 focus:outline-hidden focus:ring-3 focus:ring-blue-500/10 dark:border-gray-700 dark:bg-gray-800 dark:text-white/90 dark:placeholder:text-gray-400 dark:focus:border-blue-800 xl:w-[200px]"},null,512),[[M,v.value]])])])]),e("div",ke,[e("nav",ve,[e("button",{onClick:t[2]||(t[2]=r=>u.value="all"),class:x(["px-4 py-2 text-sm font-medium border-b-2 transition-colors",u.value==="all"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"])},[t[18]||(t[18]=S(" Semua ",-1)),u.value==="all"?(o(),n("span",he,i(p.value.length),1)):y("",!0)],2),e("button",{onClick:t[3]||(t[3]=r=>u.value="active"),class:x(["px-4 py-2 text-sm font-medium border-b-2 transition-colors",u.value==="active"?"border-green-500 text-green-600 dark:text-green-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"])},[t[19]||(t[19]=S(" Aktif ",-1)),u.value==="active"?(o(),n("span",we,i(p.value.length),1)):y("",!0)],2),e("button",{onClick:t[4]||(t[4]=r=>u.value="pending"),class:x(["px-4 py-2 text-sm font-medium border-b-2 transition-colors",u.value==="pending"?"border-yellow-500 text-yellow-600 dark:text-yellow-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"])},[t[20]||(t[20]=S(" Menunggu Verifikasi ",-1)),u.value==="pending"?(o(),n("span",_e,i(p.value.length),1)):y("",!0)],2),e("button",{onClick:t[5]||(t[5]=r=>u.value="inactive"),class:x(["px-4 py-2 text-sm font-medium border-b-2 transition-colors",u.value==="inactive"?"border-red-500 text-red-600 dark:text-red-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"])},[t[21]||(t[21]=S(" Tidak Aktif ",-1)),u.value==="inactive"?(o(),n("span",De,i(p.value.length),1)):y("",!0)],2)])]),e("div",Ce,[e("table",Me,[e("thead",null,[e("tr",null,[t[27]||(t[27]=e("th",{class:"py-3 bg-gray-100 border border-gray-200 dark:border-gray-600 dark:bg-gray-800"},[e("div",{class:"flex justify-center items-center"},[e("p",{class:"flex flex-col items-center font-medium text-gray-500 whitespace-nowrap dark:text-gray-400"}," No. ")])],-1)),e("th",{onClick:t[6]||(t[6]=r=>w("name")),class:"py-3 bg-gray-100 border border-gray-200 cursor-pointer dark:border-gray-600 dark:bg-gray-800"},[e("div",Se,[t[22]||(t[22]=e("p",{class:"font-medium text-gray-500 whitespace-nowrap dark:text-gray-400"}," Nama & Email Pengguna ",-1)),e("div",je,[g(j,{class:x(["-mb-1",d.sortBy==="name"&&d.sortDirection==="asc"?"text-gray-900 dark:text-gray-200":"text-gray-400 dark:text-gray-500"])},null,8,["class"]),g($,{class:x(["-mt-1",d.sortBy==="name"&&d.sortDirection==="desc"?"text-gray-900 dark:text-gray-200":"text-gray-400 dark:text-gray-500"])},null,8,["class"])])])]),e("th",{onClick:t[7]||(t[7]=r=>w("username")),class:"py-3 bg-gray-100 border border-gray-200 cursor-pointer dark:border-gray-600 dark:bg-gray-800"},[e("div",$e,[t[23]||(t[23]=e("p",{class:"font-medium text-gray-500 whitespace-nowrap dark:text-gray-400"}," Username ",-1)),e("div",Te,[g(j,{class:x(["-mb-1",d.sortBy==="username"&&d.sortDirection==="asc"?"text-gray-900 dark:text-gray-200":"text-gray-400 dark:text-gray-500"])},null,8,["class"]),g($,{class:x(["-mt-1",d.sortBy==="username"&&d.sortDirection==="desc"?"text-gray-900 dark:text-gray-200":"text-gray-400 dark:text-gray-500"])},null,8,["class"])])])]),e("th",{onClick:t[8]||(t[8]=r=>w("role")),class:"py-3 bg-gray-100 border border-gray-200 cursor-pointer dark:border-gray-600 dark:bg-gray-800"},[e("div",Be,[t[24]||(t[24]=e("p",{class:"font-medium text-gray-500 whitespace-nowrap dark:text-gray-400"}," Peran & Akses ",-1)),e("div",Ue,[g(j,{class:x(["-mb-1",d.sortBy==="role"&&d.sortDirection==="asc"?"text-gray-900 dark:text-gray-200":"text-gray-400 dark:text-gray-500"])},null,8,["class"]),g($,{class:x(["-mt-1",d.sortBy==="role"&&d.sortDirection==="desc"?"text-gray-900 dark:text-gray-200":"text-gray-400 dark:text-gray-500"])},null,8,["class"])])])]),t[28]||(t[28]=e("th",{class:"py-3 bg-gray-100 border border-gray-200 dark:border-gray-600 dark:bg-gray-800"},[e("div",{class:"flex justify-center items-center"},[e("p",{class:"font-medium text-gray-500 whitespace-nowrap dark:text-gray-400"}," Status ")])],-1)),e("th",{onClick:t[9]||(t[9]=r=>w("updated_at")),class:"py-3 bg-gray-100 border border-gray-200 cursor-pointer dark:border-gray-600 dark:bg-gray-800"},[e("div",Pe,[t[25]||(t[25]=e("p",{class:"font-medium text-gray-500 whitespace-nowrap dark:text-gray-400"}," Terakhir Dilihat ",-1)),e("div",Ve,[g(j,{class:x(["-mb-1",d.sortBy==="updated_at"&&d.sortDirection==="asc"?"text-gray-900 dark:text-gray-200":"text-gray-400 dark:text-gray-500"])},null,8,["class"]),g($,{class:x(["-mt-1",d.sortBy==="updated_at"&&d.sortDirection==="desc"?"text-gray-900 dark:text-gray-200":"text-gray-400 dark:text-gray-500"])},null,8,["class"])])])]),s(c)("users.edit")||s(c)("users.delete")?(o(),n("th",Ee,[...t[26]||(t[26]=[e("div",{class:"flex justify-center items-center"},[e("p",{class:"font-medium text-gray-500 whitespace-nowrap dark:text-gray-400"}," Aksi ")],-1)])])):y("",!0)])]),e("tbody",null,[p.value&&p.value.length>0?(o(!0),n(C,{key:0},V(p.value,(r,A)=>(o(),n("tr",{key:r.id,class:"cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-800"},[e("td",Ie,[e("div",Ae,[e("p",Ne,i((d.users.current_page-1)*d.users.per_page+A+1)+". ",1)])]),e("td",Oe,[e("div",Fe,[e("img",{class:"object-cover w-10 h-10 rounded-full",src:r.profile_photo_path?`/storage/${r.profile_photo_path}`:`https://ui-avatars.com/api/?name=${encodeURIComponent(r.name)}&background=3b82f6&color=fff`,alt:"User profile",loading:"lazy"},null,8,qe),e("div",He,[e("p",ze,i(r.name),1),e("span",Le,i(r.email),1)])])]),e("td",We,[e("div",Ye,[e("p",Ge,i(r.username),1)])]),e("td",Je,[e("div",Ke,[e("p",Re,i(r.roles[0]?.name||"-"),1)])]),e("td",Qe,[e("div",Xe,[e("span",{class:x(["px-3 py-1 rounded-full text-xs font-medium",r.status==="active"?"bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-300":r.status==="pending"?"bg-yellow-100 text-yellow-700 dark:bg-yellow-900 dark:text-yellow-300":"bg-red-100 text-red-700 dark:bg-red-900 dark:text-red-300"])},i(r.status==="active"?"Aktif":r.status==="pending"?"Menunggu Verifikasi":"Tidak Aktif"),3)])]),e("td",Ze,[e("div",et,[r.last_seen&&z(r.last_seen)?(o(),n("span",tt," Online ")):r.last_seen?(o(),n("span",rt,i(H(r.last_seen)),1)):(o(),n("span",at," Tidak pernah terlihat "))])]),s(c)("users.edit")||s(c)("users.delete")?(o(),n("td",st,[e("div",ot,[s(c)("users.edit")?(o(),n("button",{key:0,onClick:O(K=>W(r),["stop"]),class:"text-yellow-500 hover:text-yellow-600",title:"Edit"},[g(se)],8,lt)):y("",!0),s(c)("users.delete")?(o(),n("button",{key:1,onClick:O(K=>G(r),["stop"]),class:"text-red-500 hover:text-red-600",title:"Hapus"},[g(oe)],8,nt)):y("",!0)])])):y("",!0)]))),128)):(o(),n("tr",dt,[e("td",{colspan:s(c)("users.edit")||s(c)("users.delete")?7:6,class:"py-6 font-medium text-center text-gray-500 dark:text-gray-400 border border-gray-200 dark:border-gray-600"}," Tidak ada pengguna ditemukan ",8,it)]))])]),g(ne,{show:_.value,title:D.value?`Edit ${b.value?.name}`:"Tambah Pengguna Baru",confirmText:"Simpan",maxWidth:"lg",onClose:B,onConfirm:Y},{default:ee(()=>[e("div",ut,[e("div",gt,[t[29]||(t[29]=e("label",{for:"name",class:"text-gray-900 dark:text-white"},"Nama Lengkap",-1)),k(e("input",{id:"name",class:"w-full text-sm font-medium placeholder-gray-500 text-gray-600 rounded-lg border-gray-400 placeholder:font-normal dark:border-white dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 dark:focus:border-blue-500 dark:focus:ring-blue-500",type:"text","onUpdate:modelValue":t[10]||(t[10]=r=>s(a).name=r),required:"",placeholder:"Masukkan nama lengkap pengguna"},null,512),[[M,s(a).name]]),s(a).errors.name?(o(),n("div",ct,i(s(a).errors.name),1)):y("",!0)]),e("div",yt,[t[30]||(t[30]=e("label",{for:"username",class:"text-gray-900 dark:text-white"},"Nama Pengguna",-1)),k(e("input",{id:"username",class:"w-full text-sm font-medium placeholder-gray-500 text-gray-600 rounded-lg border-gray-400 placeholder:font-normal dark:border-white dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 dark:focus:border-blue-500 dark:focus:ring-blue-500",type:"text","onUpdate:modelValue":t[11]||(t[11]=r=>s(a).username=r),required:"",placeholder:"Masukkan username"},null,512),[[M,s(a).username]]),s(a).errors.username?(o(),n("div",xt,i(s(a).errors.username),1)):y("",!0)]),e("div",mt,[t[31]||(t[31]=e("label",{for:"email",class:"text-gray-900 dark:text-white"},"Email",-1)),k(e("input",{id:"email","onUpdate:modelValue":t[12]||(t[12]=r=>s(a).email=r),class:"w-full text-sm font-medium placeholder-gray-500 text-gray-600 rounded-lg border-gray-400 placeholder:font-normal dark:border-white dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 dark:focus:border-blue-500 dark:focus:ring-blue-500",type:"email",placeholder:"Masukkan email pengguna"},null,512),[[M,s(a).email]]),s(a).errors.email?(o(),n("div",pt,i(s(a).errors.email),1)):y("",!0)]),e("div",bt,[t[33]||(t[33]=e("label",{for:"role",class:"text-gray-900 dark:text-white"},"Peran",-1)),k(e("select",{id:"role","onUpdate:modelValue":t[13]||(t[13]=r=>s(a).role=r),class:"block p-2.5 w-full text-sm text-gray-600 rounded-lg border-gray-400 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"},[t[32]||(t[32]=e("option",{selected:"",hidden:"",value:""}," Pilih peran pengguna ",-1)),(o(!0),n(C,null,V(m.roles,r=>(o(),n("option",{key:r.name,value:r.name},i(r.name),9,ft))),128))],512),[[P,s(a).role]]),s(a).errors.role?(o(),n("div",kt,i(s(a).errors.role),1)):y("",!0)]),e("div",vt,[t[35]||(t[35]=e("label",{for:"status",class:"text-gray-900 dark:text-white"},"Status",-1)),k(e("select",{id:"status","onUpdate:modelValue":t[14]||(t[14]=r=>s(a).status=r),class:"block p-2.5 w-full text-sm text-gray-600 rounded-lg border-gray-400 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"},[...t[34]||(t[34]=[e("option",{value:"active"},"Aktif",-1),e("option",{value:"pending"}," Menunggu Verifikasi ",-1),e("option",{value:"inactive"},"Tidak Aktif",-1)])],512),[[P,s(a).status]]),s(a).errors.status?(o(),n("div",ht,i(s(a).errors.status),1)):y("",!0)])])]),_:1},8,["show","title"]),g(de,{show:U.value,question:"Yakin ingin menghapus",selected:`${b.value?.name}`,title:"Hapus Pengguna",confirmText:"Ya, Hapus!",maxWidth:"md",onClose:I,onConfirm:J},null,8,["show","selected"])]),d.users.data&&d.users.data.length>0?(o(),Z(ie,{key:0,pagination:d.users},null,8,["pagination"])):y("",!0)])])],64))}});export{Nt as default};
