import{d as p,y as G,z as O,u as R,e as l,o,b as u,a as e,g as a,D as Q,c as _,f as y,w as C,P as V,E as b,G as k,J as B,F as v,i as j,t as c,n as U,h as S,H as W}from"./app-CJkCV51W.js";import{_ as X}from"./AppLayout-BlEKf3Fz.js";import{P as Z}from"./PlusSquareIcon-DA_kLpvy.js";import{S as ee}from"./SearchIcon-B0safoHl.js";import{U as te,D as re}from"./DownIcon-C_yWQF6q.js";import{S as ae}from"./ShowIcon-CiA5nZAB.js";import{E as se}from"./EditIcon-B9T5EQzJ.js";import{T as oe}from"./TrashIcon-DSAHmBPH.js";import{C as $}from"./LayoutShell-FWpWJLvi.js";import{_ as de}from"./Breadcrumb-BJQpsGcc.js";import{_ as le}from"./Modal-Ddbg9qvg.js";import{_ as ie}from"./ConfirmModal-DAlWp-FQ.js";import{_ as ne}from"./Pagination-C2dOEo8X.js";import{u as ce}from"./useAuth-DvuTgkfF.js";import"./FlashMessage-D4C-FUm8.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./LayoutShell.vue_vue_type_style_index_0_lang-CRqqKi3W.js";const ue={class:"flex overflow-hidden flex-col gap-3 px-3 h-full"},ge={class:"flex justify-between items-center"},ye={class:"flex flex-col overflow-hidden rounded-lg border border-gray-200 bg-white dark:border-gray-600 dark:bg-white/[0.03]"},me={class:"flex flex-col gap-2 px-8 py-1 sm:flex-row sm:items-center sm:justify-between"},fe={class:"flex flex-wrap gap-3 items-center"},pe={class:"relative py-2"},be={class:"absolute left-4 top-1/2 -translate-y-1/2"},xe=["value"],he=["value"],ke=["value"],ve={class:"overflow-auto","data-simplebar":""},we={class:"min-w-full text-sm"},_e={class:"flex gap-2 justify-center items-center cursor-pointer"},Ce={class:"flex flex-col items-center"},je={key:0,class:"p-3 bg-gray-100 border-gray-200 border-y dark:border-gray-600 dark:bg-gray-800"},Se={class:"p-2.5 border-gray-200 border-y dark:border-gray-600"},De={class:"flex justify-center items-center whitespace-nowrap"},Ie={class:"text-gray-500 dark:text-gray-400"},Me={class:"p-2.5 px-8 border border-gray-200 dark:border-gray-600"},Te={class:"flex items-center whitespace-nowrap"},Ve={class:"flex flex-col leading-tight"},Be={class:"font-medium text-gray-800 dark:text-white/90"},Ue={class:"p-2.5 border border-gray-200 dark:border-gray-600"},$e={class:"flex justify-center items-center px-3 whitespace-nowrap"},Ee={class:"text-gray-500 dark:text-gray-400"},Fe={class:"p-2.5 border border-gray-200 dark:border-gray-600"},Ne={class:"flex justify-center items-center px-3 whitespace-nowrap"},Ae={class:"text-gray-500 dark:text-gray-400"},Oe={class:"p-2.5 border border-gray-200 dark:border-gray-600"},We={class:"flex justify-center items-center px-3 whitespace-nowrap"},qe=["title"],He={class:"p-2.5 border border-gray-200 dark:border-gray-600"},Ke={class:"flex justify-center items-center whitespace-nowrap"},Pe={class:"text-gray-500 dark:text-gray-400"},Je={class:"p-2.5 border border-gray-200 dark:border-gray-600"},Le={class:"flex justify-center items-center whitespace-nowrap"},ze={class:"text-gray-500 dark:text-gray-400"},Ye={class:"p-2.5 border border-gray-200 dark:border-gray-600"},Ge={class:"flex justify-center items-center whitespace-nowrap"},Re={key:0,class:"px-8 py-2.5 border-gray-200 border-y dark:border-gray-600"},Qe={class:"flex gap-3 justify-center whitespace-nowrap"},Xe=["onClick"],Ze={key:1},et=["colspan"],tt={class:"space-y-5"},rt={class:"space-y-1 text-sm"},at={key:0,class:"text-sm text-red-500"},st={class:"flex gap-x-5 justify-between text-sm"},ot={for:"start_time",class:"font-semibold text-gray-900 dark:text-white"},dt={class:"relative w-full"},lt={key:0,class:"text-sm text-red-500"},it={for:"late_tolerance",class:"font-semibold text-center text-gray-900 dark:text-white"},nt={class:"relative w-full"},ct={key:0,class:"text-sm text-red-500"},ut={for:"end_time",class:"font-semibold text-gray-900 dark:text-white text-end"},gt={class:"relative w-full"},yt={key:0,class:"text-sm text-red-500"},Bt=Object.assign({layout:X},{__name:"Index",props:{checklists:Object,categories:Array,departments:Array,branches:Array,search:String,sortBy:String,sortDirection:String,filters:Object},setup(i){const{can:n}=ce(),q=[{label:"Konfigurasi"},{label:"Manajemen Checklist"}],g=i,x=p(g.filters?.search||""),h=p(g.filters?.category_id||""),m=p(g.filters?.branch_id||""),f=p(g.filters?.department_id||""),H=G(()=>m.value?(g.departments||[]).filter(d=>d.branch_id===parseInt(m.value)):g.departments||[]);O(m,(d,t)=>{if(d!==t&&f.value){const r=g.departments?.find(T=>T.id===parseInt(f.value));r&&r.branch_id!==parseInt(d)&&(f.value="")}});function D({sortBy:d=g.sortBy,sortDirection:t=g.sortDirection}={}){W.get(route("checklists.index"),{search:x.value||void 0,category_id:h.value||void 0,branch_id:m.value||void 0,department_id:f.value||void 0,sortBy:d,sortDirection:t},{preserveScroll:!0,preserveState:!0,replace:!0})}function K(){x.value="",h.value="",m.value="",f.value="",D()}let E=null;O([x,h,m,f],()=>{clearTimeout(E),E=setTimeout(()=>{D()},400)});function P(d){let t="asc";g.sortBy===d&&g.sortDirection==="asc"&&(t="desc"),D({sortBy:d,sortDirection:t})}const F=p(!1),N=p(!1),s=R({id:null,name:"",start_time:"",late_tolerance:"",end_time:""});function I(){F.value=!1,s.reset()}function J(){N.value?s.put(route("checklists.update",s.id),{onSuccess:I}):s.post(route("checklists.store"),{onSuccess:I})}const w=p(null),M=p(!1),L=d=>{n("checklists.delete")&&(w.value=d,M.value=!0)},A=()=>{w.value=null,M.value=!1},z=()=>{n("checklists.delete")&&W.delete(route("checklists.destroy",w.value.id),{onSuccess:()=>{A()},preserveScroll:!0})};function Y(d){switch((d||"").toLowerCase()){case"active":return"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-300";case"inactive":return"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-300";case"draft":default:return"bg-gray-100 text-gray-700 dark:bg-gray-800 dark:text-gray-300"}}return(d,t)=>(o(),l(v,null,[u(a(Q),{title:"Manajemen Checklist"}),e("div",ue,[e("div",ge,[u(de,{items:q}),a(n)("checklists.create")?(o(),_(a(V),{key:0,href:d.route("checklists.create"),class:"flex gap-2 items-center px-3 py-2 text-white bg-blue-500 rounded"},{default:C(()=>[u(Z,{class:"w-4 h-4"}),t[9]||(t[9]=e("span",{class:"hidden text-sm md:block"},"Tambah Checklist",-1))]),_:1},8,["href"])):y("",!0)]),e("div",ye,[e("div",me,[t[13]||(t[13]=e("div",{class:"font-bold text-gray-700 md:text-xl dark:text-gray-300"}," Manajemen Checklist ",-1)),e("div",fe,[e("div",pe,[e("div",be,[u(ee,{class:"text-gray-400"})]),b(e("input",{"onUpdate:modelValue":t[0]||(t[0]=r=>x.value=r),type:"text",placeholder:"Cari checklist",class:"dark:bg-dark-900 h-10 w-full rounded-lg border border-gray-200 bg-transparent py-2.5 pl-12 pr-4 text-sm text-gray-800 shadow-theme-xs placeholder:text-gray-400 focus:border-blue-300 focus:outline-hidden focus:ring-3 focus:ring-blue-500/10 dark:border-gray-800 dark:bg-gray-900 dark:bg-white/[0.03] dark:text-white/90 dark:placeholder:text-white/30 dark:focus:border-blue-800 xl:w-[200px]"},null,512),[[k,x.value]])]),b(e("select",{"onUpdate:modelValue":t[1]||(t[1]=r=>h.value=r),class:"px-3 py-2 h-10 text-sm text-gray-800 bg-white rounded-lg border border-gray-200 shadow-theme-xs focus:border-blue-300 focus:outline-hidden focus:ring-3 focus:ring-blue-500/10 dark:border-gray-800 dark:bg-gray-900 dark:text-white/90"},[t[10]||(t[10]=e("option",{value:""},"Semua Kategori",-1)),(o(!0),l(v,null,j(i.categories,r=>(o(),l("option",{key:r.id,value:r.id},c(r.name),9,xe))),128))],512),[[B,h.value]]),b(e("select",{"onUpdate:modelValue":t[2]||(t[2]=r=>m.value=r),class:"px-3 py-2 h-10 text-sm text-gray-800 bg-white rounded-lg border border-gray-200 shadow-theme-xs focus:border-blue-300 focus:outline-hidden focus:ring-3 focus:ring-blue-500/10 dark:border-gray-800 dark:bg-gray-900 dark:text-white/90"},[t[11]||(t[11]=e("option",{value:""},"Semua Cabang",-1)),(o(!0),l(v,null,j(i.branches,r=>(o(),l("option",{key:r.id,value:r.id},c(r.name),9,he))),128))],512),[[B,m.value]]),b(e("select",{"onUpdate:modelValue":t[3]||(t[3]=r=>f.value=r),class:"px-3 py-2 h-10 text-sm text-gray-800 bg-white rounded-lg border border-gray-200 shadow-theme-xs focus:border-blue-300 focus:outline-hidden focus:ring-3 focus:ring-blue-500/10 dark:border-gray-800 dark:bg-gray-900 dark:text-white/90"},[t[12]||(t[12]=e("option",{value:""},"Semua Departemen",-1)),(o(!0),l(v,null,j(H.value,r=>(o(),l("option",{key:r.id,value:r.id},c(r.name),9,ke))),128))],512),[[B,f.value]]),e("button",{onClick:K,class:"inline-flex items-center gap-2 rounded-lg border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 shadow-theme-xs hover:bg-gray-50 hover:text-gray-800 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-400 dark:hover:bg-white/[0.03] dark:hover:text-gray-200"}," Reset ")])]),e("div",ve,[e("table",we,[e("thead",null,[e("tr",null,[t[16]||(t[16]=e("th",{class:"p-3 bg-gray-100 border-gray-200 border-y dark:border-gray-600 dark:bg-gray-800"},[e("div",{class:"flex justify-center items-center"},[e("p",{class:"flex flex-col items-center font-medium text-gray-500 whitespace-nowrap dark:text-gray-400"}," No. ")])],-1)),e("th",{onClick:t[4]||(t[4]=r=>P("name")),class:"p-3 bg-gray-100 border border-gray-200 dark:border-gray-600 dark:bg-gray-800"},[e("div",_e,[t[14]||(t[14]=e("p",{class:"font-medium text-gray-500 whitespace-nowrap dark:text-gray-400"}," Nama Checklist ",-1)),e("div",Ce,[u(te,{class:U(["-mb-1",i.sortBy==="name"&&i.sortDirection==="asc"?"text-gray-900 dark:text-gray-200":"text-gray-400 dark:text-gray-500"])},null,8,["class"]),u(re,{class:U(["-mt-1",i.sortBy==="name"&&i.sortDirection==="desc"?"text-gray-900 dark:text-gray-200":"text-gray-400 dark:text-gray-500"])},null,8,["class"])])])]),t[17]||(t[17]=e("th",{class:"p-3 bg-gray-100 border border-gray-200 dark:border-gray-600 dark:bg-gray-800"},[e("div",{class:"flex justify-center items-center"},[e("p",{class:"font-medium text-gray-500 whitespace-nowrap dark:text-gray-400"}," Kategori ")])],-1)),t[18]||(t[18]=e("th",{class:"p-3 bg-gray-100 border border-gray-200 dark:border-gray-600 dark:bg-gray-800"},[e("div",{class:"flex justify-center items-center"},[e("p",{class:"font-medium text-gray-500 whitespace-nowrap dark:text-gray-400"}," Departemen ")])],-1)),t[19]||(t[19]=e("th",{class:"p-3 bg-gray-100 border border-gray-200 dark:border-gray-600 dark:bg-gray-800"},[e("div",{class:"flex justify-center items-center"},[e("p",{class:"font-medium text-gray-500 whitespace-nowrap dark:text-gray-400"}," Deskripsi ")])],-1)),t[20]||(t[20]=e("th",{class:"p-3 bg-gray-100 border border-gray-200 dark:border-gray-600 dark:bg-gray-800"},[e("div",{class:"flex justify-center items-center"},[e("p",{class:"font-medium text-gray-500 whitespace-nowrap dark:text-gray-400"}," Jumlah Pertanyaan ")])],-1)),t[21]||(t[21]=e("th",{class:"p-3 bg-gray-100 border border-gray-200 dark:border-gray-600 dark:bg-gray-800"},[e("div",{class:"flex justify-center items-center"},[e("p",{class:"font-medium text-gray-500 whitespace-nowrap dark:text-gray-400"}," Jenis ")])],-1)),t[22]||(t[22]=e("th",{class:"p-3 bg-gray-100 border border-gray-200 dark:border-gray-600 dark:bg-gray-800"},[e("div",{class:"flex justify-center items-center"},[e("p",{class:"font-medium text-gray-500 whitespace-nowrap dark:text-gray-400"}," Status ")])],-1)),a(n)("checklists.view")||a(n)("checklists.edit")||a(n)("checklists.delete")?(o(),l("th",je,[...t[15]||(t[15]=[e("div",{class:"flex justify-center items-center"},[e("p",{class:"font-medium text-gray-500 whitespace-nowrap dark:text-gray-400"}," Aksi ")],-1)])])):y("",!0)])]),e("tbody",null,[i.checklists.data&&i.checklists.data.length>0?(o(!0),l(v,{key:0},j(i.checklists.data,(r,T)=>(o(),l("tr",{key:r.id,class:"cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-800"},[e("td",Se,[e("div",De,[e("p",Ie,c((i.checklists.current_page-1)*i.checklists.per_page+T+1)+". ",1)])]),e("td",Me,[e("div",Te,[e("div",Ve,[e("p",Be,c(r.name),1)])])]),e("td",Ue,[e("div",$e,[e("p",Ee,c(r.category?.name||"-"),1)])]),e("td",Fe,[e("div",Ne,[e("p",Ae,c(r.department?.name||"-"),1)])]),e("td",Oe,[e("div",We,[e("p",{class:"text-gray-500 dark:text-gray-400 truncate max-w-[320px]",title:r.description},c(r.description||"-"),9,qe)])]),e("td",He,[e("div",Ke,[e("p",Pe,c(r.questions_count??0),1)])]),e("td",Je,[e("div",Le,[e("p",ze,c(r.type),1)])]),e("td",Ye,[e("div",Ge,[e("span",{class:U([Y(r.status),"px-2 py-0.5 text-xs font-medium rounded-full"])},c(r.status),3)])]),a(n)("checklists.view")||a(n)("checklists.edit")||a(n)("checklists.delete")?(o(),l("td",Re,[e("div",Qe,[a(n)("checklists.view")?(o(),_(a(V),{key:0,href:d.route("checklists.show",r.id),title:"Lihat Detail"},{default:C(()=>[u(ae,{class:"text-blue-400"})]),_:1},8,["href"])):y("",!0),a(n)("checklists.edit")?(o(),_(a(V),{key:1,href:d.route("checklists.edit",r.id),title:"Edit"},{default:C(()=>[u(se,{class:"text-yellow-500"})]),_:1},8,["href"])):y("",!0),a(n)("checklists.delete")?(o(),l("button",{key:2,onClick:mt=>L(r),title:"Hapus"},[u(oe,{class:"text-red-500"})],8,Xe)):y("",!0)])])):y("",!0)]))),128)):(o(),l("tr",Ze,[e("td",{colspan:a(n)("checklists.view")||a(n)("checklists.edit")||a(n)("checklists.delete")?9:8,class:"py-6 font-medium text-center text-gray-500 dark:text-gray-400"}," Tidak ada data ditemukan ",8,et)]))])]),u(le,{show:F.value,title:N.value?`Edit ${a(s)?.name}`:"Tambah checklist",confirmText:"Simpan",maxWidth:"lg",onClose:I,onConfirm:J},{default:C(()=>[e("div",tt,[e("div",rt,[t[23]||(t[23]=e("label",{for:"name",class:"font-semibold text-gray-900 dark:text-white"},[S("Nama Kategori"),e("span",{class:"text-red-500"},"*")],-1)),b(e("input",{id:"name",class:"w-full text-sm font-medium placeholder-gray-500 text-gray-600 rounded-lg border-gray-400 placeholder:font-normal dark:border-white dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 dark:focus:border-blue-500 dark:focus:ring-blue-500",type:"text","onUpdate:modelValue":t[5]||(t[5]=r=>a(s).name=r),required:"",placeholder:"Masukkan kategori checklist"},null,512),[[k,a(s).name]]),a(s).errors.name?(o(),l("div",at,c(a(s).errors.name[0]),1)):y("",!0)]),e("div",st,[e("label",ot,[t[24]||(t[24]=S(" Waktu Masuk ",-1)),e("div",dt,[u($,{class:"absolute right-3 top-1/2 w-5 h-5 text-blue-500 -translate-y-1/2"}),b(e("input",{id:"start_time",type:"time","onUpdate:modelValue":t[6]||(t[6]=r=>a(s).start_time=r),class:"pr-6 w-full text-sm font-medium placeholder-gray-500 text-gray-600 rounded-lg border-gray-400 placeholder:font-normal dark:border-white dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 dark:focus:border-blue-500 dark:focus:ring-blue-500"},null,512),[[k,a(s).start_time]])]),a(s).errors.start_time?(o(),l("div",lt,c(a(s).errors.start_time[0]),1)):y("",!0)]),e("label",it,[t[25]||(t[25]=S(" Waktu Toleransi ",-1)),e("div",nt,[u($,{class:"absolute right-3 top-1/2 w-5 h-5 text-blue-500 -translate-y-1/2"}),b(e("input",{id:"late_tolerance",type:"time","onUpdate:modelValue":t[7]||(t[7]=r=>a(s).late_tolerance=r),class:"pr-6 w-full text-sm font-medium placeholder-gray-500 text-gray-600 rounded-lg border-gray-400 placeholder:font-normal dark:border-white dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 dark:focus:border-blue-500 dark:focus:ring-blue-500"},null,512),[[k,a(s).late_tolerance]])]),a(s).errors.late_tolerance?(o(),l("div",ct,c(a(s).errors.late_tolerance[0]),1)):y("",!0)]),e("label",ut,[t[26]||(t[26]=S(" Waktu Selesai ",-1)),e("div",gt,[u($,{class:"absolute right-3 top-1/2 w-5 h-5 text-blue-500 -translate-y-1/2"}),b(e("input",{id:"end_time",type:"time","onUpdate:modelValue":t[8]||(t[8]=r=>a(s).end_time=r),class:"pr-6 w-full text-sm font-medium placeholder-gray-500 text-gray-600 rounded-lg border-gray-400 placeholder:font-normal dark:border-white dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 dark:focus:border-blue-500 dark:focus:ring-blue-500"},null,512),[[k,a(s).end_time]])]),a(s).errors.end_time?(o(),l("div",yt,c(a(s).errors.end_time[0]),1)):y("",!0)])])])]),_:1},8,["show","title"]),u(ie,{show:M.value,question:"Yakin ingin menghapus",selected:`${w.value?.name}`,title:"Hapus checklist",confirmText:"Ya, Hapus!",maxWidth:"md",onClose:A,onConfirm:z},null,8,["show","selected"])]),i.checklists.data&&i.checklists.data.length>0?(o(),_(ne,{key:0,pagination:i.checklists},null,8,["pagination"])):y("",!0)])])],64))}});export{Bt as default};
