import{y as b,d as g,u as Z,z as j,H as k,U as ee,e as v,o as c,a as t,b as i,w as x,h as te,g as s,E as d,J as B,F as M,i as H,t as u,n as le,G as f,K as se,f as T}from"./app-CJkCV51W.js";import{_ as ae}from"./AppLayout-BlEKf3Fz.js";import{s as P}from"./index-B9o0VbjL.js";import{s as oe}from"./index-D_jvqarE.js";import{s as re,a as h,b as ne}from"./index-CMR089Yl.js";import{s as ie}from"./index-CLpgtvfm.js";import{_ as ue}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./FlashMessage-D4C-FUm8.js";import"./LayoutShell-FWpWJLvi.js";import"./useAuth-DvuTgkfF.js";import"./LayoutShell.vue_vue_type_style_index_0_lang-CRqqKi3W.js";import"./index-BD4Vkpl0.js";const de={class:"px-6 py-6"},pe={class:"flex justify-between items-center mb-4"},me={class:"bg-white rounded-lg border border-gray-200"},be={class:"flex justify-between items-center px-4 py-3 border-b"},ge={class:"flex gap-3 items-center"},ve={class:"relative"},ce={class:"flex items-center gap-2"},xe={class:"py-0"},fe={style:{"overflow-x":"auto"}},ye={class:"flex items-center gap-2"},ke={class:"px-6 py-3 text-center"},he={class:"px-6 py-3"},Ve={class:"px-6 py-3"},Se={class:"px-6 py-3"},_e={class:"px-6 py-3"},we={class:"px-6 py-3 text-right"},Ce={class:"px-6 py-3 text-right"},Ue={class:"px-6 py-3 text-right"},Be={class:"px-6 py-3"},Ne={class:"px-6 py-3"},De={class:"flex gap-2 justify-center"},Te=["onClick"],Pe=["onClick"],Fe=["onClick"],Ie={class:"grid grid-cols-1 md:grid-cols-2 gap-3"},Ke={key:0,class:"text-red-500"},$e={key:0,class:"text-red-500"},je=["value"],Me={key:0,class:"text-red-500"},He={class:"md:col-span-2"},Oe={class:"flex justify-end gap-2 pt-2"},qe=Object.assign({layout:ae},{__name:"Index-c1",props:{items:Object,departments:Array,filters:Object},setup(O){const n=O,F=b(()=>n.items?.data??[]),q=b(()=>n.items?.total??0),y=b(()=>n.items?.per_page??10),I=b(()=>n.items?.current_page??1),z=b(()=>(I.value-1)*y.value),V=g(n.filters?.sort_field??"id"),S=g(n.filters?.sort_order??1),m=g(n.filters?.q??""),p=g(n.filters?.groupBy??null),r=g({name:n.filters?.name??"",code:n.filters?.code??"",branch:n.filters?.branch??"",unit:n.filters?.unit??"",min_from:n.filters?.min_from??null,stock_from:n.filters?.stock_from??null,price_from:n.filters?.price_from??null,status:n.filters?.status??null}),K=b(()=>n.departments??[]),_=g(!1),w=g(null),A=g(!1),a=Z({name:"",code:"",unit:"",price:null,stock:null,description:"",department_id:null}),E=b(()=>w.value?"Ubah Barang":"Tambah Barang");function R(){w.value=null,a.reset(),a.department_id=K.value[0]?.id??null,_.value=!0}function G(o){w.value=o.id,a.name=o.name,a.code=o.code,a.unit=o.unit,a.price=o.price,a.stock=o.stock,a.department_id=o.department?.id??null,a.description=o.description,_.value=!0}function N(){_.value=!1}const L=b(()=>a.processing);function J(){w.value?a.put(`/items/${w.value}`,{onSuccess:()=>N()}):a.post("/items",{onSuccess:()=>N()})}function Y(o){confirm("Yakin ingin menghapus?")&&k.delete(`/items/${o.id}`)}function $(o){k.get(route("items.index"),{page:o.page+1,per_page:o.rows,q:m.value,groupBy:p.value,sort_field:V.value,sort_order:S.value,...r.value},{preserveState:!0,preserveScroll:!0,replace:!0})}function Q(o){V.value=o.sortField,S.value=o.sortOrder,k.get(route("items.index"),{page:1,per_page:y.value,q:m.value,groupBy:p.value,sort_field:V.value,sort_order:S.value,...r.value},{preserveState:!0,preserveScroll:!0,replace:!0})}let U;j(m,o=>{clearTimeout(U),U=setTimeout(()=>{k.get(route("items.index"),{page:1,per_page:y.value,q:o,groupBy:p.value,sort_field:V.value,sort_order:S.value,...r.value},{preserveState:!0,preserveScroll:!0,replace:!0})},400)}),j([p,r],()=>{clearTimeout(U),U=setTimeout(()=>{k.get(route("items.index"),{page:1,per_page:y.value,q:m.value,groupBy:p.value,sort_field:V.value,sort_order:S.value,...r.value},{preserveState:!0,preserveScroll:!0,replace:!0})},400)},{deep:!0});function W(o){k.get(route("items.show",o.id))}function X(o){const e=Number(o?.stock??0),C=Number(o?.min_stock??0);return isNaN(e)||isNaN(C)?"inline-block px-2 py-0.5 rounded text-xs":e<C?"inline-block px-2 py-0.5 rounded text-xs bg-red-100 text-red-700":e===C?"inline-block px-2 py-0.5 rounded text-xs bg-yellow-100 text-yellow-700":"inline-block px-2 py-0.5 rounded text-xs bg-gray-100 text-gray-700"}return(o,e)=>{const C=ee("Datatable");return c(),v("div",de,[t("div",pe,[e[24]||(e[24]=t("h1",{class:"text-2xl font-bold text-gray-800"},"Data Barang",-1)),i(s(P),{severity:"info",onClick:R},{default:x(()=>[...e[23]||(e[23]=[t("i",{class:"mr-2 lni lni-plus"},null,-1),te(" Tambah Data Barang ",-1)])]),_:1})]),t("div",me,[t("div",be,[e[28]||(e[28]=t("h1",{class:"text-xl font-semibold text-gray-800"},"Daftar Seluruh Barang",-1)),t("div",ge,[t("div",ve,[i(s(ne),null,{default:x(()=>[i(s(re),null,{default:x(()=>[...e[25]||(e[25]=[t("i",{class:"lni lni-search-alt"},null,-1)])]),_:1}),i(s(h),{modelValue:m.value,"onUpdate:modelValue":e[0]||(e[0]=l=>m.value=l),placeholder:"Pencarian kata kunci"},null,8,["modelValue"])]),_:1})]),t("div",ce,[e[27]||(e[27]=t("label",{class:"text-sm text-gray-600"},"Group by",-1)),d(t("select",{"onUpdate:modelValue":e[1]||(e[1]=l=>p.value=l),class:"h-9 px-2 rounded border border-gray-300 text-sm"},[...e[26]||(e[26]=[t("option",{value:null},"Tidak digrup",-1),t("option",{value:"branch"},"Cabang",-1),t("option",{value:"unit"},"Satuan",-1),t("option",{value:"status"},"Status",-1)])],512),[[B,p.value]])])])]),t("div",xe,[t("div",fe,[i(C,{config:{title:"Daftar Seluruh Barang",data:F.value,totalItems:q.value,currentPage:I.value,perPage:y.value,search:m.value,loading:A.value,columns:[{key:"no",label:"No",sortable:!1,style:"width:70px"},{key:"name",label:"Nama Barang",sortable:!0},{key:"code",label:"Kode",sortable:!0},{key:"branch",label:"Cabang",sortable:!0},{key:"unit",label:"Satuan",sortable:!0},{key:"min_stock",label:"Minimal Stok",sortable:!0,style:"text-align:right"},{key:"stock",label:"Stok Saat Ini",sortable:!0,style:"text-align:right"},{key:"price",label:"Harga",sortable:!0,style:"text-align:right"},{key:"status",label:"Status",sortable:!0},{key:"actions",label:"Aksi",sortable:!1,style:"width:150px;text-align:center"}]},onSortChange:e[11]||(e[11]=({key:l,asc:D})=>Q({sortField:l,sortOrder:D?1:-1})),onSearchChange:e[12]||(e[12]=l=>m.value.value=l),onPageChanged:e[13]||(e[13]=l=>$({page:l-1,rows:y.value.value})),onPerPageChanged:e[14]||(e[14]=l=>$({page:0,rows:l}))},{addFilter:x(()=>[t("div",ye,[e[30]||(e[30]=t("label",{class:"text-sm text-gray-600"},"Kelompokkan Berdasarkan",-1)),d(t("select",{"onUpdate:modelValue":e[2]||(e[2]=l=>p.value=l),class:"h-9 px-3 rounded-xl border border-gray-300 text-sm"},[...e[29]||(e[29]=[t("option",{value:null},"Tidak digrup",-1),t("option",{value:"branch"},"Cabang",-1),t("option",{value:"unit"},"Satuan",-1),t("option",{value:"status"},"Status",-1)])],512),[[B,p.value]])])]),filterHeader:x(()=>[e[32]||(e[32]=t("th",null,null,-1)),t("th",null,[d(t("input",{"onUpdate:modelValue":e[3]||(e[3]=l=>r.value.name=l),placeholder:"Cari Nama",class:"px-3 h-9 w-full text-sm bg-white rounded-xl border border-gray-300"},null,512),[[f,r.value.name]])]),t("th",null,[d(t("input",{"onUpdate:modelValue":e[4]||(e[4]=l=>r.value.code=l),placeholder:"Kode",class:"px-3 h-9 w-full text-sm bg-white rounded-xl border border-gray-300"},null,512),[[f,r.value.code]])]),t("th",null,[d(t("input",{"onUpdate:modelValue":e[5]||(e[5]=l=>r.value.branch=l),placeholder:"Cabang",class:"px-3 h-9 w-full text-sm bg-white rounded-xl border border-gray-300"},null,512),[[f,r.value.branch]])]),t("th",null,[d(t("input",{"onUpdate:modelValue":e[6]||(e[6]=l=>r.value.unit=l),placeholder:"Satuan",class:"px-3 h-9 w-full text-sm bg-white rounded-xl border border-gray-300"},null,512),[[f,r.value.unit]])]),t("th",null,[d(t("input",{"onUpdate:modelValue":e[7]||(e[7]=l=>r.value.min_from=l),placeholder:"Min ≥",class:"px-3 h-9 w-full text-sm bg-white rounded-xl border border-gray-300 text-right"},null,512),[[f,r.value.min_from,void 0,{number:!0}]])]),t("th",null,[d(t("input",{"onUpdate:modelValue":e[8]||(e[8]=l=>r.value.stock_from=l),placeholder:"Stok ≥",class:"px-3 h-9 w-full text-sm bg-white rounded-xl border border-gray-300 text-right"},null,512),[[f,r.value.stock_from,void 0,{number:!0}]])]),t("th",null,[d(t("input",{"onUpdate:modelValue":e[9]||(e[9]=l=>r.value.price_from=l),placeholder:"Harga ≥",class:"px-3 h-9 w-full text-sm bg-white rounded-xl border border-gray-300 text-right"},null,512),[[f,r.value.price_from,void 0,{number:!0}]])]),t("th",null,[d(t("select",{"onUpdate:modelValue":e[10]||(e[10]=l=>r.value.status=l),class:"px-3 h-9 w-full text-sm bg-white rounded-xl border border-gray-300"},[...e[31]||(e[31]=[t("option",{value:null},"Semua",-1),t("option",{value:"aktif"},"Aktif",-1),t("option",{value:"nonaktif"},"Nonaktif",-1)])],512),[[B,r.value.status]])]),e[33]||(e[33]=t("th",null,null,-1))]),body:x(()=>[(c(!0),v(M,null,H(F.value,(l,D)=>(c(),v("tr",{key:l.id,class:"hover:bg-gray-50"},[t("td",ke,u(z.value+D+1),1),t("td",he,u(l.name),1),t("td",Ve,u(l.code),1),t("td",Se,u(l.branch?.name||"-"),1),t("td",_e,u(l.unit||"-"),1),t("td",we,u(l.min_stock??"-"),1),t("td",Ce,[t("span",{class:le(X(l))},u(l.stock??0),3)]),t("td",Ue,"Rp"+u(new Intl.NumberFormat("id-ID").format(l.price||0)),1),t("td",Be,u(l.status||"-"),1),t("td",Ne,[t("div",De,[t("button",{type:"button",class:"px-2 h-8 text-xs bg-white border rounded-xl",onClick:()=>W(l)},"Lihat",8,Te),t("button",{type:"button",class:"w-8 h-8 text-white bg-indigo-500 rounded-xl",onClick:()=>G(l)},[...e[34]||(e[34]=[t("i",{class:"lni lni-pencil-1"},null,-1)])],8,Pe),t("button",{type:"button",class:"w-8 h-8 text-white bg-red-500 rounded-xl",onClick:()=>Y(l)},[...e[35]||(e[35]=[t("i",{class:"lni lni-trash-3"},null,-1)])],8,Fe)])])]))),128))]),_:1},8,["config"])])])]),i(s(oe),{visible:_.value,"onUpdate:visible":e[22]||(e[22]=l=>_.value=l),modal:"",header:E.value,style:{width:"42rem"}},{default:x(()=>[t("form",{onSubmit:se(J,["prevent"]),class:"space-y-4"},[t("div",Ie,[t("div",null,[e[36]||(e[36]=t("label",{class:"block text-sm text-gray-600 mb-1"},"Nama Barang",-1)),i(s(h),{modelValue:s(a).name,"onUpdate:modelValue":e[15]||(e[15]=l=>s(a).name=l),placeholder:"Nama",class:"w-full"},null,8,["modelValue"]),s(a).errors.name?(c(),v("small",Ke,u(s(a).errors.name),1)):T("",!0)]),t("div",null,[e[37]||(e[37]=t("label",{class:"block text-sm text-gray-600 mb-1"},"Kode",-1)),i(s(h),{modelValue:s(a).code,"onUpdate:modelValue":e[16]||(e[16]=l=>s(a).code=l),placeholder:"Kode",class:"w-full"},null,8,["modelValue"]),s(a).errors.code?(c(),v("small",$e,u(s(a).errors.code),1)):T("",!0)]),t("div",null,[e[39]||(e[39]=t("label",{class:"block text-sm text-gray-600 mb-1"},"Departemen",-1)),d(t("select",{"onUpdate:modelValue":e[17]||(e[17]=l=>s(a).department_id=l),class:"w-full rounded border-gray-300 focus:ring-indigo-500 focus:border-indigo-500"},[e[38]||(e[38]=t("option",{value:null,disabled:""},"Pilih departemen",-1)),(c(!0),v(M,null,H(K.value,l=>(c(),v("option",{key:l.id,value:l.id},u(l.name),9,je))),128))],512),[[B,s(a).department_id,void 0,{number:!0}]]),s(a).errors.department_id?(c(),v("small",Me,u(s(a).errors.department_id),1)):T("",!0)]),t("div",null,[e[40]||(e[40]=t("label",{class:"block text-sm text-gray-600 mb-1"},"Satuan",-1)),i(s(h),{modelValue:s(a).unit,"onUpdate:modelValue":e[18]||(e[18]=l=>s(a).unit=l),placeholder:"Satuan (sak, pcs)",class:"w-full"},null,8,["modelValue"])]),t("div",null,[e[41]||(e[41]=t("label",{class:"block text-sm text-gray-600 mb-1"},"Harga",-1)),i(s(h),{modelValue:s(a).price,"onUpdate:modelValue":e[19]||(e[19]=l=>s(a).price=l),modelModifiers:{number:!0},placeholder:"Harga",class:"w-full"},null,8,["modelValue"])]),t("div",null,[e[42]||(e[42]=t("label",{class:"block text-sm text-gray-600 mb-1"},"Stok",-1)),i(s(h),{modelValue:s(a).stock,"onUpdate:modelValue":e[20]||(e[20]=l=>s(a).stock=l),modelModifiers:{number:!0},placeholder:"Stok",class:"w-full"},null,8,["modelValue"])]),t("div",He,[e[43]||(e[43]=t("label",{class:"block text-sm text-gray-600 mb-1"},"Keterangan",-1)),i(s(ie),{modelValue:s(a).description,"onUpdate:modelValue":e[21]||(e[21]=l=>s(a).description=l),rows:"3",autoResize:"",placeholder:"Keterangan",class:"w-full"},null,8,["modelValue"])])]),t("div",Oe,[i(s(P),{type:"submit",label:"Simpan",icon:"pi pi-check",loading:L.value},null,8,["loading"]),i(s(P),{type:"button",label:"Batal",severity:"secondary",icon:"pi pi-times",onClick:N})])],32)]),_:1},8,["visible","header"])])}}}),et=ue(qe,[["__scopeId","data-v-95a295c8"]]);export{et as default};
