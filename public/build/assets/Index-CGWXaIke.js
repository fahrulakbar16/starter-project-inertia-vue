import{y as ne,d as u,z,H as L,x as K,s as de,U as ce,e as n,o as l,b as i,a as e,c as G,f as M,E as S,G as R,n as h,F as W,i as ue,t as c,h as v,w as k,bt as J,bq as j,K as q,T as A,p as Y}from"./app-CJkCV51W.js";import{_ as pe}from"./AppLayout-BlEKf3Fz.js";import{_ as ge}from"./Breadcrumb-BJQpsGcc.js";import{_ as me}from"./Pagination-C2dOEo8X.js";import{_ as ye}from"./ConfirmModal-DAlWp-FQ.js";import{S as fe}from"./SearchIcon-B0safoHl.js";import{S as be}from"./ShowIcon-CiA5nZAB.js";import{E as xe}from"./EditIcon-B9T5EQzJ.js";import{T as ve}from"./TrashIcon-DSAHmBPH.js";import{U as Q,D as X}from"./DownIcon-C_yWQF6q.js";import{_ as we}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./FlashMessage-D4C-FUm8.js";import"./LayoutShell-FWpWJLvi.js";import"./useAuth-DvuTgkfF.js";import"./LayoutShell.vue_vue_type_style_index_0_lang-CRqqKi3W.js";const _e={class:"flex overflow-hidden flex-col gap-3 px-3 h-full",key:"reports-page"},he={class:"flex z-10 justify-between items-center h-10"},ke={class:"flex overflow-hidden flex-col bg-white rounded-lg border border-gray-200"},je={class:"flex flex-col gap-2 px-8 py-4 border-b border-gray-200 sm:flex-row sm:items-center sm:justify-between"},Ue={class:"flex gap-3 items-center"},Ce={class:"relative"},Te={class:"absolute left-4 top-1/2 -translate-y-1/2"},De={class:"overflow-auto","data-simplebar":""},Le={class:"min-w-full text-sm table-fixed"},Me={class:"flex gap-2 justify-center items-center px-3"},Se={class:"flex flex-col items-center"},Re={class:"flex gap-2 justify-center items-center px-3"},Ie={class:"flex flex-col items-center"},Oe={class:"py-2.5 border-gray-200 border-y"},$e={class:"flex justify-center items-center whitespace-nowrap"},Be={class:"px-3 text-gray-500"},Ee={class:"py-2.5 border border-gray-200"},Pe={class:"flex justify-center items-center px-3"},Fe=["src"],Ve={key:1,class:"flex justify-center items-center w-12 h-12 text-xs text-gray-500 bg-gray-200 rounded"},He={class:"py-2.5 border border-gray-200"},Ne={class:"flex items-center px-3 whitespace-nowrap"},ze={class:"font-medium text-gray-800"},Ke={class:"py-2.5 border border-gray-200"},Ge={class:"px-3 text-gray-600 truncate max-w-[420px]"},We={class:"py-2.5 border border-gray-200"},Je={class:"flex justify-center items-center px-3 whitespace-nowrap"},qe={class:"text-gray-500"},Ae={class:"py-2.5 border border-gray-200"},Ye={class:"flex justify-center items-center px-3 whitespace-nowrap"},Qe={class:"text-gray-500"},Xe={class:"py-2.5 border-gray-200 border-y"},Ze={class:"flex gap-3 justify-center px-4 whitespace-nowrap"},et=["onClick"],tt=["onClick"],st=["onClick"],rt={key:1},ot={key:0,class:"flex justify-between items-center px-4 py-3 bg-gray-50 border-t border-gray-200"},at={class:"text-sm text-gray-700"},lt={class:"font-medium"},it={class:"font-medium"},nt={class:"font-medium"},dt={class:"p-6 space-y-6 max-h-[75vh] overflow-y-auto"},ct={key:0,class:"flex justify-center"},ut=["src","alt"],pt={key:1,class:"flex justify-center items-center h-48 bg-gray-100 rounded-lg border border-gray-200"},gt={class:"text-lg font-semibold text-gray-900"},mt={class:"text-gray-700 whitespace-pre-wrap"},yt={class:"grid grid-cols-2 gap-4 pt-4 border-t"},ft={class:"text-gray-900"},bt={class:"text-gray-900"},xt={id:"editModalDesc",class:"p-5 space-y-4 max-h-[75vh] overflow-y-auto"},vt={class:"grid grid-cols-1 gap-4 sm:grid-cols-2"},wt={class:"flex gap-3 justify-start items-end"},_t=["src"],ht={key:1,class:"flex justify-center items-center w-28 h-28 text-xs text-gray-500 bg-gray-50 rounded border"},kt={class:"flex gap-3 justify-end px-5 py-4 bg-gray-50 rounded-b-xl border-t"},jt=["disabled"],Ut={key:0},Ct={key:1},Tt=Object.assign({layout:pe},{__name:"Index",props:{reports:Object,sort_by:String,sort_direction:String,search:String,filters:Object},setup(Z){const m=Z,d=ne(()=>m.reports),w=u(m.search||""),g=u(m.sort_by||"created_at"),p=u(m.sort_direction||"desc"),I=u(m.reports?.per_page??10);let O=null;z(w,()=>{clearTimeout(O),O=setTimeout(()=>{_({page:1})},400)}),z(I,()=>{_({page:1})});function $(r){return r?new Date(r).toLocaleDateString("id-ID",{day:"2-digit",month:"short",year:"numeric"}):"-"}function _({page:r=d.value?.current_page||1}={}){L.get(route("reports.index"),{page:r,per_page:I.value,search:w.value,sort_by:g.value,sort_direction:p.value},{preserveScroll:!0,preserveState:!0,replace:!0,onStart:()=>{typeof window<"u"&&(window.__suppressProgress=!0)},onFinish:()=>{typeof window<"u"&&(window.__suppressProgress=!1)}})}function B(r){["title","created_at"].includes(r)&&(g.value===r?p.value=p.value==="asc"?"desc":"asc":(g.value=r,p.value="asc"),_({page:1}))}const U=u(!1),y=u(null);function ee(r){y.value=r,U.value=!0}function E(){y.value=null,U.value=!1}function te(){y.value&&L.delete(route("reports.destroy",y.value.id),{onSuccess:()=>{E()},preserveScroll:!0})}const C=u(!1),o=K({id:null,title:"",description:"",image:"",user:null,created_at:""});function se(r){o.id=r.id,o.title=r.title||"",o.description=r.description||"",o.image=r.image||"",o.user=r.user||null,o.created_at=r.created_at||"",C.value=!0,V()}function f(){C.value=!1,D(),o.id=null,o.title="",o.description="",o.image="",o.user=null,o.created_at=""}function re(){const r={id:o.id,title:o.title,description:o.description,image:o.image,user:o.user,created_at:o.created_at};f(),Y(()=>{H(r)})}const T=u(!1),b=u(!1),P=u(null),F=u(""),s=K({id:null,title:"",description:"",image:null,previewUrl:"",existingImage:""});function V(){F.value=document.body.style.overflow,document.body.style.overflow="hidden"}function D(){document.body.style.overflow=F.value||""}function H(r){s.id=r.id,s.title=r.title||"",s.description=r.description||"",s.image=null,s.existingImage=r.image?`/storage/${r.image}`:"",s.previewUrl&&s.previewUrl.startsWith("blob:")&&URL.revokeObjectURL(s.previewUrl),s.previewUrl=s.existingImage,T.value=!0,V(),Y(()=>{P.value?.focus()})}function x(){T.value=!1,D(),s.previewUrl&&s.previewUrl.startsWith("blob:")&&URL.revokeObjectURL(s.previewUrl),s.id=null,s.title="",s.description="",s.image=null,s.previewUrl="",s.existingImage=""}de(()=>{s.previewUrl&&s.previewUrl.startsWith("blob:")&&URL.revokeObjectURL(s.previewUrl),D()});function oe(r){const t=r.target.files?.[0];s.image=t||null,s.previewUrl&&s.previewUrl.startsWith("blob:")&&URL.revokeObjectURL(s.previewUrl),s.previewUrl=t?URL.createObjectURL(t):s.existingImage}function ae(){if(!s.id)return;b.value=!0;const r=new FormData;r.append("_method","PUT"),r.append("title",s.title),r.append("description",s.description||""),s.image&&r.append("image",s.image),L.post(route("reports.update",s.id),r,{preserveScroll:!0,onSuccess:()=>{b.value=!1,x(),_({})},onError:()=>{b.value=!1}})}return(r,t)=>{const le=ce("Head");return l(),n(W,null,[i(le,{title:"Laporan Karyawan"}),e("div",_e,[e("div",he,[i(ge,{items:[{label:"Laporan"},{label:"Data Laporan"}]})]),e("div",ke,[e("div",je,[t[7]||(t[7]=e("div",{class:"font-bold text-gray-700 md:text-xl"}," Laporan Karyawan ",-1)),e("div",Ue,[e("div",Ce,[e("div",Te,[i(fe,{class:"text-gray-400"})]),S(e("input",{"onUpdate:modelValue":t[0]||(t[0]=a=>w.value=a),type:"text",placeholder:"Cari laporan...",class:"h-10 w-full rounded-lg border border-gray-200 bg-transparent py-2.5 pl-12 pr-4 text-sm text-gray-800 placeholder:text-gray-400 focus:border-blue-300 focus:outline-hidden focus:ring-3 focus:ring-blue-500/10 xl:w-[260px]"},null,512),[[R,w.value]])])])]),e("div",De,[e("table",Le,[t[16]||(t[16]=e("colgroup",null,[e("col",{style:{width:"64px"}}),e("col",{style:{width:"120px"}}),e("col",{style:{width:"260px"}}),e("col"),e("col",{style:{width:"200px"}}),e("col",{style:{width:"160px"}}),e("col",{style:{width:"140px"}})],-1)),e("thead",null,[e("tr",null,[t[10]||(t[10]=e("th",{class:"py-2.5 bg-gray-100 border-gray-200 border-y"},[e("div",{class:"flex justify-center items-center px-3"},[e("p",{class:"flex flex-col items-center font-medium text-gray-500 whitespace-nowrap"}," No. ")])],-1)),t[11]||(t[11]=e("th",{class:"py-3 bg-gray-100 border border-gray-200"},[e("div",{class:"flex justify-center items-center px-3"},[e("p",{class:"font-medium text-gray-500 whitespace-nowrap"}," Gambar ")])],-1)),e("th",{onClick:t[1]||(t[1]=a=>B("title")),class:"py-3 bg-gray-100 border border-gray-200 cursor-pointer"},[e("div",Me,[t[8]||(t[8]=e("p",{class:"font-medium text-gray-500 whitespace-nowrap"}," Judul ",-1)),e("div",Se,[i(Q,{class:h(["-mb-1",g.value==="title"&&p.value==="asc"?"text-gray-900":"text-gray-400"])},null,8,["class"]),i(X,{class:h(["-mt-1",g.value==="title"&&p.value==="desc"?"text-gray-900":"text-gray-400"])},null,8,["class"])])])]),t[12]||(t[12]=e("th",{class:"py-3 bg-gray-100 border border-gray-200"},[e("div",{class:"flex justify-center items-center px-3"},[e("p",{class:"font-medium text-gray-500 whitespace-nowrap"}," Deskripsi ")])],-1)),t[13]||(t[13]=e("th",{class:"py-3 bg-gray-100 border border-gray-200"},[e("div",{class:"flex justify-center items-center px-3"},[e("p",{class:"font-medium text-gray-500 whitespace-nowrap"}," Dibuat Oleh ")])],-1)),e("th",{onClick:t[2]||(t[2]=a=>B("created_at")),class:"py-3 bg-gray-100 border border-gray-200 cursor-pointer"},[e("div",Re,[t[9]||(t[9]=e("p",{class:"font-medium text-gray-500 whitespace-nowrap"}," Tanggal ",-1)),e("div",Ie,[i(Q,{class:h(["-mb-1",g.value==="created_at"&&p.value==="asc"?"text-gray-900":"text-gray-400"])},null,8,["class"]),i(X,{class:h(["-mt-1",g.value==="created_at"&&p.value==="desc"?"text-gray-900":"text-gray-400"])},null,8,["class"])])])]),t[14]||(t[14]=e("th",{class:"py-3 bg-gray-100 border-gray-200 border-y"},[e("div",{class:"flex justify-center items-center"},[e("p",{class:"font-medium text-gray-500 whitespace-nowrap"}," Aksi ")])],-1))])]),e("tbody",null,[d.value.data&&d.value.data.length?(l(!0),n(W,{key:0},ue(d.value.data,(a,ie)=>(l(),n("tr",{key:a.id,class:"cursor-pointer hover:bg-gray-100"},[e("td",Oe,[e("div",$e,[e("p",Be,c((d.value.current_page-1)*d.value.per_page+ie+1)+". ",1)])]),e("td",Ee,[e("div",Pe,[a.image?(l(),n("img",{key:0,src:`/storage/${a.image}`,alt:"Report Image",class:"object-cover w-12 h-12 rounded"},null,8,Fe)):(l(),n("div",Ve," N/A "))])]),e("td",He,[e("div",Ne,[e("p",ze,c(a.title),1)])]),e("td",Ke,[e("div",Ge,c(a.description||"-"),1)]),e("td",We,[e("div",Je,[e("p",qe,c(a.user?.name||"-"),1)])]),e("td",Ae,[e("div",Ye,[e("p",Qe,c($(a.created_at)),1)])]),e("td",Xe,[e("div",Ze,[e("button",{onClick:N=>se(a),"aria-label":"Lihat detail"},[i(be,{class:"text-blue-400 hover:text-blue-600 transition-colors"})],8,et),e("button",{onClick:N=>H(a),"aria-label":"Edit cepat"},[i(xe,{class:"text-yellow-500 hover:text-yellow-600 transition-colors"})],8,tt),e("button",{onClick:N=>ee(a),"aria-label":"Hapus"},[i(ve,{class:"text-red-500"})],8,st)])])]))),128)):(l(),n("tr",rt,[...t[15]||(t[15]=[e("td",{colspan:"7",class:"py-6 font-medium text-center text-gray-500"}," Tidak ada laporan ditemukan ",-1)])]))])])]),d.value&&d.value.data&&d.value.data.length?(l(),n("div",ot,[e("div",at,[t[17]||(t[17]=v(" Menampilkan ",-1)),e("span",lt,c(d.value.from),1),t[18]||(t[18]=v(" - ",-1)),e("span",it,c(d.value.to),1),t[19]||(t[19]=v(" dari ",-1)),e("span",nt,c(d.value.total),1),t[20]||(t[20]=v(" data ",-1))]),i(me,{pagination:d.value},null,8,["pagination"])])):M("",!0)]),i(ye,{show:U.value,question:"Yakin ingin menghapus laporan",selected:`${y.value?.title||""}`,title:"Hapus Laporan",confirmText:"Ya, Hapus!",maxWidth:"md",onClose:E,onConfirm:te},null,8,["show","selected"]),(l(),G(A,{to:"body"},[i(j,{name:"fade"},{default:k(()=>[C.value?(l(),n("div",{key:0,class:"fixed inset-0 z-[1000] flex items-center justify-center",onKeydown:J(f,["esc"])},[e("div",{class:"absolute inset-0 bg-black/40",onClick:f}),i(j,{name:"pop"},{default:k(()=>[e("div",{class:"relative w-[720px] max-w-[92vw] bg-white border border-gray-200 rounded-xl shadow-2xl",role:"dialog","aria-modal":"true",onClick:t[3]||(t[3]=q(()=>{},["stop"]))},[e("div",{class:"flex justify-between items-center px-6 py-4 border-b"},[t[22]||(t[22]=e("h3",{class:"text-xl font-semibold text-gray-800"}," Detail Laporan ",-1)),e("button",{class:"p-2 rounded-lg hover:bg-gray-100 transition-colors",onClick:f,"aria-label":"Tutup"},[...t[21]||(t[21]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",dt,[o.image?(l(),n("div",ct,[e("img",{src:`/storage/${o.image}`,alt:o.title,class:"max-w-full max-h-96 object-contain rounded-lg border border-gray-200"},null,8,ut)])):(l(),n("div",pt,[...t[23]||(t[23]=[e("div",{class:"text-center text-gray-500"},[e("svg",{class:"w-16 h-16 mx-auto mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})]),e("p",null,"Tidak ada gambar")],-1)])])),e("div",null,[t[24]||(t[24]=e("label",{class:"block text-sm font-medium text-gray-600 mb-2"},"Judul",-1)),e("p",gt,c(o.title),1)]),e("div",null,[t[25]||(t[25]=e("label",{class:"block text-sm font-medium text-gray-600 mb-2"},"Deskripsi",-1)),e("p",mt,c(o.description||"-"),1)]),e("div",yt,[e("div",null,[t[26]||(t[26]=e("label",{class:"block text-sm font-medium text-gray-600 mb-1"},"Dibuat Oleh",-1)),e("p",ft,c(o.user?.name||"-"),1)]),e("div",null,[t[27]||(t[27]=e("label",{class:"block text-sm font-medium text-gray-600 mb-1"},"Tanggal",-1)),e("p",bt,c($(o.created_at)),1)])])]),e("div",{class:"flex justify-end gap-3 px-6 py-4 border-t bg-gray-50 rounded-b-xl"},[e("button",{onClick:f,class:"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors"}," Tutup "),e("button",{onClick:re,class:"px-4 py-2 text-white bg-blue-600 rounded-lg hover:bg-blue-700 transition-colors"}," Edit Laporan ")])])]),_:1})],32)):M("",!0)]),_:1})])),(l(),G(A,{to:"body"},[i(j,{name:"fade"},{default:k(()=>[T.value?(l(),n("div",{key:0,class:"fixed inset-0 z-[1000] flex items-center justify-center",onKeydown:J(x,["esc"])},[e("div",{class:"absolute inset-0 bg-black/40",onClick:x}),i(j,{name:"pop"},{default:k(()=>[e("div",{class:"relative w-[720px] max-w-[92vw] bg-white border border-gray-200 rounded-xl shadow-2xl",role:"dialog","aria-modal":"true","aria-labelledby":"editModalTitle","aria-describedby":"editModalDesc",onClick:t[6]||(t[6]=q(()=>{},["stop"]))},[e("div",{class:"flex justify-between items-center px-5 py-3 border-b"},[t[28]||(t[28]=e("h3",{id:"editModalTitle",class:"text-lg font-semibold text-gray-800"}," Edit Laporan ",-1)),e("button",{class:"p-2 rounded hover:bg-gray-100",onClick:x,"aria-label":"Tutup"}," âœ• ")]),e("div",xt,[e("div",null,[t[29]||(t[29]=e("label",{class:"block text-sm font-medium text-gray-700"},[v("Judul "),e("span",{class:"text-red-500"},"*")],-1)),S(e("input",{ref_key:"editTitleRef",ref:P,"onUpdate:modelValue":t[4]||(t[4]=a=>s.title=a),type:"text",class:"px-3 py-2 mt-1 w-full text-gray-800 rounded-lg border border-gray-300 focus:outline-hidden focus:ring-2 focus:ring-blue-500/40 focus:border-blue-400",placeholder:"Masukkan judul laporan"},null,512),[[R,s.title,void 0,{trim:!0}]])]),e("div",null,[t[30]||(t[30]=e("label",{class:"block text-sm font-medium text-gray-700"},"Deskripsi",-1)),S(e("textarea",{"onUpdate:modelValue":t[5]||(t[5]=a=>s.description=a),rows:"4",class:"px-3 py-2 mt-1 w-full text-gray-800 rounded-lg border border-gray-300 focus:outline-hidden focus:ring-2 focus:ring-blue-500/40 focus:border-blue-400",placeholder:"Tulis deskripsi singkat"},null,512),[[R,s.description,void 0,{trim:!0}]])]),e("div",vt,[e("div",null,[t[31]||(t[31]=e("label",{class:"block text-sm font-medium text-gray-700"},"Gambar (opsional)",-1)),e("input",{type:"file",accept:"image/*",onChange:oe,class:"block mt-1 w-full text-sm"},null,32),t[32]||(t[32]=e("p",{class:"mt-1 text-xs text-gray-500"}," Format: JPG/PNG. Ukuran maksimal mengikuti validasi server. ",-1))]),e("div",wt,[t[33]||(t[33]=e("div",{class:"text-sm text-gray-500"}," Preview: ",-1)),s.previewUrl?(l(),n("img",{key:0,src:s.previewUrl,alt:"Preview",class:"object-cover w-28 h-28 rounded border"},null,8,_t)):(l(),n("div",ht," Tidak ada "))])])]),e("div",kt,[e("button",{onClick:x,class:"px-4 h-10 text-gray-700 rounded-lg border border-gray-300 hover:bg-gray-100"}," Batal "),e("button",{disabled:b.value||!s.title,onClick:ae,class:"px-4 h-10 text-white bg-blue-600 rounded-lg hover:bg-blue-700 disabled:opacity-60 disabled:cursor-not-allowed"},[b.value?(l(),n("span",Ut,"Menyimpan...")):(l(),n("span",Ct,"Simpan Perubahan"))],8,jt)])])]),_:1})],32)):M("",!0)]),_:1})]))])],64)}}}),zt=we(Tt,[["__scopeId","data-v-aeff27d7"]]);export{zt as default};
