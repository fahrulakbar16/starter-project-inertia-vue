import{y as _,d as v,z as ee,H as w,I as be,e as n,o,b as k,a as e,g as L,D as xe,c as te,f as $,E as x,G as h,h as P,t as l,w as T,J as se,F as N,i as J,n as j,K as G}from"./app-CJkCV51W.js";import{_ as ae}from"./AvatarInitials-XMdLKKbn.js";import{_ as ye}from"./AppLayout-BlEKf3Fz.js";import{_ as _e}from"./Breadcrumb-BJQpsGcc.js";import{_ as ve}from"./Pagination-C2dOEo8X.js";import{_ as le}from"./SelectPemakaian-bo5sz744.js";import{u as he}from"./useAuth-DvuTgkfF.js";import{s as oe}from"./index-D_jvqarE.js";import"./FlashMessage-D4C-FUm8.js";import"./LayoutShell-FWpWJLvi.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./LayoutShell.vue_vue_type_style_index_0_lang-CRqqKi3W.js";import"./index-BD4Vkpl0.js";import"./index-B9o0VbjL.js";const ke={class:"flex overflow-hidden flex-col gap-3 px-3 h-full"},je={class:"flex justify-between items-center h-10"},Se={class:"flex overflow-hidden flex-col bg-white rounded-lg border border-gray-200"},Ce={class:"flex flex-col gap-2 px-6 py-3 border-b md:flex-row md:items-center md:justify-between"},$e={class:"relative"},Ne={class:"flex gap-2 items-center"},Me={class:"relative"},Ve={class:"font-medium"},Ee={key:0,class:"absolute right-0 z-10 mt-2 w-52 bg-white rounded-lg border shadow-lg"},Te={class:"py-1 text-sm"},Be={class:"px-6 py-3 border-b"},De={class:"grid grid-cols-2 gap-3 md:grid-cols-5"},Ue={class:"flex gap-2 items-center p-3 rounded-lg border"},Ae={class:"inline-flex justify-center items-center w-6 h-6 font-semibold text-indigo-600 bg-indigo-100 rounded-full"},Ke={class:"flex gap-2 items-center p-3 rounded-lg border"},we={class:"inline-flex justify-center items-center w-6 h-6 font-semibold text-emerald-600 bg-emerald-100 rounded-full"},Je={class:"flex gap-2 items-center p-3 rounded-lg border"},Ge={class:"inline-flex justify-center items-center w-6 h-6 font-semibold text-orange-600 bg-orange-100 rounded-full"},Fe={class:"flex gap-2 items-center p-3 rounded-lg border"},Ie={class:"inline-flex justify-center items-center w-6 h-6 font-semibold text-teal-600 bg-teal-100 rounded-full"},ze={class:"flex gap-2 items-center p-3 rounded-lg border"},Oe={class:"inline-flex justify-center items-center w-6 h-6 font-semibold text-red-600 bg-red-100 rounded-full"},Le={class:"overflow-auto","data-simplebar":""},Pe={class:"min-w-full text-sm"},Re={class:"px-2 py-2 bg-gray-50 border border-gray-200"},qe={class:"[&>div>button]:h-9 [&>div>button]:text-xs [&>div>button]:px-2"},He={class:"px-2 py-2 bg-gray-50 border border-gray-200"},Ye={class:"[&>div>button]:h-9 [&>div>button]:text-xs [&>div>button]:px-2"},Qe={class:"flex flex-col"},We={class:"text-gray-900 dark:text-gray-100"},Xe={class:"px-2 py-2 bg-gray-50 border border-gray-200"},Ze={class:"flex flex-col gap-1"},et={class:"px-2 py-2 bg-gray-50 border border-gray-200"},tt={class:"flex flex-col gap-1"},st={class:"px-2 py-2 bg-gray-50 border-gray-200 border-y"},at=["value"],lt=["onClick"],ot={colspan:9,class:"px-4 py-2 font-semibold text-left text-gray-600 bg-gray-50"},nt={class:"inline-flex gap-2 items-center"},rt={class:"ml-2 text-xs text-gray-500"},dt=["onClick"],it={class:"p-3 text-center"},ut={class:"p-3"},pt={class:"flex gap-3 items-center"},ct={class:"flex flex-col"},mt={class:"font-medium text-gray-800"},gt={class:"p-3"},ft={class:"p-3"},bt={key:0},xt={key:0,class:"text-xs text-gray-500"},yt={key:1},_t={class:"p-3 text-center"},vt={class:"p-3 text-center"},ht={class:"p-3 text-center"},kt={class:"p-3 text-center"},jt={key:1},St={class:"p-3 text-center"},Ct={class:"flex gap-2 justify-center"},$t=["disabled","onClick"],Nt=["disabled","onClick"],Mt=["onClick"],Vt={class:"p-3 text-center"},Et={class:"p-3"},Tt={class:"flex gap-3 items-center"},Bt=["src"],Dt={class:"flex flex-col"},Ut={class:"font-medium text-gray-800"},At={class:"text-xs text-gray-500"},Kt={class:"p-3"},wt={class:"p-3"},Jt={key:0},Gt={key:0,class:"text-xs text-gray-500"},Ft={key:1},It={class:"p-3 text-center"},zt={class:"p-3 text-center"},Ot={class:"p-3 text-center"},Lt={class:"p-3 text-center"},Pt={key:1},Rt={class:"p-3 text-center"},qt={class:"flex gap-2 justify-center"},Ht=["disabled","onClick"],Yt=["disabled","onClick"],Qt={key:2,class:"border-b border-gray-200"},Wt={class:"flex flex-col gap-6"},Xt={class:"flex flex-col gap-4"},Zt={class:"flex flex-col gap-2"},es={class:"font-normal text-gray-500"},ts={class:"flex flex-col gap-2"},ss={class:"font-normal text-gray-500"},as={class:"flex flex-col gap-2"},ls={class:"font-normal text-gray-500"},os={class:"grid grid-cols-2 gap-4"},ns={class:"flex flex-col gap-2"},rs=["src"],ds={key:1,class:"flex justify-center items-center w-full h-48 bg-gray-100 rounded-md border border-gray-200"},is={class:"text-sm font-medium text-gray-700"},us={class:"flex flex-col gap-2"},ps=["src"],cs={key:1,class:"flex justify-center items-center w-full h-48 bg-gray-100 rounded-md border border-gray-200"},ms={class:"text-sm font-medium text-gray-700"},gs={class:"flex gap-4"},fs={class:"flex flex-col flex-1 gap-2"},bs={class:"font-normal text-gray-500"},xs={class:"flex flex-col flex-1 gap-2"},ys={class:"font-normal text-gray-500"},_s={class:"flex flex-col gap-4"},vs=["value"],hs={class:"flex gap-2 justify-end"},Ks=Object.assign({layout:ye},{__name:"Index",props:{attendances:Object,filters:Object,departments:Array,employees:Array,status_options:Array,groupBy:{type:String,default:null}},setup(f){const{can:R}=he(),ne=_(()=>R("presences.edit")),re=_(()=>R("presences.view")),de=[{label:"Absensi"},{label:"Absensi Karyawan"}],i=f,F=new Date,q=a=>a<10?`0${a}`:`${a}`,ie=`${F.getFullYear()}-${q(F.getMonth()+1)}-${q(F.getDate())}`,r=v({q:i.filters?.q||"",employee_id:i.filters?.employee_id??null,department_id:i.filters?.department_id??null,status:i.filters?.status??null,date:i.filters?.date??ie,date_from:i.filters?.date_from||"",date_to:i.filters?.date_to||"",time_in_from:i.filters?.time_in_from||"",time_in_to:i.filters?.time_in_to||"",time_out_from:i.filters?.time_out_from||"",time_out_to:i.filters?.time_out_to||""}),H={RUNNING:"bg-indigo-100 border border-indigo-400 text-indigo-800",COMPLETE:"bg-green-100 border border-green-400 text-green-800",SAKIT:"bg-orange-100 border border-orange-400 text-orange-800",CUTI:"bg-teal-100 border border-teal-400 text-teal-800",ABSEN:"bg-red-100 border border-red-400 text-red-800",default:"bg-gray-100 border border-gray-300 text-gray-700"};let Y=null;ee(()=>({...r.value}),()=>{clearTimeout(Y),Y=setTimeout(()=>z(),350)},{deep:!0});const B=v(!1);function ue(){B.value=!B.value}const m=v(i.groupBy||null),pe=_(()=>{const a={department:"Departemen",position:"Jabatan",shift:"Shift Kerja",status:"Status",date:"Tanggal"};return m.value&&a[m.value]||"Tidak digrup"});function S(a){m.value=a||null,B.value=!1,z()}function Q(a){if(!a)return null;const[t,s]=a.split(":").map(Number);return Number.isNaN(t)||Number.isNaN(s)?null:t*60+s}function ce(a){if(a==null)return"-";const t=Math.floor(a/60),s=a%60;return t<=0?`${s} Mnt`:`${t} Jam ${s} Mnt`}function I(a){return a==="ABSEN"?"Belum ada rekam jam":a}const M=_(()=>(i.attendances?.data||[]).map(t=>{const s=Q(t.jam_masuk),d=Q(t.jam_keluar),g=!!t.jam_masuk&&!t.jam_keluar,u=s!=null&&d!=null?Math.max(0,d-s):null,C=g?"Berjalanâ€¦":u!=null?ce(u):t.durasi||"-";let y=t.status||"";g&&(y="RUNNING"),!t.jam_masuk&&!t.jam_keluar&&!y&&(y="ABSEN");const fe=I(y);return{...t,durasi_display:C,status_display:y,status_display_mapped:fe}})),b=_(()=>{const a={running:0,complete:0,sakit:0,cuti:0,absen:0};for(const t of M.value)switch(t.status_display){case"RUNNING":a.running++;break;case"COMPLETE":a.complete++;break;case"SAKIT":a.sakit++;break;case"CUTI":a.cuti++;break;case"ABSEN":a.absen++;break}return a});function z(){w.get(route("presences.index"),{...r.value,groupBy:m.value},{preserveScroll:!0,preserveState:!0,replace:!0})}const D=v(new Set);function me(a){const t=new Set(D.value);t.has(a)?t.delete(a):t.add(a),D.value=t}const U=_(()=>{if(!m.value)return[];const a=i.attendances?.data||[],t=((i.attendances?.current_page||1)-1)*(i.attendances?.per_page||a.length),s=[],d={},g=u=>m.value==="department"?u.department||"-":m.value==="position"?u.position||"-":m.value==="shift"?u.shift||"-":m.value==="status"?u.status||"-":m.value==="date"&&u.date||"-";return a.forEach((u,C)=>{const y=g(u);d[y]||(d[y]=[]),d[y].push({data:u,no:t+C+1})}),Object.entries(d).forEach(([u,C])=>{s.push({__group:!0,key:u,label:u,count:C.length}),D.value.has(u)||s.push(...C)}),s}),O=be(),V=v(!1),E=v(!1),A=v(!1),p=_(()=>W.value||O.props.attendance||null);_(()=>p.value?.employee??null),_(()=>p.value?.shift??null);const W=v(null);function K(a){let t=null;if(m.value&&U.value.length){for(const s of U.value)if(!s.__group&&s.data?.id===a){t=s.data;break}}!t&&M.value.length&&(t=M.value.find(s=>s.id===a)),w.get(route("presences.show",{id:a}),{},{preserveScroll:!0,preserveState:!0,only:["attendance"],onSuccess:s=>{W.value=s.props.attendance,V.value=!0}})}ee(()=>O.props.attendance,a=>{if(A.value){V.value=!1,A.value=!1;return}V.value=!!a});const X={root:{class:"rounded-2xl"},header:{class:"px-6 pt-6 pb-2"},content:{class:"px-6 pb-2"},footer:{class:"px-6 pb-6"}},c=v({id:null,jam_masuk:"",jam_keluar:"",status:""});function Z(a){A.value=!0,w.get(route("presences.show",{id:a}),{},{preserveScroll:!0,preserveState:!0,only:["attendance"],onSuccess:()=>{const t=O.props.attendance,s=d=>d?d.match(/^\d{2}:\d{2}:\d{2}$/)?d.substring(0,5):d:"";c.value={id:t?.id||a,jam_masuk:s(t?.jam_masuk)||"",jam_keluar:s(t?.jam_keluar)||"",status:t?.status||""},E.value=!0},onError:()=>{A.value=!1,alert("Gagal memuat data absensi. Silakan coba lagi.")}})}function ge(){if(!c.value.id)return;const a=t=>t?t.match(/^\d{2}:\d{2}$/)?t+":00":t.match(/^\d{2}:\d{2}:\d{2}$/)?t:null:null;w.put(route("presences.update",{id:c.value.id}),{jam_masuk:a(c.value.jam_masuk),jam_keluar:a(c.value.jam_keluar),status:c.value.status||null},{preserveScroll:!0,preserveState:!1,onSuccess:()=>{E.value=!1,c.value={id:null,jam_masuk:"",jam_keluar:"",status:""},z()},onError:t=>{console.error("Error updating attendance:",t),alert("Gagal mengupdate absensi. Silakan coba lagi.")}})}return(a,t)=>(o(),n(N,null,[k(L(xe),{title:"Absensi Karyawan"}),e("div",ke,[e("div",je,[k(_e,{items:de})]),e("div",Se,[t[37]||(t[37]=e("div",{class:"px-6 py-3 text-xl font-semibold text-gray-800 border-b"}," Daftar Absensi Karyawan ",-1)),e("div",Ce,[e("div",$e,[x(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>r.value.q=s),type:"text",placeholder:"Cari...",class:"py-2.5 pr-8 pl-3 w-64 h-10 text-sm text-gray-800 bg-transparent rounded-lg border border-gray-200 focus:border-blue-300 focus:outline-hidden focus:ring-2 focus:ring-blue-500/20"},null,512),[[h,r.value.q]]),t[21]||(t[21]=e("span",{class:"absolute right-2 top-1/2 text-gray-400 -translate-y-1/2"},"ðŸ”",-1))]),e("div",Ne,[x(e("input",{type:"date","onUpdate:modelValue":t[1]||(t[1]=s=>r.value.date=s),class:"px-3 h-10 text-sm rounded-lg border border-gray-200"},null,512),[[h,r.value.date]]),e("div",Me,[e("button",{type:"button",onClick:ue,class:"px-3 h-10 text-sm text-gray-700 rounded-lg border border-gray-200 hover:bg-gray-50 whitespace-nowrap"},[t[22]||(t[22]=P(" Kelompokkan berdasarkan: ",-1)),e("span",Ve,l(pe.value),1)]),B.value?(o(),n("div",Ee,[e("ul",Te,[e("li",null,[e("button",{onClick:t[2]||(t[2]=s=>S(null)),class:"px-3 py-2 w-full text-left hover:bg-gray-50"}," Tidak digrup ")]),e("li",null,[e("button",{onClick:t[3]||(t[3]=s=>S("department")),class:"px-3 py-2 w-full text-left hover:bg-gray-50"}," Departemen ")]),e("li",null,[e("button",{onClick:t[4]||(t[4]=s=>S("position")),class:"px-3 py-2 w-full text-left hover:bg-gray-50"}," Jabatan ")]),e("li",null,[e("button",{onClick:t[5]||(t[5]=s=>S("shift")),class:"px-3 py-2 w-full text-left hover:bg-gray-50"}," Shift Kerja ")]),e("li",null,[e("button",{onClick:t[6]||(t[6]=s=>S("status")),class:"px-3 py-2 w-full text-left hover:bg-gray-50"}," Status ")]),e("li",null,[e("button",{onClick:t[7]||(t[7]=s=>S("date")),class:"px-3 py-2 w-full text-left hover:bg-gray-50"}," Tanggal ")])])])):$("",!0)])])]),e("div",Be,[e("div",De,[e("div",Ue,[e("span",Ae,l(b.value&&b.value.running||0),1),t[23]||(t[23]=e("span",{class:"text-sm text-gray-700"},"Berjalan",-1))]),e("div",Ke,[e("span",we,l(b.value&&b.value.complete||0),1),t[24]||(t[24]=e("span",{class:"text-sm text-gray-700"},"Selesai",-1))]),e("div",Je,[e("span",Ge,l(b.value&&b.value.sakit||0),1),t[25]||(t[25]=e("span",{class:"text-sm text-gray-700"},"Sakit",-1))]),e("div",Fe,[e("span",Ie,l(b.value&&b.value.cuti||0),1),t[26]||(t[26]=e("span",{class:"text-sm text-gray-700"},"Cuti",-1))]),e("div",ze,[e("span",Oe,l(b.value&&b.value.absen||0),1),t[27]||(t[27]=e("span",{class:"text-sm text-gray-700"},"Belum ada rekam jam",-1))])])]),e("div",Le,[e("table",Pe,[e("thead",null,[t[35]||(t[35]=e("tr",null,[e("th",{class:"p-3 bg-gray-100 border-gray-200 border-y"},[e("div",{class:"font-medium text-center text-gray-600"}," No ")]),e("th",{class:"p-3 bg-gray-100 border border-gray-200"},[e("div",{class:"font-medium text-left text-gray-600"}," Nama & Jabatan Pekerja ")]),e("th",{class:"p-3 bg-gray-100 border border-gray-200"},[e("div",{class:"font-medium text-left text-gray-600"}," Cabang / Departemen ")]),e("th",{class:"p-3 bg-gray-100 border border-gray-200"},[e("div",{class:"font-medium text-left text-gray-600"}," Jadwal ")]),e("th",{class:"p-3 bg-gray-100 border border-gray-200 w-32 max-w-[140px]"},[e("div",{class:"font-medium text-center text-gray-600"}," Jam Masuk ")]),e("th",{class:"p-3 bg-gray-100 border border-gray-200 w-32 max-w-[140px]"},[e("div",{class:"font-medium text-center text-gray-600"}," Jam Keluar ")]),e("th",{class:"p-3 bg-gray-100 border border-gray-200"},[e("div",{class:"font-medium text-center text-gray-600"}," Durasi Kerja ")]),e("th",{class:"p-3 bg-gray-100 border-gray-200 border-y"},[e("div",{class:"font-medium text-center text-gray-600"}," Status ")]),e("th",{class:"p-3 bg-gray-100 border-gray-200 border-y"},[e("div",{class:"font-medium text-center text-gray-600"}," Aksi ")])],-1)),e("tr",null,[t[31]||(t[31]=e("th",{class:"px-2 py-2 bg-gray-50 border-gray-200 border-y"},null,-1)),e("th",Re,[e("div",qe,[k(le,{modelValue:r.value.employee_id,"onUpdate:modelValue":t[8]||(t[8]=s=>r.value.employee_id=s),items:f.employees||[],label:"Semua"},null,8,["modelValue","items"])])]),e("th",He,[e("div",Ye,[k(le,{modelValue:r.value.department_id,"onUpdate:modelValue":t[9]||(t[9]=s=>r.value.department_id=s),items:f.departments||[],label:"Semua"},{item:T(({item:s})=>[e("div",Qe,[e("span",We,l(s.name)+l(s.branch?` - ${s.branch.name}`:""),1)])]),_:1},8,["modelValue","items"])])]),t[32]||(t[32]=e("th",{class:"px-2 py-2 bg-gray-50 border border-gray-200"},null,-1)),e("th",Xe,[e("div",Ze,[x(e("input",{"onUpdate:modelValue":t[10]||(t[10]=s=>r.value.time_in_from=s),type:"time",class:"px-2 w-full h-8 text-xs rounded border-gray-300 sm:text-sm",placeholder:"Dari"},null,512),[[h,r.value.time_in_from]]),t[28]||(t[28]=e("span",{class:"text-[10px] text-center text-gray-400"},"s/d",-1)),x(e("input",{"onUpdate:modelValue":t[11]||(t[11]=s=>r.value.time_in_to=s),type:"time",class:"px-2 w-full h-8 text-xs rounded border-gray-300 sm:text-sm",placeholder:"Sampai"},null,512),[[h,r.value.time_in_to]])])]),e("th",et,[e("div",tt,[x(e("input",{"onUpdate:modelValue":t[12]||(t[12]=s=>r.value.time_out_from=s),type:"time",class:"px-2 w-full h-8 text-xs rounded border-gray-300 sm:text-sm",placeholder:"Dari"},null,512),[[h,r.value.time_out_from]]),t[29]||(t[29]=e("span",{class:"text-[10px] text-center text-gray-400"},"s/d",-1)),x(e("input",{"onUpdate:modelValue":t[13]||(t[13]=s=>r.value.time_out_to=s),type:"time",class:"px-2 w-full h-8 text-xs rounded border-gray-300 sm:text-sm",placeholder:"Sampai"},null,512),[[h,r.value.time_out_to]])])]),t[33]||(t[33]=e("th",{class:"px-2 py-2 bg-gray-50 border border-gray-200"},null,-1)),e("th",st,[x(e("select",{"onUpdate:modelValue":t[14]||(t[14]=s=>r.value.status=s),class:"px-2 w-full h-9 text-xs rounded border-gray-300 sm:text-sm"},[t[30]||(t[30]=e("option",{value:null},"Semua",-1)),(o(!0),n(N,null,J(f.status_options,s=>(o(),n("option",{key:s,value:s},l(s),9,at))),128))],512),[[se,r.value.status]])]),t[34]||(t[34]=e("th",{class:"px-2 py-2 bg-gray-50 border-gray-200 border-y"},null,-1))])]),e("tbody",null,[m.value&&U.value.length?(o(!0),n(N,{key:0},J(U.value,(s,d)=>(o(),n(N,{key:s.__group?"g-"+d:s.data.id},[s.__group?(o(),n("tr",{key:0,class:"cursor-pointer select-none",onClick:g=>me(s.key)},[e("td",ot,[e("span",nt,[e("span",{class:j(["inline-block",D.value.has(s.key)?"rotate-[-90deg] transition-transform":"rotate-0 transition-transform"])},"â–¾",2),e("span",null,l(s.label),1),e("span",rt,"("+l(s.count)+")",1)])])],8,lt)):(o(),n("tr",{key:1,class:"border-b border-gray-200 transition-colors cursor-pointer hover:bg-gray-50",onClick:g=>s.data?.id&&K(s.data.id)},[e("td",it,l(s.no),1),e("td",ut,[e("div",pt,[k(ae,{name:s.data.employee.name,gender:s.data.employee?.gender||"",size:32},null,8,["name","gender"]),e("div",ct,[e("span",mt,l(s.data.employee.name),1)])])]),e("td",gt,l(s.data.department||"-"),1),e("td",ft,[s.data.shift&&(s.data.shift.name||s.data.shift.start_time)?(o(),n("span",bt,[P(l(s.data.shift.name||"Shift")+" ",1),s.data.shift.start_time||s.data.shift.end_time?(o(),n("span",xt," ("+l((s.data.shift.start_time||"").toString().slice(0,5))+" - "+l((s.data.shift.end_time||"").toString().slice(0,5))+") ",1)):$("",!0)])):(o(),n("span",yt,"-"))]),e("td",_t,l(s.data.jam_masuk||"-"),1),e("td",vt,l(s.data.jam_keluar||"-"),1),e("td",ht,l(s.data.durasi||"-"),1),e("td",kt,[s.data.status?(o(),n("span",{key:0,class:j(["inline-block px-2 py-1 rounded text-xs font-semibold",H[s.data.status]||"bg-gray-100 border border-gray-300 text-gray-700"])},l(I(s.data.status)||"-"),3)):(o(),n("span",jt,"-"))]),e("td",St,[e("div",Ct,[e("button",{type:"button",class:j(["px-2 py-1 text-xs rounded border",s.data?.id?"":"opacity-50 cursor-not-allowed"]),disabled:!s.data?.id,onClick:G(g=>s.data?.id&&K(s.data.id),["stop"])}," Detail ",10,$t),e("button",{type:"button",class:j(["px-2 py-1 text-xs rounded border",s.data?.id?"":"opacity-50 cursor-not-allowed"]),disabled:!s.data?.id,onClick:G(g=>s.data?.id&&Z(s.data.id),["stop"])}," Edit ",10,Nt)])])],8,dt))],64))),128)):M.value.length?(o(!0),n(N,{key:1},J(M.value,(s,d)=>(o(),n("tr",{key:s.id||d,class:"border-b border-gray-200 transition-colors cursor-pointer hover:bg-gray-50",onClick:g=>s.id&&K(s.id)},[e("td",Vt,l((f.attendances.current_page-1)*f.attendances.per_page+d+1),1),e("td",Et,[e("div",Tt,[s.employee.photo_url?(o(),n("img",{key:0,src:s.employee.photo_url?`/storage/${s.employee.photo_url}`:"",alt:"avatar",class:"object-cover w-8 h-8 rounded-full"},null,8,Bt)):(o(),te(ae,{key:1,name:s.employee.name,gender:s.employee?.gender||"",size:32},null,8,["name","gender"])),e("div",Dt,[e("span",Ut,l(s.employee.name),1),e("span",At,l(s.employee.role||"Staff"),1)])])]),e("td",Kt,l(s.department||"-"),1),e("td",wt,[s.shift&&(s.shift.name||s.shift.start_time)?(o(),n("span",Jt,[P(l(s.shift.name||"Shift")+" ",1),s.shift.start_time||s.shift.end_time?(o(),n("span",Gt," ("+l((s.shift.start_time||"").toString().slice(0,5))+" - "+l((s.shift.end_time||"").toString().slice(0,5))+") ",1)):$("",!0)])):(o(),n("span",Ft,"-"))]),e("td",It,l(s.jam_masuk||"-"),1),e("td",zt,l(s.jam_keluar||"-"),1),e("td",Ot,l(s.durasi_display),1),e("td",Lt,[s.status_display?(o(),n("span",{key:0,class:j(["inline-block px-2 py-1 rounded text-xs font-semibold",H[s.status_display]||"bg-gray-100 border border-gray-300 text-gray-700"])},l(I(s.status_display_mapped)||"-"),3)):(o(),n("span",Pt,"-"))]),e("td",Rt,[e("div",qt,[re.value?(o(),n("button",{key:0,type:"button",class:j(["px-2 py-1 text-xs rounded border",s.id?"":"opacity-50 cursor-not-allowed"]),disabled:!s.id,onClick:G(g=>s.id&&K(s.id),["stop"])}," Detail ",10,Ht)):$("",!0),ne.value?(o(),n("button",{key:1,type:"button",class:j(["px-2 py-1 text-xs rounded border",s.id?"":"opacity-50 cursor-not-allowed"]),disabled:!s.id,onClick:G(g=>s.id&&Z(s.id),["stop"])}," Edit ",10,Yt)):$("",!0)])])],8,Mt))),128)):(o(),n("tr",Qt,[...t[36]||(t[36]=[e("td",{colspan:"9",class:"py-8 text-center text-gray-500"},[e("div",{class:"flex flex-col gap-2 items-center"},[e("svg",{class:"w-12 h-12 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})]),e("span",{class:"text-sm font-medium"}," Tidak ada data ")])],-1)])]))])])]),f.attendances.data&&f.attendances.data.length?(o(),te(ve,{key:0,pagination:f.attendances,class:"border-t"},null,8,["pagination"])):$("",!0)]),k(L(oe),{visible:V.value,"onUpdate:visible":t[15]||(t[15]=s=>V.value=s),modal:"",dismissableMask:"",breakpoints:{"960px":"80vw","640px":"95vw"},style:{width:"600px",padding:"6px"},pt:X},{header:T(()=>[...t[38]||(t[38]=[e("div",{class:"flex justify-between items-center w-full"},[e("h3",{class:"text-xl font-semibold text-gray-900 dark:text-gray-100"}," Detail ")],-1)])]),default:T(()=>[e("div",Wt,[e("div",Xt,[e("div",Zt,[t[39]||(t[39]=e("label",{class:"font-normal text-dark"},"Nama",-1)),e("p",es,l(p.value?.employee?.name||"-"),1)]),e("div",ts,[t[40]||(t[40]=e("label",{class:"font-normal text-dark"},"Cabang",-1)),e("p",ss,l(p.value?.branch?.name||"-"),1)]),e("div",as,[t[41]||(t[41]=e("label",{class:"font-normal text-dark"},"Jadwal",-1)),e("p",ls,l(p.value?.shift?.name||"-"),1)])]),e("div",os,[e("div",ns,[t[43]||(t[43]=e("label",{class:"font-semibold text-dark"},"Foto Masuk",-1)),p.value?.foto_masuk?(o(),n("img",{key:0,src:p.value.foto_masuk,alt:"Foto Masuk",class:"object-cover w-full h-48 rounded-md border border-gray-200 shadow-sm"},null,8,rs)):(o(),n("div",ds,[...t[42]||(t[42]=[e("span",{class:"text-gray-400"},"Tidak ada foto",-1)])])),e("p",is," Jam: "+l(p.value?.jam_masuk||"-"),1)]),e("div",us,[t[45]||(t[45]=e("label",{class:"font-semibold text-dark"},"Foto Keluar",-1)),p.value?.foto_keluar?(o(),n("img",{key:0,src:p.value.foto_keluar,alt:"Foto Keluar",class:"object-cover w-full h-48 rounded-md border border-gray-200 shadow-sm"},null,8,ps)):(o(),n("div",cs,[...t[44]||(t[44]=[e("span",{class:"text-gray-400"},"Tidak ada foto",-1)])])),e("p",ms," Jam: "+l(p.value?.jam_keluar||"-"),1)])]),e("div",gs,[e("div",fs,[t[46]||(t[46]=e("label",{class:"font-normal text-dark"},"Durasi Kerja",-1)),e("p",bs,l(p.value?.durasi||"-"),1)]),e("div",xs,[t[47]||(t[47]=e("label",{class:"font-normal text-dark"},"Status",-1)),e("p",ys,l(p.value?.status||"-"),1)])])])]),_:1},8,["visible"]),k(L(oe),{visible:E.value,"onUpdate:visible":t[20]||(t[20]=s=>E.value=s),modal:"",dismissableMask:"",breakpoints:{"960px":"80vw","640px":"95vw"},style:{width:"520px",padding:"6px"},pt:X},{header:T(()=>[...t[48]||(t[48]=[e("div",{class:"flex justify-between items-center w-full"},[e("h3",{class:"text-xl font-semibold text-gray-900"}," Koreksi Absensi ")],-1)])]),default:T(()=>[e("div",_s,[e("div",null,[t[49]||(t[49]=e("label",{class:"block mb-1 text-sm text-gray-600"},"Jam Masuk",-1)),x(e("input",{type:"time","onUpdate:modelValue":t[16]||(t[16]=s=>c.value.jam_masuk=s),class:"px-3 w-full h-10 rounded border border-gray-300"},null,512),[[h,c.value.jam_masuk]])]),e("div",null,[t[50]||(t[50]=e("label",{class:"block mb-1 text-sm text-gray-600"},"Jam Keluar",-1)),x(e("input",{type:"time","onUpdate:modelValue":t[17]||(t[17]=s=>c.value.jam_keluar=s),class:"px-3 w-full h-10 rounded border border-gray-300"},null,512),[[h,c.value.jam_keluar]])]),e("div",null,[t[51]||(t[51]=e("label",{class:"block mb-1 text-sm text-gray-600"},"Status",-1)),x(e("select",{"onUpdate:modelValue":t[18]||(t[18]=s=>c.value.status=s),class:"px-3 w-full h-10 rounded border border-gray-300"},[(o(!0),n(N,null,J(f.status_options,s=>(o(),n("option",{key:s,value:s},l(s),9,vs))),128))],512),[[se,c.value.status]])]),e("div",hs,[e("button",{class:"px-3 h-10 rounded border",type:"button",onClick:t[19]||(t[19]=s=>E.value=!1)}," Batal "),e("button",{class:"px-3 h-10 text-white bg-blue-600 rounded",type:"button",onClick:ge}," Simpan ")])])]),_:1},8,["visible"])])],64))}});export{Ks as default};
