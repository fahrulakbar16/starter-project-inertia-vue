import{y as O,d as y,z as q,H as C,u as B,e as i,o as l,b as x,a as e,g as r,D as I,f as d,c as L,E as f,J as j,G as k,F as N,i as A,t as u,w as E}from"./app-CJkCV51W.js";import{_ as G}from"./AppLayout-BlEKf3Fz.js";import{_ as J}from"./Breadcrumb-BJQpsGcc.js";import{_ as R}from"./Pagination-C2dOEo8X.js";import{_ as Y}from"./ConfirmModal-DAlWp-FQ.js";import{s as z}from"./index-D_jvqarE.js";import{u as W}from"./useAuth-DvuTgkfF.js";import"./FlashMessage-D4C-FUm8.js";import"./LayoutShell-FWpWJLvi.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./LayoutShell.vue_vue_type_style_index_0_lang-CRqqKi3W.js";import"./index-BD4Vkpl0.js";import"./index-B9o0VbjL.js";const Q={class:"flex flex-col h-full gap-3 px-3 overflow-hidden"},X={class:"flex items-center justify-between h-10"},Z={class:"flex gap-2"},ee={class:"flex flex-col overflow-hidden bg-white border border-gray-200 rounded-lg"},te={class:"flex items-center justify-between px-6 py-3 border-b"},se={class:"flex items-center gap-2"},re={class:"relative"},oe={class:"overflow-auto","data-simplebar":""},le={class:"min-w-full text-sm"},ie={key:0,class:"p-3 bg-gray-100 border-gray-200 border-y"},ae={class:"p-3 text-center"},ne={class:"p-3"},de={class:"inline-block px-2 py-0.5 text-xs text-blue-700 bg-blue-100 rounded-full border border-blue-300"},ue={class:"p-3"},pe={class:"p-3"},ce={class:"p-3"},ge=["src"],me={key:1,class:"text-gray-400"},be={class:"p-3 text-center"},ye={key:0,class:"p-3"},fe={class:"flex justify-center gap-2"},xe=["onClick"],_e=["onClick"],ve={key:1},ke=["colspan"],he={class:"flex items-center justify-between w-full"},we={class:"text-xl font-semibold text-gray-900"},Ce={class:"grid grid-cols-2 gap-3"},je={class:"col-span-2"},Ee={key:0,class:"mt-1 text-xs text-red-600"},De={class:"col-span-2"},Se={key:0,class:"mt-1 text-xs text-red-600"},Ue={class:"col-span-2"},Ke={key:0,class:"mt-1 text-xs text-red-600"},Te={class:"col-span-2"},Me={class:"flex items-center gap-3"},Ve={key:0,class:"mt-1 text-xs text-red-600"},$e={key:1,class:"mt-2"},Pe=["src"],Fe={class:"flex justify-end col-span-2 gap-2"},He=["disabled"],Oe={key:0},qe={key:1},Ze=Object.assign({layout:G},{__name:"Index",props:{rows:Object,filters:Object},setup(D){const{can:n}=W(),_=D,p=O(()=>_.rows||{data:[]}),m=y({q:_.filters?.q||"",category:_.filters?.category??null});let h=null;q(m,()=>{clearTimeout(h),h=setTimeout(()=>S(),350)},{deep:!0});function S(){C.get(route("work-principles.index"),{...m.value},{preserveScroll:!0,preserveState:!0,replace:!0})}const c=y(!1),s=B({id:null,category:"prinsip",title:"",description:"",img_file:null,created_by:null}),g=y("");function U(){n("work_principles.create")&&(s.defaults({id:null,category:"prinsip",title:"",description:"",created_by:null}),s.reset(),s.clearErrors(),s.img_file=null,g.value="",c.value=!0)}function K(a){n("work_principles.edit")&&(s.defaults({id:a.id,category:a.category,title:a.title,description:a.description,created_by:a.created_by||null}),s.reset(),s.clearErrors(),Object.assign(s,{id:a.id,category:a.category,title:a.title,description:a.description,created_by:a.created_by||null}),s.img_file=null,g.value=a.img_url||"",c.value=!0)}function T(){const a={forceFormData:!0,onSuccess:()=>{c.value=!1}};if(s.id){if(!n("work_principles.edit"))return;s.transform(t=>({...t,_method:"PUT"})).post(route("work-principles.update",s.id),{forceFormData:!0,onSuccess:()=>{c.value=!1},onError:t=>{console.error("Error updating work principle:",t),alert("Terjadi kesalahan saat memperbarui data.")}})}else{if(!n("work_principles.create"))return;s.post(route("work-principles.store"),a)}}const b=y(null),v=y(!1),M=a=>{b.value=a,v.value=!0},w=()=>{b.value=null,v.value=!1},V=()=>{n("work_principles.delete")&&b.value?.id&&C.delete(route("work-principles.destroy",b.value.id),{onSuccess:()=>{w()},preserveScroll:!0})};function $(a){const t=a?.target?.files?.[0];t&&(s.img_file=t,g.value=URL.createObjectURL(t))}function P(){s.img_file=null,g.value=""}return(a,t)=>(l(),i("div",Q,[x(r(I),{title:"Prinsip & Etos Kerja"}),e("div",X,[x(J,{items:[{label:"Konfigurasi"},{label:"Prinsip & Etos Kerja"}]}),e("div",Z,[r(n)("work_principles.create")?(l(),i("button",{key:0,class:"px-3 py-2 text-sm text-white bg-blue-600 rounded hover:bg-blue-700",onClick:U}," Tambah ")):d("",!0)])]),e("div",ee,[e("div",te,[t[9]||(t[9]=e("div",{class:"text-xl font-semibold text-gray-800"}," Daftar Prinsip & Etos Kerja ",-1)),e("div",se,[f(e("select",{"onUpdate:modelValue":t[0]||(t[0]=o=>m.value.category=o),class:"h-10 px-3 text-sm border border-gray-200 rounded-lg"},[...t[7]||(t[7]=[e("option",{value:null},"Semua Kategori",-1),e("option",{value:"prinsip"},"Prinsip",-1),e("option",{value:"etos kerja"},"Etos Kerja",-1)])],512),[[j,m.value.category]]),e("div",re,[f(e("input",{"onUpdate:modelValue":t[1]||(t[1]=o=>m.value.q=o),type:"text",placeholder:"Cari...",class:"py-2.5 pr-8 pl-3 w-64 h-10 text-sm text-gray-800 bg-transparent rounded-lg border border-gray-200 focus:border-blue-300 focus:outline-hidden focus:ring-2 focus:ring-blue-500/20"},null,512),[[k,m.value.q]]),t[8]||(t[8]=e("span",{class:"absolute text-gray-400 -translate-y-1/2 right-2 top-1/2"},"ðŸ”",-1))])])]),e("div",oe,[e("table",le,[e("thead",null,[e("tr",null,[t[11]||(t[11]=e("th",{class:"p-3 bg-gray-100 border-gray-200 border-y"},[e("div",{class:"font-medium text-center text-gray-600"}," No ")],-1)),t[12]||(t[12]=e("th",{class:"p-3 bg-gray-100 border border-gray-200"},[e("div",{class:"font-medium text-left text-gray-600"}," Kategori ")],-1)),t[13]||(t[13]=e("th",{class:"p-3 bg-gray-100 border border-gray-200"},[e("div",{class:"font-medium text-left text-gray-600"}," Judul ")],-1)),t[14]||(t[14]=e("th",{class:"p-3 bg-gray-100 border border-gray-200"},[e("div",{class:"font-medium text-left text-gray-600"}," Deskripsi ")],-1)),t[15]||(t[15]=e("th",{class:"p-3 bg-gray-100 border border-gray-200"},[e("div",{class:"font-medium text-left text-gray-600"}," Gambar ")],-1)),t[16]||(t[16]=e("th",{class:"p-3 bg-gray-100 border-gray-200 border-y"},[e("div",{class:"font-medium text-center text-gray-600"}," Dibuat ")],-1)),r(n)("work_principles.edit")||r(n)("work_principles.delete")?(l(),i("th",ie,[...t[10]||(t[10]=[e("div",{class:"font-medium text-center text-gray-600"}," Aksi ",-1)])])):d("",!0)])]),e("tbody",null,[p.value.data&&p.value.data.length?(l(!0),i(N,{key:0},A(p.value.data,(o,F)=>(l(),i("tr",{key:o.id,class:"border-b border-gray-200"},[e("td",ae,u((p.value.current_page-1)*p.value.per_page+F+1),1),e("td",ne,[e("span",de,u(o.category?o.category.charAt(0).toUpperCase()+o.category.slice(1):"-"),1)]),e("td",ue,u(o.title),1),e("td",pe,u(o.description||"-"),1),e("td",ce,[o.img_url?(l(),i("img",{key:0,src:o.img_url,alt:"gambar",class:"h-10 rounded"},null,8,ge)):(l(),i("span",me,"-"))]),e("td",be,u(new Date(o.created_at).toLocaleString("id-ID")),1),r(n)("work_principles.edit")||r(n)("work_principles.delete")?(l(),i("td",ye,[e("div",fe,[r(n)("work_principles.edit")?(l(),i("button",{key:0,class:"p-1 text-yellow-500 hover:text-yellow-700",onClick:H=>K(o),title:"Edit"}," Edit ",8,xe)):d("",!0),r(n)("work_principles.delete")?(l(),i("button",{key:1,class:"p-1 text-red-500 hover:text-red-700",onClick:H=>M(o),title:"Hapus"}," Hapus ",8,_e)):d("",!0)])])):d("",!0)]))),128)):(l(),i("tr",ve,[e("td",{colspan:r(n)("work_principles.edit")||r(n)("work_principles.delete")?7:6,class:"py-6 text-center text-gray-500"}," Tidak ada data ",8,ke)]))])])]),p.value.data&&p.value.data.length?(l(),L(R,{key:0,pagination:p.value,class:"border-t"},null,8,["pagination"])):d("",!0)]),x(r(z),{visible:c.value,"onUpdate:visible":t[6]||(t[6]=o=>c.value=o),modal:"",dismissableMask:"",style:{width:"600px",padding:"6px"}},{header:E(()=>[e("div",he,[e("h3",we,u(r(s).id?"Edit":"Tambah")+" Item ",1)])]),default:E(()=>[e("div",Ce,[e("div",je,[t[18]||(t[18]=e("label",{class:"block mb-1 text-sm text-gray-600"},"Kategori",-1)),f(e("select",{"onUpdate:modelValue":t[2]||(t[2]=o=>r(s).category=o),class:"w-full h-10 px-3 border border-gray-300 rounded"},[...t[17]||(t[17]=[e("option",{value:"prinsip"},"Prinsip",-1),e("option",{value:"etos kerja"},"Etos Kerja",-1)])],512),[[j,r(s).category]]),r(s).errors.category?(l(),i("p",Ee,u(r(s).errors.category),1)):d("",!0)]),e("div",De,[t[19]||(t[19]=e("label",{class:"block mb-1 text-sm text-gray-600"},"Judul",-1)),f(e("input",{"onUpdate:modelValue":t[3]||(t[3]=o=>r(s).title=o),type:"text",class:"w-full h-10 px-3 border border-gray-300 rounded"},null,512),[[k,r(s).title]]),r(s).errors.title?(l(),i("p",Se,u(r(s).errors.title),1)):d("",!0)]),e("div",Ue,[t[20]||(t[20]=e("label",{class:"block mb-1 text-sm text-gray-600"},"Deskripsi",-1)),f(e("textarea",{"onUpdate:modelValue":t[4]||(t[4]=o=>r(s).description=o),rows:"4",class:"w-full px-3 py-2 border border-gray-300 rounded"},null,512),[[k,r(s).description]]),r(s).errors.description?(l(),i("p",Ke,u(r(s).errors.description),1)):d("",!0)]),e("div",Te,[t[21]||(t[21]=e("label",{class:"block mb-1 text-sm text-gray-600"},"Gambar (opsional)",-1)),e("div",Me,[e("input",{type:"file",accept:"image/*",onChange:$,class:"w-full h-10 px-3 border border-gray-300 rounded"},null,32),g.value||r(s).img_url?(l(),i("button",{key:0,type:"button",class:"h-10 px-2 text-xs border rounded",onClick:P}," Hapus ")):d("",!0)]),r(s).errors.img_file?(l(),i("p",Ve,u(r(s).errors.img_file),1)):d("",!0),g.value||r(s).img_url?(l(),i("div",$e,[e("img",{src:g.value||r(s).img_url,alt:"preview",class:"h-24 border rounded"},null,8,Pe)])):d("",!0)]),e("div",Fe,[e("button",{class:"h-10 px-3 border rounded",type:"button",onClick:t[5]||(t[5]=o=>c.value=!1)}," Batal "),e("button",{disabled:r(s).processing,class:"h-10 px-3 text-white bg-blue-600 rounded disabled:opacity-60",type:"button",onClick:T},[r(s).processing?(l(),i("span",Oe,"Menyimpan...")):(l(),i("span",qe,"Simpan"))],8,He)])])]),_:1},8,["visible"]),x(Y,{show:v.value,question:"Yakin ingin menghapus",selected:`${b.value?.title||""}`,title:"Hapus Prinsip & Etos Kerja",confirmText:"Ya, Hapus!",maxWidth:"md",onClose:w,onConfirm:V},null,8,["show","selected"])]))}});export{Ze as default};
