import{d as x,y as k,z as V,e as i,o as r,f as m,a as e,t as a,n as v,E as j,J as O,F as _,i as N,h as c,G as E,O as F,S as J,H}from"./app-CJkCV51W.js";const U={key:0,class:"fixed inset-0 z-[9999] bg-black bg-opacity-50 flex items-center justify-center p-4"},G={key:0,class:"flex items-center justify-center p-8"},R={key:1,class:"flex items-center justify-center p-8"},W={class:"text-center"},Y={class:"text-red-600 mb-4"},$={key:2,class:"space-y-5 p-6"},q={key:0,class:"space-y-3"},I={class:"p-3 bg-gray-50 rounded border"},Q={class:"text-gray-900 text-sm"},X={class:"p-3 bg-gray-50 rounded border"},Z={class:"text-gray-900 text-sm"},ee={class:"p-3 bg-gray-50 rounded border"},te={class:"text-gray-900 text-sm"},se={class:"p-3 bg-gray-50 rounded border"},ae={class:"text-gray-900 text-sm"},ne={class:"p-3 bg-gray-50 rounded border min-h-[80px]"},oe={class:"text-gray-900 text-sm leading-relaxed"},le={class:"flex flex-wrap gap-6 items-end"},ie={class:"flex-1 min-w-[140px]"},re={class:"p-3 bg-gray-50 rounded border"},de={class:"text-gray-900 text-sm"},ue={class:"flex-1 min-w-[140px]"},me={class:"p-3 bg-gray-50 rounded border"},ge={class:"text-gray-900 text-sm"},be={class:"flex-1 min-w-[140px]"},ce={class:"p-3 bg-gray-50 rounded border"},xe={class:"text-gray-900 text-sm"},ve={class:"flex-1 min-w-[160px]"},ye={class:"flex items-center gap-3"},fe={class:"relative group"},pe={class:"absolute right-0 top-9 bg-gray-800 text-white text-xs rounded-lg px-3 py-2 whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity duration-200 z-20 shadow-lg"},ke={class:"font-medium"},he={class:"font-medium"},we={class:"p-3 bg-gray-50 rounded border min-h-[80px]"},je={class:"text-gray-900 text-sm leading-relaxed"},_e={key:1,class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Ce={class:"p-2 bg-gray-50 rounded border"},Me={class:"text-gray-900 text-sm"},ze={class:"p-2 bg-gray-50 rounded border"},Se={class:"text-gray-900 text-sm"},De={class:"p-2 bg-gray-50 rounded border"},Be={class:"text-gray-900 text-sm"},Le=["value"],Ae={key:0,class:"text-red-500 text-xs mt-1"},Te={class:"p-2 bg-gray-50 rounded border"},Ke={class:"text-gray-900 text-sm"},Pe={class:"p-2 bg-gray-50 rounded border"},Ve={class:"text-gray-900 text-sm"},Oe={class:"p-2 bg-gray-50 rounded border"},Ne={class:"text-gray-900 text-sm"},Ee={class:"p-2 bg-gray-50 rounded border"},Fe={class:"text-gray-900 text-sm"},Je={class:"p-2 bg-gray-50 rounded border"},He={class:"text-gray-900 text-sm"},Ue={class:"block text-sm font-medium text-gray-700 mb-1"},Ge={key:0,class:"text-red-500"},Re={key:0,class:"text-red-500 text-xs mt-1"},We={key:3,class:"text-center text-gray-500 py-8 px-4"},Ye={key:4,class:"border-t border-gray-200 p-4"},$e=["disabled"],qe={key:0,class:"w-4 h-4 mr-2 inline",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Ie={key:1,class:"w-4 h-4 mr-2 inline animate-spin",fill:"none",viewBox:"0 0 24 24"},Qe={key:1,class:"fixed inset-0 z-[10000] bg-black bg-opacity-50 flex items-center justify-center p-4"},Xe={class:"bg-white rounded-lg shadow-xl max-w-md w-full"},Ze={class:"p-6"},et={class:"mb-6"},tt={class:"text-sm text-gray-600 mb-4"},st={class:"font-semibold text-gray-900"},at={key:0,class:"bg-red-50 border border-red-200 rounded-md p-3"},nt={key:1,class:"mt-3"},ot={class:"text-sm text-gray-900 bg-gray-50 p-2 rounded border mt-1"},lt={class:"flex gap-3 justify-end"},it=["disabled"],rt={key:0,class:"w-4 h-4 mr-2 inline animate-spin",fill:"none",viewBox:"0 0 24 24"},ut={__name:"DetailOvertime",props:{isOpen:{type:Boolean,default:!1},submission:Object,type:String,submission_types:Array,submission_statuses:Array,loading:{type:Boolean,default:!1},error:{type:String,default:null}},emits:["close","update-success"],setup(s,{emit:C}){const l=s,y=C,u=x(!1),f=x(!1),d=x({}),o=x(typeof l.submission?.data?.status<"u"?l.submission?.data?.status:l.submission?.status??0),g=x(l.submission?.data?.notes||""),p=k(()=>{const n=l.submission?.data?.status?.value??l.submission?.data?.status??l.submission?.status??"pending";return n==="approved"||n==="rejected"||n==="disetujui"||n==="ditolak"}),M=k(()=>o.value&&o.value!=="pending"&&o.value!=="menunggu persetujuan"),z=k(()=>M.value&&!u.value),h=n=>({pending:"Menunggu",approved:"Disetujui",rejected:"Ditolak",cancelled:"Dibatalkan","menunggu persetujuan":"Menunggu",disetujui:"Disetujui",ditolak:"Ditolak",dibatalkan:"Dibatalkan"})[n]||"Menunggu",S=n=>({pending:"bg-yellow-50 border-yellow-200",approved:"bg-green-50 border-green-200",rejected:"bg-red-50 border-red-200",cancelled:"bg-gray-50 border-gray-200","menunggu persetujuan":"bg-yellow-50 border-yellow-200",disetujui:"bg-green-50 border-green-200",ditolak:"bg-red-50 border-red-200",dibatalkan:"bg-gray-50 border-gray-200"})[n]||"bg-gray-50 border-gray-200",D=n=>({pending:"text-yellow-800",approved:"text-green-800",rejected:"text-red-800",cancelled:"text-gray-800","menunggu persetujuan":"text-yellow-800",disetujui:"text-green-800",ditolak:"text-red-800",dibatalkan:"text-gray-800"})[n]||"text-gray-800",B=k(()=>p.value?"max-w-4xl":l.submission&&(l.submission?.description&&l.submission?.description.length>200||l.submission?.keterangan&&l.submission?.keterangan.length>200)?"max-w-3xl":"max-w-xl");V(()=>l.submission,n=>{n&&(console.log(n),o.value=typeof n.data?.status<"u"?n.data.status?.value??n.data.status:n.status??"pending",g.value=n.data?.notes||"")},{immediate:!0});function L(){y("close")}function A(){d.value={}}function w(){return d.value={},!o.value||o.value==="pending"||o.value==="menunggu persetujuan"?(d.value.status="Pilih status pengajuan",!1):(o.value==="rejected"||o.value==="ditolak")&&(!g.value||g.value.trim()==="")?(d.value.keterangan="Keterangan admin wajib diisi untuk status ditolak",!1):!0}function T(){w()&&(f.value=!0)}function K(){f.value=!1,d.value={}}function P(){l.submission&&w()&&(u.value=!0,f.value=!1,H.put(route("submission.overtime.update",l.submission?.data?.id),{status:o.value,admin_notes:g.value},{onStart:()=>{u.value=!0},onSuccess:()=>{h(o.value),y("close"),y("update-success")},onError:n=>{console.error("Error confirming submission:",n),d.value=n,alert("Terjadi kesalahan saat mengkonfirmasi pengajuan")},onFinish:()=>{u.value=!1}}))}return(n,t)=>(r(),i(_,null,[s.isOpen?(r(),i("div",U,[e("div",{class:v(["bg-white rounded-lg shadow-xl w-full",B.value]),style:F(p.value?"max-height:80vh; max-width: 50vw; margin-top: 3vh; overflow-y: auto;":"max-height:88vh; max-width: 40vw; margin-top: 5vh; overflow-y: auto;")},[e("div",{class:"flex items-center justify-between p-4 border-b border-gray-200"},[t[4]||(t[4]=e("h2",{class:"text-xl font-bold text-gray-900"},"Detail Pengajuan",-1)),e("button",{onClick:L,class:"text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-full p-2 transition-colors",title:"Tutup"},[...t[3]||(t[3]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),l.loading?(r(),i("div",G,[...t[5]||(t[5]=[e("div",{class:"text-center"},[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e("p",{class:"text-gray-600"},"Memuat detail pengajuan...")],-1)])])):l.error?(r(),i("div",R,[e("div",W,[t[6]||(t[6]=e("div",{class:"text-red-500 mb-4"},[e("svg",{class:"w-12 h-12 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})])],-1)),e("p",Y,a(l.error),1),e("button",{onClick:t[0]||(t[0]=b=>y("close")),class:"px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600"}," Tutup ")])])):s.submission&&s.submission.data?(r(),i("div",$,[p.value?(r(),i("div",q,[e("div",null,[t[7]||(t[7]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Nama",-1)),e("div",I,[e("p",Q,a(s.submission?.data?.employee?.name||s.submission?.name||"-"),1)])]),e("div",null,[t[8]||(t[8]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Cabang",-1)),e("div",X,[e("p",Z,a(s.submission?.data?.employee?.branch_name||s.submission?.branch_name||s.submission?.branch?.name||"-"),1)])]),e("div",null,[t[9]||(t[9]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Tanggal Pengajuan",-1)),e("div",ee,[e("p",te,a(s.submission?.data?.tanggal_pengajuan||"-"),1)])]),e("div",null,[t[10]||(t[10]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Durasi Lembur",-1)),e("div",se,[e("p",ae,a(s.submission?.data?.duration_hours||"-")+" jam ",1)])]),e("div",null,[t[11]||(t[11]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Keterangan Pengajuan",-1)),e("div",ne,[e("p",oe,a(s.submission?.data?.reason||"-"),1)])]),e("div",le,[e("div",ie,[t[12]||(t[12]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Tanggal Lembur",-1)),e("div",re,[e("p",de,a(s.submission?.data?.date||"-"),1)])]),e("div",ue,[t[13]||(t[13]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Jam Mulai",-1)),e("div",me,[e("p",ge,a(s.submission?.data?.start_time||"-"),1)])]),e("div",be,[t[14]||(t[14]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Jam Selesai",-1)),e("div",ce,[e("p",xe,a(s.submission?.data?.end_time||"-"),1)])]),e("div",ve,[t[17]||(t[17]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Status",-1)),e("div",ye,[e("div",{class:v(["p-3 rounded border flex-1",S(o.value)])},[e("p",{class:v(["text-sm font-medium",D(o.value)])},a(h(o.value)),3)],2),e("div",fe,[t[16]||(t[16]=e("div",{class:"w-7 h-7 bg-blue-100 rounded-full flex items-center justify-center cursor-pointer hover:bg-blue-200 transition-colors"},[e("svg",{class:"w-4 h-4 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z","clip-rule":"evenodd"})])],-1)),e("div",pe,[e("div",ke,a(s.submission?.data?.approved_at||"-"),1),t[15]||(t[15]=e("div",{class:"text-gray-300 text-xs"},"Oleh",-1)),e("div",he,a(s.submission?.data?.approved_by?.name||"-"),1)])])])])]),e("div",null,[t[18]||(t[18]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Keterangan Admin",-1)),e("div",we,[e("p",je,a(s.submission?.data?.notes||"-"),1)])])])):(r(),i("div",_e,[e("div",null,[t[19]||(t[19]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Nama",-1)),e("div",Ce,[e("p",Me,a(s.submission?.data?.employee?.name||"-"),1)])]),e("div",null,[t[20]||(t[20]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Cabang",-1)),e("div",ze,[e("p",Se,a(s.submission?.data?.employee?.branch_name||"-"),1)])]),e("div",null,[t[21]||(t[21]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Tanggal Pengajuan",-1)),e("div",De,[e("p",Be,a(s.submission?.data?.tanggal_pengajuan||"-"),1)])]),e("div",null,[t[22]||(t[22]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Status",-1)),e("div",{class:v(["bg-gray-50 rounded border",{"border-red-300":d.value.status}])},[j(e("select",{"onUpdate:modelValue":t[1]||(t[1]=b=>o.value=b),class:"w-full bg-transparent text-gray-900 text-sm focus:outline-none p-2",onChange:A},[(r(!0),i(_,null,N(s.submission.submission_statuses,b=>(r(),i("option",{value:b.value,key:b.value},a(b.label),9,Le))),128))],544),[[O,o.value]])],2),d.value.status?(r(),i("p",Ae,a(d.value.status),1)):m("",!0)]),e("div",null,[t[23]||(t[23]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Tanggal Lembur",-1)),e("div",Te,[e("p",Ke,a(s.submission?.data?.date||"-"),1)])]),e("div",null,[t[24]||(t[24]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Jam Mulai",-1)),e("div",Pe,[e("p",Ve,a(s.submission?.data?.start_time||"-"),1)])]),e("div",null,[t[25]||(t[25]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Jam Selesai",-1)),e("div",Oe,[e("p",Ne,a(s.submission?.data?.end_time||"-"),1)])]),e("div",null,[t[26]||(t[26]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Durasi Lembur",-1)),e("div",Ee,[e("p",Fe,a(s.submission?.data?.duration_hours||"-")+" jam ",1)])]),e("div",null,[t[27]||(t[27]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Alasan Lembur",-1)),e("div",Je,[e("p",He,a(s.submission?.data?.reason||"-"),1)])]),e("div",null,[e("label",Ue,[t[28]||(t[28]=c(" Keterangan Admin ",-1)),o.value==="rejected"||o.value==="ditolak"?(r(),i("span",Ge,"*")):m("",!0)]),j(e("textarea",{"onUpdate:modelValue":t[2]||(t[2]=b=>g.value=b),class:v(["w-full p-2 bg-gray-50 rounded border min-h-[80px] resize-none focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",{"border-red-300":d.value.keterangan}]),placeholder:"Keterangan admin"},null,2),[[E,g.value]]),d.value.keterangan?(r(),i("p",Re,a(d.value.keterangan),1)):m("",!0)])]))])):(r(),i("div",We," Data pengajuan tidak ditemukan. ")),!l.loading&&!l.error&&s.submission&&s.submission.data&&!p.value?(r(),i("div",Ye,[e("button",{onClick:T,disabled:!z.value,class:"w-full flex items-center justify-center bg-blue-600 text-white text-sm font-medium py-2 px-4 rounded hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},[u.value?(r(),i("svg",Ie,[...t[30]||(t[30]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):(r(),i("svg",qe,[...t[29]||(t[29]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)])])),c(" "+a(u.value?"Memproses...":"Konfirmasi Pengajuan"),1)],8,$e)])):m("",!0)],6)])):m("",!0),f.value?(r(),i("div",Qe,[e("div",Xe,[e("div",Ze,[t[36]||(t[36]=J('<div class="flex items-center mb-4"><div class="flex-shrink-0"><svg class="w-8 h-8 text-yellow-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"></path></svg></div><div class="ml-3"><h3 class="text-lg font-medium text-gray-900">Konfirmasi Pengajuan</h3></div></div>',1)),e("div",et,[e("p",tt,[t[31]||(t[31]=c(" Apakah Anda yakin ingin mengubah status pengajuan menjadi ",-1)),e("span",st,a(h(o.value)),1),t[32]||(t[32]=c("? ",-1))]),o.value==="rejected"||o.value==="ditolak"?(r(),i("div",at,[...t[33]||(t[33]=[e("p",{class:"text-sm text-red-800"},[e("strong",null,"Perhatian:"),c(" Status ditolak akan mengirim notifikasi kepada karyawan. ")],-1)])])):m("",!0),g.value?(r(),i("div",nt,[t[34]||(t[34]=e("p",{class:"text-sm text-gray-600"},"Keterangan admin:",-1)),e("p",ot,a(g.value),1)])):m("",!0)]),e("div",lt,[e("button",{onClick:K,class:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition-colors"}," Batal "),e("button",{onClick:P,disabled:u.value,class:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},[u.value?(r(),i("svg",rt,[...t[35]||(t[35]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):m("",!0),c(" "+a(u.value?"Memproses...":"Ya, Konfirmasi"),1)],8,it)])])])])):m("",!0)],64))}};export{ut as default};
