import{u as N,d as v,c as w,o as m,w as s,b as o,g as a,h as r,n as U,e as p,f as h,a as l,E as g,t as F,V as k,O as z,K as b,P as A,H as T}from"./app-CJkCV51W.js";import{_ as D}from"./ActionMessage-BkFItibK.js";import{_ as K}from"./FormSection-B06Ku9wo.js";import{a as _,_ as V}from"./TextInput-BwfYsBtz.js";import{_ as y}from"./InputLabel-C3buuP-R.js";import{_ as R}from"./PrimaryButton-BBEBB-mL.js";import{_ as C}from"./SecondaryButton-BnVkC3kv.js";import{S as d}from"./sweetalert2.esm.all-Dr03eess.js";import"./SectionTitle-B-P0IEbj.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const q={key:0,class:"col-span-6 sm:col-span-4"},G={class:"mt-2"},L=["src","alt"],O={key:1,class:"flex items-center justify-center text-lg font-semibold text-blue-600 bg-blue-100 rounded-full size-20"},H={class:"mt-2"},M={class:"col-span-6 sm:col-span-4"},Y={class:"col-span-6 sm:col-span-4"},J={key:0},Q={class:"mt-2 text-sm"},W={class:"mt-2 text-sm font-medium text-green-600"},ne={__name:"UpdateProfileInformationForm",props:{user:Object},setup(i){const P=i,t=N({_method:"PUT",name:P.user.name,email:P.user.email,photo:null}),x=v(null),c=v(null),n=v(null),B=()=>{n.value&&(t.photo=n.value.files[0]),t.post(route("user-profile-information.update"),{errorBag:"updateProfileInformation",preserveScroll:!0,onSuccess:()=>{S(),d.fire({icon:"success",title:"Berhasil",text:"Profil berhasil diperbarui.",timer:1500,showConfirmButton:!1})},onError:()=>{d.fire({icon:"error",title:"Gagal",text:"Profil tidak dapat diperbarui. Periksa kembali data yang Anda masukkan."})}}).catch(()=>{d.fire({icon:"error",title:"Kesalahan",text:"Terjadi kesalahan pada server. Silakan coba lagi nanti."})})},$=()=>{x.value=!0},j=()=>{n.value.click()},E=()=>{const u=n.value.files[0];if(!u)return;const e=new FileReader;e.onload=f=>{c.value=f.target.result},e.readAsDataURL(u)},I=()=>{T.delete(route("current-user-photo.destroy"),{preserveScroll:!0,onSuccess:()=>{c.value=null,S(),d.fire({icon:"success",title:"Berhasil",text:"Foto profil berhasil dihapus.",timer:1500,showConfirmButton:!1})},onError:()=>{d.fire({icon:"error",title:"Gagal",text:"Foto profil tidak dapat dihapus."})}}).catch(()=>{d.fire({icon:"error",title:"Kesalahan",text:"Terjadi kesalahan pada server. Silakan coba lagi nanti."})})},S=()=>{n.value?.value&&(n.value.value=null)};return(u,e)=>(m(),w(K,{onSubmitted:B},{title:s(()=>[...e[2]||(e[2]=[r(" Profile Information ",-1)])]),description:s(()=>[...e[3]||(e[3]=[r(" Update your account's profile information and email address. ",-1)])]),form:s(()=>[u.$page.props.jetstream.managesProfilePhotos?(m(),p("div",q,[l("input",{id:"photo",ref_key:"photoInput",ref:n,type:"file",class:"hidden",onChange:E},null,544),o(y,{for:"photo",value:"Photo"}),g(l("div",G,[i.user.profile_photo_url?(m(),p("img",{key:0,src:i.user.profile_photo_url,alt:i.user.name,class:"object-cover rounded-full size-20"},null,8,L)):(m(),p("div",O,F((i.user.name||"?").charAt(0).toUpperCase()),1))],512),[[k,!c.value]]),g(l("div",H,[l("span",{class:"block bg-center bg-no-repeat bg-cover rounded-full size-20",style:z("background-image: url('"+c.value+"');")},null,4)],512),[[k,c.value]]),o(C,{class:"mt-2 me-2",type:"button",onClick:b(j,["prevent"])},{default:s(()=>[...e[4]||(e[4]=[r(" Select A New Photo ",-1)])]),_:1}),i.user.profile_photo_path?(m(),w(C,{key:0,type:"button",class:"mt-2",onClick:b(I,["prevent"])},{default:s(()=>[...e[5]||(e[5]=[r(" Remove Photo ",-1)])]),_:1})):h("",!0),o(_,{message:a(t).errors.photo,class:"mt-2"},null,8,["message"])])):h("",!0),l("div",M,[o(y,{for:"name",value:"Name"}),o(V,{id:"name",modelValue:a(t).name,"onUpdate:modelValue":e[0]||(e[0]=f=>a(t).name=f),type:"text",class:"block w-full mt-1",required:"",autocomplete:"name"},null,8,["modelValue"]),o(_,{message:a(t).errors.name,class:"mt-2"},null,8,["message"])]),l("div",Y,[o(y,{for:"email",value:"Email"}),o(V,{id:"email",modelValue:a(t).email,"onUpdate:modelValue":e[1]||(e[1]=f=>a(t).email=f),type:"email",class:"block w-full mt-1",required:"",autocomplete:"username"},null,8,["modelValue"]),o(_,{message:a(t).errors.email,class:"mt-2"},null,8,["message"]),u.$page.props.jetstream.hasEmailVerification&&i.user.email_verified_at===null?(m(),p("div",J,[l("p",Q,[e[7]||(e[7]=r(" Your email address is unverified. ",-1)),o(a(A),{href:u.route("verification.send"),method:"post",as:"button",class:"text-sm text-gray-600 underline rounded-md hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",onClick:b($,["prevent"])},{default:s(()=>[...e[6]||(e[6]=[r(" Click here to re-send the verification email. ",-1)])]),_:1},8,["href"])]),g(l("div",W," A new verification link has been sent to your email address. ",512),[[k,x.value]])])):h("",!0)])]),actions:s(()=>[o(D,{on:a(t).recentlySuccessful,class:"me-3"},{default:s(()=>[...e[8]||(e[8]=[r(" Saved. ",-1)])]),_:1},8,["on"]),o(R,{class:U({"opacity-25":a(t).processing}),disabled:a(t).processing},{default:s(()=>[...e[9]||(e[9]=[r(" Save ",-1)])]),_:1},8,["class","disabled"])]),_:1}))}};export{ne as default};
