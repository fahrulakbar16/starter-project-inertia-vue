import{y as w,d as i,e as o,o as a,a as e,c as _,f as u,F as v,i as D,t as l,K as M,T as B,L as H}from"./app-CJkCV51W.js";import{_ as $}from"./Pagination-C2dOEo8X.js";import{_ as N}from"./AvatarInitials-XMdLKKbn.js";const S={class:"overflow-auto","data-simplebar":""},A={class:"min-w-full text-sm"},E={class:"p-3 text-center"},V={class:"p-3"},z={class:"flex gap-3 items-center"},F=["src"],I={class:"flex flex-col"},P={class:"font-medium text-gray-800"},R={class:"text-xs text-gray-500"},Y={class:"p-3"},G={class:"p-3"},J={class:"p-3"},K={class:"p-3"},O=["onClick"],U={key:1},q={class:"bg-white rounded-lg shadow-xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-hidden"},Q={class:"flex justify-between items-center p-6 border-b"},W={class:"text-lg font-semibold text-gray-900"},X={class:"p-6 overflow-y-auto max-h-[calc(90vh-140px)]"},Z={key:0,class:"flex justify-center items-center py-12"},ee={key:1,class:"py-12 text-center"},te={key:2,class:"space-y-4"},se={class:"flex justify-between items-start mb-3"},ae={class:"font-semibold text-gray-900"},oe={class:"text-right"},le={class:"text-sm font-medium text-gray-900"},re={class:"grid grid-cols-2 gap-4 text-sm"},ne={class:"font-medium text-gray-900"},ie={class:"font-medium text-gray-900"},de={key:0,class:"mt-3"},ce={class:"text-sm text-gray-900"},ue={key:1,class:"mt-3 text-xs text-gray-500"},pe={__name:"LeaveTab",props:{rows:{type:Object,default:null}},setup(d){const j=d,y=w(()=>j.rows?.data??[]),h=w(()=>Array.isArray(y.value)&&y.value.length>0),m=i(!1),c=i(!1),n=i([]),b=i(null),g=i(""),C=()=>{const r=new URLSearchParams(window.location.search);return parseInt(r.get("year"))||new Date().getFullYear()},T=async(r,s)=>{b.value=r,g.value=s,m.value=!0,c.value=!0,n.value=[];try{const t=C(),x=`/attendance-recap/leave-details/${r}?year=${t}`,f=await H.get(x);f.data.success&&(n.value=f.data.data)}catch(t){console.error("Error fetching leave details:",t),alert("Gagal memuat data cuti")}finally{c.value=!1}},p=()=>{m.value=!1,b.value=null,g.value="",n.value=[]},k=r=>r?new Date(r).toLocaleDateString("id-ID",{day:"2-digit",month:"long",year:"numeric"}):"-",L=r=>r?new Date(r).toLocaleDateString("id-ID",{day:"2-digit",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"}):"-";return(r,s)=>(a(),o(v,null,[e("div",S,[e("table",A,[s[1]||(s[1]=e("thead",null,[e("tr",null,[e("th",{class:"p-3 bg-gray-100 border-gray-200 border-y"},[e("div",{class:"font-medium text-center text-gray-600"}," No ")]),e("th",{class:"p-3 bg-gray-100 border border-gray-200"},[e("div",{class:"font-medium text-left text-gray-600"}," Nama & Jabatan Pekerja ")]),e("th",{class:"p-3 bg-gray-100 border border-gray-200"},[e("div",{class:"font-medium text-left text-gray-600"}," Total Hak Cuti ")]),e("th",{class:"p-3 bg-gray-100 border border-gray-200"},[e("div",{class:"font-medium text-left text-gray-600"}," Cuti Terpakai ")]),e("th",{class:"p-3 bg-gray-100 border border-gray-200"},[e("div",{class:"font-medium text-left text-gray-600"}," Sisa Cuti ")]),e("th",{class:"p-3 bg-gray-100 border-gray-200 border-y"},[e("div",{class:"font-medium text-left text-gray-600"}," Aksi ")])])],-1)),e("tbody",null,[h.value?(a(!0),o(v,{key:0},D(y.value,(t,x)=>(a(),o("tr",{key:t.id,class:"border-b border-gray-200"},[e("td",E,l((d.rows?.current_page-1)*d.rows?.per_page+x+1),1),e("td",V,[e("div",z,[t.employee.photo_url?(a(),o("img",{key:0,src:t.employee.photo_url?`/storage/${t.employee.photo_url}`:"",alt:"avatar",class:"object-cover w-8 h-8 rounded-full"},null,8,F)):(a(),_(N,{key:1,name:t.employee.name,gender:t.employee.gender||"",size:32},null,8,["name","gender"])),e("div",I,[e("span",P,l(t.employee.name),1),e("span",R,l(t.employee.role||"Staff"),1)])])]),e("td",Y,l(t.leave_annual??0)+" Hari",1),e("td",G,l(t.leave_annual_used??0)+" Hari",1),e("td",J,l((t.leave_annual??0)-(t.leave_annual_used??0))+" Hari ",1),e("td",K,[e("button",{onClick:f=>T(t.employee.id,t.employee.name),class:"text-blue-600 hover:underline focus:outline-none"}," Lihat Detail ",8,O)])]))),128)):(a(),o("tr",U,[...s[0]||(s[0]=[e("td",{colspan:"6",class:"py-6 text-center text-gray-500"}," Tidak ada data ",-1)])]))])])]),h.value?(a(),_($,{key:0,pagination:d.rows,class:"border-t"},null,8,["pagination"])):u("",!0),(a(),_(B,{to:"body"},[m.value?(a(),o("div",{key:0,class:"flex fixed inset-0 z-50 justify-center items-center bg-black bg-opacity-50",onClick:M(p,["self"])},[e("div",q,[e("div",Q,[e("h3",W," Detail Cuti - "+l(g.value),1),e("button",{onClick:p,class:"text-gray-400 hover:text-gray-600 focus:outline-none"},[...s[2]||(s[2]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",X,[c.value?(a(),o("div",Z,[...s[3]||(s[3]=[e("div",{class:"w-12 h-12 rounded-full border-b-2 border-blue-600 animate-spin"},null,-1)])])):!c.value&&n.value.length===0?(a(),o("div",ee,[...s[4]||(s[4]=[e("svg",{class:"mx-auto w-12 h-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),e("p",{class:"mt-4 text-gray-600"}," Tidak ada data cuti yang disetujui ",-1)])])):(a(),o("div",te,[(a(!0),o(v,null,D(n.value,t=>(a(),o("div",{key:t.id,class:"p-4 rounded-lg border border-gray-200 transition-shadow hover:shadow-md"},[e("div",se,[e("div",null,[e("h4",ae,l(t.leave_type),1),s[5]||(s[5]=e("span",{class:"inline-flex items-center px-2.5 py-0.5 mt-1 text-xs font-medium text-green-800 bg-green-100 rounded-full"}," Disetujui ",-1))]),e("div",oe,[e("p",le,l(t.total_days)+" Hari ",1)])]),e("div",re,[e("div",null,[s[6]||(s[6]=e("p",{class:"text-gray-500"},"Tanggal Mulai",-1)),e("p",ne,l(k(t.start_date)),1)]),e("div",null,[s[7]||(s[7]=e("p",{class:"text-gray-500"},"Tanggal Selesai",-1)),e("p",ie,l(k(t.end_date)),1)])]),t.reason&&t.reason!=="-"?(a(),o("div",de,[s[8]||(s[8]=e("p",{class:"text-sm text-gray-500"},"Alasan",-1)),e("p",ce,l(t.reason),1)])):u("",!0),t.approved_at?(a(),o("div",ue," Disetujui pada: "+l(L(t.approved_at)),1)):u("",!0)]))),128))]))]),e("div",{class:"flex justify-end p-6 border-t"},[e("button",{onClick:p,class:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg transition-colors hover:bg-gray-200"}," Tutup ")])])])):u("",!0)]))],64))}};export{pe as default};
