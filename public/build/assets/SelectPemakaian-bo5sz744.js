import{d as y,y as f,l as A,s as O,e as d,o as u,a as r,E as M,t as k,V as U,bt as q,K as G,G as R,f as C,F as J,i as Q,n as z,r as X,O as Y}from"./app-CJkCV51W.js";const Z=["disabled"],ee={class:"truncate text-left"},te={class:"p-3 border-b border-gray-100 dark:border-gray-600"},re=["onKeydown"],oe={class:"max-h-60 overflow-y-auto py-1","data-simplebar":""},ae={class:"font-medium"},le=["onClick"],ne={key:0,class:"w-2 h-2 rounded-full bg-white"},se={class:"text-gray-900 dark:text-gray-100"},ie={key:1,class:"px-4 py-6 text-center text-gray-500 dark:text-gray-400"},ue={__name:"SelectPemakaian",props:{items:{type:Array,default:()=>[]},modelValue:{type:[String,Number,null],default:null},label:{type:String,default:"Pilih Item"},taggable:{type:Boolean,default:!1},labelKey:{type:String,default:"name"},searchKey:{type:String,default:"name"},disabled:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(m,{emit:D}){const t=m,L=D,l=y(!1),n=y(""),c=y(null),V=y({}),_=f(()=>t.items.find(e=>e.id===t.modelValue)||null),j=f(()=>_.value?S(_.value):typeof t.modelValue=="string"&&t.modelValue?t.modelValue:t.label);function S(e){return t.labelKey&&e[t.labelKey]?e.type?.name?`${e[t.labelKey]} - ${e.type.name}`:e.branch?.name?`${e[t.labelKey]} - ${e.branch.name}`:e[t.labelKey]:e.name||""}const K=f(()=>{const e=(n.value||"").toLowerCase();return t.items.filter(o=>{const a=(o[t.searchKey]||"").toString().toLowerCase(),s=S(o).toLowerCase();return a.includes(e)||s.includes(e)})});function H(){l.value||setTimeout(()=>p(),0),l.value=!l.value}function p(){if(!c.value||!l.value)return;const e=c.value.getBoundingClientRect(),o=310,a=window.innerHeight,s=window.innerWidth;let i=e.bottom+8,b=e.left;const B=e.width,W=Math.min(s-32,400),x=Math.max(B,W);if(i+o>a){const N=e.top,P=a-e.bottom;N>P?i=e.top-o-8:i=a-o-8}i<8&&(i=8),b+x>s&&(b=s-x-16),b<16&&(b=16),V.value={top:`${i}px`,left:`${b}px`,minWidth:`${B}px`,width:`${x}px`,maxWidth:`${W}px`,maxHeight:`${o}px`}}function v(){l.value=!1}function T(e){L("update:modelValue",e.id),v()}function h(e){return t.modelValue===e.id}function E(e){c.value&&!c.value.contains(e.target)&&v()}function g(){l.value&&p()}A(()=>{document.addEventListener("click",E),window.addEventListener("resize",p),window.addEventListener("scroll",g,!0),document.body.addEventListener("scroll",g,!0)}),O(()=>{document.removeEventListener("click",E),window.removeEventListener("resize",p),window.removeEventListener("scroll",g,!0),document.body.removeEventListener("scroll",g,!0)});const F=f(()=>t.items.some(e=>(e[t.searchKey]||"").toString().toLowerCase()===(n.value||"").toLowerCase())),w=f(()=>t.taggable&&!!n.value&&!F.value);function $(){w.value&&(L("update:modelValue",n.value),v())}function I(){w.value&&$()}return(e,o)=>(u(),d("div",{class:"relative",ref_key:"dropdownWrapper",ref:c},[r("button",{onClick:H,disabled:t.disabled,type:"button",class:"w-full rounded-lg border border-gray-300 px-4 py-2.5 text-sm font-medium text-gray-700 bg-white dark:bg-gray-700 dark:text-white dark:border-gray-600 flex justify-between items-center hover:border-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-colors duration-150 disabled:opacity-50 disabled:cursor-not-allowed"},[r("span",ee,k(j.value),1),o[1]||(o[1]=r("svg",{class:"w-4 h-4 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1))],8,Z),M(r("div",{class:"fixed bg-white border border-gray-200 rounded-xl shadow-xl dark:bg-gray-700 dark:border-gray-600 z-[99999]",style:Y(V.value)},[r("div",te,[M(r("input",{"onUpdate:modelValue":o[0]||(o[0]=a=>n.value=a),type:"text",placeholder:"Cari...",onKeydown:q(G(I,["prevent"]),["enter"]),class:"w-full border border-gray-300 rounded-lg px-4 py-2.5 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 dark:bg-gray-600 dark:text-white dark:border-gray-500"},null,40,re),[[R,n.value]])]),r("ul",oe,[m.taggable&&w.value?(u(),d("li",{key:0,class:"px-4 py-3 cursor-pointer flex items-center gap-3 text-blue-600 hover:bg-blue-50 dark:hover:bg-gray-600 transition-colors duration-150",onClick:$},[o[2]||(o[2]=r("div",{class:"w-4 h-4 rounded-full border-2 border-blue-600 flex items-center justify-center"},[r("div",{class:"w-2 h-2 rounded-full bg-blue-600"})],-1)),r("span",ae,'Tambah: "'+k(n.value)+'"',1)])):C("",!0),(u(!0),d(J,null,Q(K.value,a=>(u(),d("li",{key:a.id,class:z(["px-4 py-3 cursor-pointer flex items-center gap-3 hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors duration-150",{"bg-blue-50 dark:bg-blue-900/20":h(a)}]),onClick:s=>T(a)},[r("div",{class:z(["w-4 h-4 rounded-full border-2 flex items-center justify-center transition-colors duration-150",h(a)?"border-blue-600 bg-blue-600":"border-gray-300 dark:border-gray-500"])},[h(a)?(u(),d("div",ne)):C("",!0)],2),X(e.$slots,"item",{item:a},()=>[r("span",se,k(a.name),1)])],10,le))),128)),!m.taggable&&K.value.length===0?(u(),d("li",ie,[...o[3]||(o[3]=[r("div",{class:"flex flex-col items-center gap-2"},[r("svg",{class:"w-8 h-8 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9.172 16.172a4 4 0 015.656 0M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})]),r("span",{class:"text-sm"},"Tidak ada hasil")],-1)])])):C("",!0)])],4),[[U,l.value]])],512))}};export{ue as _};
