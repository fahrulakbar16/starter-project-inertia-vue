import{d as R,y as D,z as B,U as I,e as u,o as p,b as n,a as e,g as m,D as O,w as v,h as g,P as k,E as b,J as S,G as C,F as c,i as h,t as o,S as F,f as Z,n as M,H}from"./app-CJkCV51W.js";import{_ as J}from"./Pagination-C2dOEo8X.js";import{_ as K}from"./Breadcrumb-BJQpsGcc.js";import{_ as Q}from"./AppLayout-BlEKf3Fz.js";import"./FlashMessage-D4C-FUm8.js";import"./LayoutShell-FWpWJLvi.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./useAuth-DvuTgkfF.js";import"./LayoutShell.vue_vue_type_style_index_0_lang-CRqqKi3W.js";const W={class:"flex overflow-hidden flex-col gap-3 px-3 h-full"},X={class:"flex justify-between items-center h-10"},Y={class:"flex flex-col overflow-hidden rounded-lg border border-gray-200 bg-white dark:border-gray-600 dark:bg-white/[0.03]"},ee={class:"flex flex-col gap-2 px-8 h-16 sm:flex-row sm:items-center sm:justify-between"},te={class:"flex gap-3 items-center"},re={class:"relative py-2"},ae={class:"overflow-auto overflow-x-auto","data-simplebar":""},se={class:"min-w-full text-sm table-fixed"},oe={class:"py-2.5 bg-gray-100 border-gray-200 border-y dark:border-gray-600 dark:bg-gray-800"},de={class:"py-2.5 bg-gray-100 border-gray-200 border-y dark:border-gray-600 dark:bg-gray-800"},le={class:"py-2.5 bg-gray-100 border-gray-200 border-y dark:border-gray-600 dark:bg-gray-800"},ne={class:"py-2.5 bg-gray-100 border-gray-200 border-y dark:border-gray-600 dark:bg-gray-800"},ie={class:"px-2 py-2 bg-gray-50 border-gray-200 border-y dark:border-gray-600 dark:bg-gray-900"},ue={class:"px-2 py-2 bg-gray-50 border border-gray-200 dark:border-gray-600 dark:bg-gray-900"},pe=["value"],ge={class:"px-2 py-2 bg-gray-50 border border-gray-200 dark:border-gray-600 dark:bg-gray-900"},ye=["value"],be={class:"px-2 py-2 bg-gray-50 border border-gray-200 dark:border-gray-600 dark:bg-gray-900"},xe={class:"grid grid-cols-2 gap-2"},me={class:"px-2 py-2 bg-gray-50 border border-gray-200 dark:border-gray-600 dark:bg-gray-900"},ce={key:0},fe={colspan:8,class:"px-4 py-2 font-semibold text-left text-gray-600 bg-gray-50 dark:bg-gray-900/40 dark:text-gray-300"},ve=["onClick"],ke={class:"text-xs"},he={class:"ml-1 text-xs font-medium text-gray-500"},we={class:"px-3 py-3"},_e={class:"px-3 py-3 font-mono"},qe={class:"px-3 py-3"},De={class:"px-3 py-3"},Be={class:"px-3 py-3"},Se={class:"px-3 py-3"},Ce={class:"px-3 py-3"},je={class:"px-3 py-3"},Pe={class:"flex gap-2 items-center"},Re={class:"px-3 py-3"},Ve={class:"px-3 py-3 font-mono"},$e={class:"px-3 py-3"},Te={class:"px-3 py-3"},Ue={class:"px-3 py-3"},Ge={class:"px-3 py-3"},Me={class:"px-3 py-3"},Le={class:"px-3 py-3"},Ne={class:"flex gap-2 items-center"},Ee={class:"flex justify-between items-center px-8 py-3"},ze={class:"text-xs text-gray-500"},Ae={components:{SortIcon:{props:{active:Boolean,direction:String},template:`
                <span class="inline-block ml-2 text-xs">
                    <template v-if="active">
                        {{ direction === 'asc' ? '▲' : '▼' }}
                    </template>
                    <template v-else>
                        ⇅
                    </template>
                </span>
            `}}},Xe=Object.assign(Ae,{layout:Q},{__name:"Index0",props:{purchaseRequests:{type:Object,required:!0},departments:{type:Array,required:!0},employees:{type:Array,required:!0},filters:{type:Object,default:()=>({})},sortBy:{type:String,default:"date"},sortDirection:{type:String,default:"desc"},groupBy:{type:String,default:null}},setup(l){const d=l,L=[{label:"Dashboard",href:route("dashboard")},{label:"Pengadaan Barang"}],s=R({q:d.filters.q??"",department_id:d.filters.department_id??null,employee_id:d.filters.employee_id??null,date_from:d.filters.date_from??"",date_to:d.filters.date_to??"",status:d.filters.status??""}),f=R(d.groupBy??""),w=D(()=>f.value||(d.groupBy??"")),V=D(()=>!!w.value),$=D(()=>{const a={},t=((d.purchaseRequests.current_page||1)-1)*(d.purchaseRequests.per_page||20);return(d.purchaseRequests.data||[]).forEach((r,x)=>{a[r.id]=t+x+1}),a}),j=R(new Set),N=D(()=>{if(!V.value)return{};const a=d.purchaseRequests.data||[],t={};for(const y of a){const r=E(y);t[r]||(t[r]=[]),t[r].push(y)}return t});function E(a){switch(w.value){case"department":return a.department??"Tanpa Departemen";case"requester":return a.requester?.name??"Tanpa Pemohon";case"status":return P(a.status);default:return"ungrouped"}}function z(a){switch(w.value){case"department":return`Departemen: ${a}`;case"requester":return`Pemohon: ${a}`;case"status":return`Status: ${a}`;default:return a}}function T(a){return j.value.has(a)}function A(a){const t=new Set(j.value);t.has(a)?t.delete(a):t.add(a),j.value=t}function _({sortBy:a=d.sortBy,sortDirection:t=d.sortDirection}={}){H.get(route("purchase-requests.index"),{...s.value,groupBy:w.value||null,sortBy:a,sortDirection:t},{preserveScroll:!0,preserveState:!0,replace:!0,onStart:()=>{typeof window<"u"&&(window.__suppressProgress=!0)},onFinish:()=>{typeof window<"u"&&(window.__suppressProgress=!1)}})}let U;B(()=>s.value.q,()=>{clearTimeout(U),U=setTimeout(()=>_({}),400)}),B(()=>[s.value.department_id,s.value.employee_id,s.value.status,s.value.date_from,s.value.date_to],()=>{_({})}),B(f,()=>{_({})}),B(()=>d.groupBy,a=>{!f.value&&a&&(f.value=a)});function q(a){const t=d.sortBy===a&&d.sortDirection==="asc"?"desc":"asc";_({sortBy:a,sortDirection:t})}function P(a){return{on_progress:"Menunggu Persetujuan",approved:"Disetujui",rejected:"Ditolak",canceled:"Dibatalkan",partial_approved:"Disetujui Sebagian"}[a]??a}function G(a){return{on_progress:"bg-yellow-100 text-yellow-800 dark:bg-yellow-500/20 dark:text-yellow-300",approved:"bg-emerald-100 text-emerald-800 dark:bg-emerald-500/20 dark:text-emerald-300",rejected:"bg-rose-100 text-rose-800 dark:bg-rose-500/20 dark:text-rose-300",canceled:"bg-slate-100 text-slate-700 dark:bg-slate-500/20 dark:text-slate-300",partial_approved:"bg-violet-100 text-violet-800 dark:bg-violet-500/20 dark:text-violet-300"}[a]??"bg-gray-100 text-gray-700"}return(a,t)=>{const y=I("SortIcon");return p(),u(c,null,[n(m(O),{title:"Pengadaan Barang"}),e("div",W,[e("div",X,[n(K,{items:L}),e("div",null,[n(m(k),{href:a.route("purchase-requests.create"),class:"inline-flex items-center px-3 py-2 text-sm font-medium text-white rounded-md bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"},{default:v(()=>[...t[12]||(t[12]=[g(" Buat PR ",-1)])]),_:1},8,["href"])])]),e("div",Y,[e("div",ee,[t[16]||(t[16]=e("div",{class:"font-bold text-gray-700 md:text-xl dark:text-gray-300"}," Daftar Pengadaan Barang ",-1)),e("div",te,[e("div",null,[b(e("select",{"onUpdate:modelValue":t[0]||(t[0]=r=>f.value=r),class:"px-3 h-10 text-sm text-gray-800 bg-transparent rounded-lg border border-gray-200 dark:border-gray-700 dark:bg-gray-800 dark:text-white/90"},[...t[13]||(t[13]=[e("option",{value:""},"Kelompokan Berdasarkan",-1),e("option",{value:"department"}," Group: Departemen ",-1),e("option",{value:"requester"},"Group: Pemohon",-1),e("option",{value:"status"},"Group: Status",-1)])],512),[[S,f.value]])]),e("div",re,[t[14]||(t[14]=e("div",{class:"absolute left-4 top-1/2 text-gray-400 -translate-y-1/2"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"size-5"},[e("path",{"fill-rule":"evenodd",d:"M10.5 3.75a6.75 6.75 0 1 0 4.215 12.06l3.237 3.238a.75.75 0 1 0 1.06-1.061l-3.238-3.237A6.75 6.75 0 0 0 10.5 3.75Zm-5.25 6.75a5.25 5.25 0 1 1 10.5 0 5.25 5.25 0 0 1-10.5 0Z","clip-rule":"evenodd"})])],-1)),b(e("input",{"onUpdate:modelValue":t[1]||(t[1]=r=>s.value.q=r),type:"text",placeholder:"Cari nomor / pemohon",class:"h-10 w-full rounded-lg border border-gray-200 bg-transparent py-2.5 pl-12 pr-4 text-sm text-gray-800 placeholder:text-gray-400 focus:border-blue-300 focus:outline-hidden focus:ring-3 focus:ring-blue-500/10 dark:border-gray-700 dark:bg-gray-800 dark:text-white/90 dark:placeholder:text-gray-400 dark:focus:border-blue-800 xl:w-[240px]"},null,512),[[C,s.value.q]])]),e("div",null,[n(m(k),{href:a.route("purchase-requests.create"),class:"inline-flex items-center gap-2 rounded-lg border border-gray-300 bg-blue-500 px-4 py-2 text-sm font-medium text-white-700 hover:bg-gray-50 hover:text-gray-800 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-400 dark:hover:bg-white/[0.03] dark:hover:text-gray-200"},{default:v(()=>[...t[15]||(t[15]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"size-4"},[e("path",{"fill-rule":"evenodd",d:"M12 3.75a.75.75 0 0 1 .75.75v6.75h6.75a.75.75 0 0 1 0 1.5h-6.75v6.75a.75.75 0 0 1-1.5 0v-6.75H4.5a.75.75 0 0 1 0-1.5h6.75V4.5a.75.75 0 0 1 .75-.75Z","clip-rule":"evenodd"})],-1),g(" Buat Permintaan ",-1)])]),_:1},8,["href"])])])]),e("div",ae,[e("table",se,[t[36]||(t[36]=e("colgroup",null,[e("col",{style:{width:"70px"}}),e("col",{style:{width:"180px"}}),e("col",{style:{width:"180px"}}),e("col",{style:{width:"200px"}}),e("col",{style:{width:"220px"}}),e("col",{style:{width:"160px"}}),e("col",{style:{width:"140px"}}),e("col",{style:{width:"140px"}})],-1)),e("thead",null,[e("tr",null,[t[21]||(t[21]=e("th",{class:"py-2.5 bg-gray-100 border-gray-200 border-y dark:border-gray-600 dark:bg-gray-800"},[e("div",{class:"px-3 font-medium text-gray-600 dark:text-gray-300"}," No. ")],-1)),t[22]||(t[22]=e("th",{class:"py-2.5 bg-gray-100 border-gray-200 border-y dark:border-gray-600 dark:bg-gray-800"},[e("div",{class:"px-3 font-medium text-gray-600 dark:text-gray-300"}," No. PR ")],-1)),t[23]||(t[23]=e("th",{class:"py-2.5 bg-gray-100 border-gray-200 border-y dark:border-gray-600 dark:bg-gray-800"},[e("div",{class:"px-3 font-medium text-gray-600 dark:text-gray-300"}," Referensi (MR) ")],-1)),e("th",oe,[e("button",{onClick:t[2]||(t[2]=r=>q("department")),class:"px-3 w-full font-medium text-left text-gray-600 dark:text-gray-300"},[t[17]||(t[17]=g(" Departemen ",-1)),n(y,{active:l.sortBy==="department",direction:l.sortDirection},null,8,["active","direction"])])]),e("th",de,[e("button",{onClick:t[3]||(t[3]=r=>q("requester")),class:"px-3 w-full font-medium text-left text-gray-600 dark:text-gray-300"},[t[18]||(t[18]=g(" Diminta oleh ",-1)),n(y,{active:l.sortBy==="requester",direction:l.sortDirection},null,8,["active","direction"])])]),e("th",le,[e("button",{onClick:t[4]||(t[4]=r=>q("date")),class:"px-3 w-full font-medium text-left text-gray-600 dark:text-gray-300"},[t[19]||(t[19]=g(" Tanggal Permintaan ",-1)),n(y,{active:l.sortBy==="date",direction:l.sortDirection},null,8,["active","direction"])])]),e("th",ne,[e("button",{onClick:t[5]||(t[5]=r=>q("status")),class:"px-3 w-full font-medium text-left text-gray-600 dark:text-gray-300"},[t[20]||(t[20]=g(" Status ",-1)),n(y,{active:l.sortBy==="status",direction:l.sortDirection},null,8,["active","direction"])])]),t[24]||(t[24]=e("th",{class:"py-2.5 bg-gray-100 border-gray-200 border-y dark:border-gray-600 dark:bg-gray-800"},[e("div",{class:"px-3 font-medium text-gray-600 dark:text-gray-300"}," Aksi ")],-1))]),e("tr",null,[t[28]||(t[28]=e("th",{class:"px-2 py-2 bg-gray-50 border-gray-200 border-y dark:border-gray-600 dark:bg-gray-900"},null,-1)),e("th",ie,[b(e("input",{"onUpdate:modelValue":t[6]||(t[6]=r=>s.value.q=r),type:"text",placeholder:"Cari nomor / pemohon",class:"px-3 w-full h-10 text-xs rounded border-gray-300 sm:text-sm dark:border-gray-700 dark:bg-gray-800 dark:text-white/90"},null,512),[[C,s.value.q]])]),t[29]||(t[29]=e("th",{class:"px-2 py-2 bg-gray-50 border border-gray-200 dark:border-gray-600 dark:bg-gray-900"},null,-1)),e("th",ue,[b(e("select",{"onUpdate:modelValue":t[7]||(t[7]=r=>s.value.department_id=r),class:"px-3 w-full h-10 text-xs rounded border-gray-300 sm:text-sm dark:border-gray-700 dark:bg-gray-800 dark:text-white/90"},[t[25]||(t[25]=e("option",{value:null},"Semua",-1)),(p(!0),u(c,null,h(l.departments,r=>(p(),u("option",{key:r.id,value:r.id},o(r.name),9,pe))),128))],512),[[S,s.value.department_id]])]),e("th",ge,[b(e("select",{"onUpdate:modelValue":t[8]||(t[8]=r=>s.value.employee_id=r),class:"px-3 w-full h-10 text-xs rounded border-gray-300 sm:text-sm dark:border-gray-700 dark:bg-gray-800 dark:text-white/90"},[t[26]||(t[26]=e("option",{value:null},"Semua",-1)),(p(!0),u(c,null,h(l.employees,r=>(p(),u("option",{key:r.id,value:r.id},o(r.name),9,ye))),128))],512),[[S,s.value.employee_id]])]),e("th",be,[e("div",xe,[b(e("input",{"onUpdate:modelValue":t[9]||(t[9]=r=>s.value.date_from=r),type:"date",class:"px-2 w-full h-10 text-xs rounded border-gray-300 sm:text-sm dark:border-gray-700 dark:bg-gray-800 dark:text-white/90"},null,512),[[C,s.value.date_from]]),b(e("input",{"onUpdate:modelValue":t[10]||(t[10]=r=>s.value.date_to=r),type:"date",class:"px-2 w-full h-10 text-xs rounded border-gray-300 sm:text-sm dark:border-gray-700 dark:bg-gray-800 dark:text-white/90"},null,512),[[C,s.value.date_to]])])]),e("th",me,[b(e("select",{"onUpdate:modelValue":t[11]||(t[11]=r=>s.value.status=r),class:"px-3 w-full h-10 text-xs rounded border-gray-300 sm:text-sm dark:border-gray-700 dark:bg-gray-800 dark:text-white/90"},[...t[27]||(t[27]=[F('<option value="">Semua</option><option value="on_progress"> Menunggu Persetujuan </option><option value="approved">Disetujui</option><option value="rejected">Ditolak</option><option value="canceled">Dibatalkan</option><option value="partial_approved"> Disetujui Sebagian </option>',6)])],512),[[S,s.value.status]])]),t[30]||(t[30]=e("th",{class:"px-2 py-2 bg-gray-50 border-gray-200 border-y dark:border-gray-600 dark:bg-gray-900"},null,-1))])]),e("tbody",null,[!l.purchaseRequests.data||l.purchaseRequests.data.length===0?(p(),u("tr",ce,[...t[31]||(t[31]=[e("td",{colspan:"8",class:"py-8 text-center text-gray-500"}," Tidak ada data ",-1)])])):V.value?(p(!0),u(c,{key:1},h(N.value,(r,x)=>(p(),u(c,{key:x},[e("tr",null,[e("td",fe,[e("button",{class:"inline-flex gap-2 items-center",onClick:i=>A(x)},[e("span",ke,o(T(x)?"▶":"▼"),1),e("span",null,o(z(x)),1),e("span",he,"("+o(r.length)+")",1)],8,ve)])]),T(x)?Z("",!0):(p(!0),u(c,{key:0},h(r,i=>(p(),u("tr",{key:i.id,class:"border-b border-gray-200 dark:border-gray-700"},[e("td",we,o($.value[i.id]??"-"),1),e("td",_e,o(i.number),1),e("td",qe,o(i.from_mr?.number||"-"),1),e("td",De,o(i.department),1),e("td",Be,o(i.requester?.name||"-"),1),e("td",Se,o(i.date),1),e("td",Ce,[e("span",{class:M([G(i.status),"px-2.5 py-1 text-xs font-medium rounded-full"])},o(P(i.status)),3)]),e("td",je,[e("div",Pe,[n(m(k),{href:a.route("purchase-requests.show",i.id),class:"text-primary-600 hover:underline"},{default:v(()=>[...t[32]||(t[32]=[g("Lihat",-1)])]),_:1},8,["href"]),n(m(k),{href:a.route("purchase-requests.edit",i.id),class:"inline-flex items-center px-2 py-1 text-xs text-gray-700 rounded border border-gray-300 hover:bg-gray-50 dark:border-gray-700 dark:text-gray-300"},{default:v(()=>[...t[33]||(t[33]=[g("Edit",-1)])]),_:1},8,["href"])])])]))),128))],64))),128)):(p(!0),u(c,{key:2},h(l.purchaseRequests.data,r=>(p(),u("tr",{key:r.id,class:"border-b border-gray-200 dark:border-gray-700"},[e("td",Re,o($.value[r.id]??"-"),1),e("td",Ve,o(r.number),1),e("td",$e,o(r.from_mr?.number||"-"),1),e("td",Te,o(r.department),1),e("td",Ue,o(r.requester?.name||"-"),1),e("td",Ge,o(r.date),1),e("td",Me,[e("span",{class:M([G(r.status),"px-2.5 py-1 text-xs font-medium rounded-full"])},o(P(r.status)),3)]),e("td",Le,[e("div",Ne,[n(m(k),{href:a.route("purchase-requests.show",r.id),class:"text-primary-600 hover:underline"},{default:v(()=>[...t[34]||(t[34]=[g("Lihat",-1)])]),_:1},8,["href"]),n(m(k),{href:a.route("purchase-requests.edit",r.id),class:"inline-flex items-center px-2 py-1 text-xs text-gray-700 rounded border border-gray-300 hover:bg-gray-50 dark:border-gray-700 dark:text-gray-300"},{default:v(()=>[...t[35]||(t[35]=[g("Edit",-1)])]),_:1},8,["href"])])])]))),128))])])]),e("div",Ee,[e("div",ze," Total: "+o(l.purchaseRequests.total),1),n(J,{pagination:l.purchaseRequests},null,8,["pagination"])])])])],64)}}});export{Xe as default};
