import{d as c,y as f,e as l,o as i,f as g,a as t,t as a,n as b,E as S,J as z,F as D,i as O,G as E,O as N,H as P}from"./app-CJkCV51W.js";const V={key:0,class:"fixed inset-0 z-[9999] bg-black bg-opacity-50 flex items-center justify-center p-4"},H={key:0,class:"flex items-center justify-center p-8"},G={key:1,class:"flex items-center justify-center p-8"},I={class:"text-center"},J={class:"text-red-600 mb-4"},R={key:2,class:"space-y-5 p-6"},q={key:0,class:"space-y-3"},U={class:"p-3 bg-gray-50 rounded border"},$={class:"text-gray-900 text-sm"},W={class:"p-3 bg-gray-50 rounded border"},Y={class:"text-gray-900 text-sm"},Q={class:"p-3 bg-gray-50 rounded border"},X={class:"text-gray-900 text-sm"},Z={class:"p-3 bg-gray-50 rounded border"},tt={class:"text-gray-900 text-sm"},st={class:"flex flex-wrap gap-6 items-end"},et={class:"flex-1 min-w-[140px]"},at={class:"p-3 bg-gray-50 rounded border"},ot={class:"text-gray-900 text-sm"},nt={class:"flex-1 min-w-[140px]"},lt={class:"p-3 bg-gray-50 rounded border"},it={class:"text-gray-900 text-sm"},dt={class:"flex flex-wrap gap-6 items-end"},rt={class:"flex-1 min-w-[140px]"},ut={class:"p-3 bg-gray-50 rounded border"},mt={class:"text-gray-900 text-sm"},bt={class:"flex-1 min-w-[140px]"},gt={class:"p-3 bg-gray-50 rounded border"},ct={class:"text-gray-900 text-sm"},xt={class:"p-3 bg-gray-50 rounded border"},yt={class:"text-gray-900 text-sm"},ft={class:"p-3 bg-gray-50 rounded border min-h-[80px]"},vt={class:"text-gray-900 text-sm leading-relaxed"},pt={class:"flex flex-wrap gap-6 items-end"},ht={class:"flex-1 min-w-[140px]"},kt={class:"p-3 bg-gray-50 rounded border"},wt={class:"flex-1 min-w-[140px]"},_t={class:"p-3 bg-gray-50 rounded border"},jt={class:"text-gray-900 text-sm"},Ct={key:0},St={class:"p-3 bg-gray-50 rounded border"},Dt={class:"text-gray-900 text-sm"},Mt={key:1,class:"space-y-3"},Tt={class:"p-3 bg-gray-50 rounded border"},Bt={class:"text-gray-900 text-sm"},Lt={class:"p-3 bg-gray-50 rounded border"},At={class:"text-gray-900 text-sm"},Ft={class:"p-3 bg-gray-50 rounded border"},Kt={class:"text-gray-900 text-sm"},zt={class:"p-3 bg-gray-50 rounded border"},Ot={class:"text-gray-900 text-sm"},Et={class:"flex flex-wrap gap-6 items-end"},Nt={class:"flex-1 min-w-[140px]"},Pt={class:"p-3 bg-gray-50 rounded border"},Vt={class:"text-gray-900 text-sm"},Ht={class:"flex-1 min-w-[140px]"},Gt={class:"p-3 bg-gray-50 rounded border"},It={class:"text-gray-900 text-sm"},Jt={class:"flex flex-wrap gap-6 items-end"},Rt={class:"flex-1 min-w-[140px]"},qt={class:"p-3 bg-gray-50 rounded border"},Ut={class:"text-gray-900 text-sm"},$t={class:"flex-1 min-w-[140px]"},Wt={class:"p-3 bg-gray-50 rounded border"},Yt={class:"text-gray-900 text-sm"},Qt={class:"p-3 bg-gray-50 rounded border"},Xt={class:"text-gray-900 text-sm"},Zt={class:"p-3 bg-gray-50 rounded border min-h-[80px]"},ts={class:"text-gray-900 text-sm leading-relaxed"},ss={class:"p-3 bg-gray-50 rounded border"},es={class:"border-t pt-4"},as=["value"],os={key:0,class:"text-red-500 text-xs mt-1"},ns={class:"mt-4"},ls={key:0,class:"text-red-500 text-xs mt-1"},is={class:"flex justify-end gap-3 mt-6"},ds=["disabled"],rs={key:1,class:"fixed inset-0 z-[10000] bg-black bg-opacity-50 flex items-center justify-center p-4"},us={class:"bg-white rounded-lg shadow-xl max-w-md w-full"},ms={class:"p-6"},bs={class:"text-gray-600 mb-6"},gs={class:"flex justify-end gap-3"},cs=["disabled"],ys={__name:"DetailDailyReport",props:{isOpen:{type:Boolean,default:!1},submission:{type:Object,required:!0},submission_statuses:{type:Array,required:!0},loading:{type:Boolean,default:!1},error:{type:String,default:null}},emits:["close","update-success"],setup(e,{emit:M}){const n=e,x=M,m=c(!1),y=c(!1),d=c({}),u=c(typeof n.submission?.data?.status<"u"?n.submission?.data?.status:n.submission?.status??"pending"),h=c(n.submission?.data?.notes||""),v=f(()=>{const o=n.submission?.data?.status??n.submission?.status??"pending";return o==="approved"||o==="rejected"}),T=f(()=>v.value?"max-w-2xl":"max-w-4xl"),B=f(()=>u.value&&u.value!=="pending"),L=f(()=>B.value&&!m.value),k=o=>o?new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0,maximumFractionDigits:0}).format(o):"-",p=o=>({pending:"Menunggu",approved:"Disetujui",rejected:"Ditolak",cancelled:"Dibatalkan"})[o]||"Menunggu",w=o=>({pending:"bg-yellow-100 text-yellow-800",approved:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800",cancelled:"bg-gray-100 text-gray-800"})[o]||"bg-gray-100 text-gray-800",_=o=>({pending:"bg-yellow-500",approved:"bg-green-500",rejected:"bg-red-500",cancelled:"bg-gray-500"})[o]||"bg-gray-500";function A(){d.value.status&&delete d.value.status}function j(){return d.value={},!u.value||u.value==="pending"?(d.value.status="Status harus dipilih",!1):!0}function F(){n.submission&&j()&&(y.value=!0)}function C(){x("close")}function K(){n.submission&&j()&&(m.value=!0,y.value=!1,P.put(route("submission.employee.update",n.submission?.data?.id),{status:u.value,notes:n.submission?.data.notes||""},{onStart:()=>{m.value=!0},onSuccess:()=>{x("close"),x("update-success")},onError:o=>{console.error("Error confirming submission:",o),d.value=o,alert("Terjadi kesalahan saat mengkonfirmasi pengajuan")},onFinish:()=>{m.value=!1}}))}return(o,s)=>(i(),l(D,null,[e.isOpen?(i(),l("div",V,[t("div",{class:b(["bg-white rounded-lg shadow-xl w-full",T.value]),style:N(v.value?"max-height:80vh; max-width: 50vw; margin-top: 3vh; overflow-y: auto;":"max-height:88vh; max-width: 40vw; margin-top: 5vh; overflow-y: auto;")},[t("div",{class:"flex items-center justify-between p-4 border-b border-gray-200"},[s[5]||(s[5]=t("h2",{class:"text-xl font-bold text-gray-900"},"Detail Pengajuan Laporan Harian",-1)),t("button",{onClick:C,class:"text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-full p-2 transition-colors",title:"Tutup"},[...s[4]||(s[4]=[t("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),n.loading?(i(),l("div",H,[...s[6]||(s[6]=[t("div",{class:"text-center"},[t("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),t("p",{class:"text-gray-600"},"Memuat detail pengajuan...")],-1)])])):n.error?(i(),l("div",G,[t("div",I,[s[7]||(s[7]=t("div",{class:"text-red-500 mb-4"},[t("svg",{class:"w-12 h-12 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})])],-1)),t("p",J,a(n.error),1),t("button",{onClick:s[0]||(s[0]=r=>x("close")),class:"px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600"}," Tutup ")])])):e.submission&&e.submission.data?(i(),l("div",R,[v.value?(i(),l("div",q,[t("div",null,[s[8]||(s[8]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Nama",-1)),t("div",U,[t("p",$,a(e.submission?.data?.employee?.name||"-"),1)])]),t("div",null,[s[9]||(s[9]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Cabang",-1)),t("div",W,[t("p",Y,a(e.submission?.data?.employee?.branch||"-"),1)])]),t("div",null,[s[10]||(s[10]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Departemen",-1)),t("div",Q,[t("p",X,a(e.submission?.data?.employee?.department||"-"),1)])]),t("div",null,[s[11]||(s[11]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Tanggal Pengajuan",-1)),t("div",Z,[t("p",tt,a(e.submission?.data?.submission_date||"-"),1)])]),t("div",st,[t("div",et,[s[12]||(s[12]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Tanggal Mulai",-1)),t("div",at,[t("p",ot,a(e.submission?.data?.start_date||"-"),1)])]),t("div",nt,[s[13]||(s[13]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Tanggal Selesai",-1)),t("div",lt,[t("p",it,a(e.submission?.data?.end_date||"-"),1)])])]),t("div",dt,[t("div",rt,[s[14]||(s[14]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Jumlah Karyawan",-1)),t("div",ut,[t("p",mt,a(e.submission?.data?.count_employee||"-")+" orang ",1)])]),t("div",bt,[s[15]||(s[15]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Gaji Harian",-1)),t("div",gt,[t("p",ct,a(k(e.submission?.data?.salary)||"-"),1)])])]),t("div",null,[s[16]||(s[16]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Alasan Laporan",-1)),t("div",xt,[t("p",yt,a(e.submission?.data?.reason||"-"),1)])]),t("div",null,[s[17]||(s[17]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Catatan",-1)),t("div",ft,[t("p",vt,a(e.submission?.data?.notes||"-"),1)])]),t("div",pt,[t("div",ht,[s[18]||(s[18]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Status",-1)),t("div",kt,[t("div",{class:b(["flex gap-2 items-center px-3 py-1 rounded-full text-sm font-medium",w(e.submission?.data?.status)])},[t("span",{class:b(["w-2 h-2 rounded-full",_(e.submission?.data?.status)])},null,2),t("span",null,a(p(e.submission?.data?.status)),1)],2)])]),t("div",wt,[s[19]||(s[19]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Disetujui Oleh",-1)),t("div",_t,[t("p",jt,a(e.submission?.data?.approved?.name||"-"),1)])])]),e.submission?.data?.approved_at?(i(),l("div",Ct,[s[20]||(s[20]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Tanggal Disetujui",-1)),t("div",St,[t("p",Dt,a(e.submission?.data?.approved_at||"-"),1)])])):g("",!0)])):(i(),l("div",Mt,[t("div",null,[s[21]||(s[21]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Nama",-1)),t("div",Tt,[t("p",Bt,a(e.submission?.data?.employee?.name||"-"),1)])]),t("div",null,[s[22]||(s[22]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Cabang",-1)),t("div",Lt,[t("p",At,a(e.submission?.data?.employee?.branch||"-"),1)])]),t("div",null,[s[23]||(s[23]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Departemen",-1)),t("div",Ft,[t("p",Kt,a(e.submission?.data?.employee?.department||"-"),1)])]),t("div",null,[s[24]||(s[24]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Tanggal Pengajuan",-1)),t("div",zt,[t("p",Ot,a(e.submission?.data?.submission_date||"-"),1)])]),t("div",Et,[t("div",Nt,[s[25]||(s[25]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Tanggal Mulai",-1)),t("div",Pt,[t("p",Vt,a(e.submission?.data?.start_date||"-"),1)])]),t("div",Ht,[s[26]||(s[26]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Tanggal Selesai",-1)),t("div",Gt,[t("p",It,a(e.submission?.data?.end_date||"-"),1)])])]),t("div",Jt,[t("div",Rt,[s[27]||(s[27]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Jumlah Karyawan",-1)),t("div",qt,[t("p",Ut,a(e.submission?.data?.count_employee||"-")+" orang ",1)])]),t("div",$t,[s[28]||(s[28]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Gaji Harian",-1)),t("div",Wt,[t("p",Yt,a(k(e.submission?.data?.salary)||"-"),1)])])]),t("div",null,[s[29]||(s[29]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Alasan Laporan",-1)),t("div",Qt,[t("p",Xt,a(e.submission?.data?.reason||"-"),1)])]),t("div",null,[s[30]||(s[30]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Catatan",-1)),t("div",Zt,[t("p",ts,a(e.submission?.data?.notes||"-"),1)])]),t("div",null,[s[31]||(s[31]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Status",-1)),t("div",ss,[t("div",{class:b(["flex gap-2 items-center px-3 py-1 rounded-full text-sm font-medium",w(e.submission?.data?.status)])},[t("span",{class:b(["w-2 h-2 rounded-full",_(e.submission?.data?.status)])},null,2),t("span",null,a(p(e.submission?.data?.status)),1)],2)])]),t("div",es,[s[34]||(s[34]=t("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Konfirmasi Pengajuan",-1)),t("div",null,[s[32]||(s[32]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Status",-1)),t("div",{class:b(["bg-gray-50 rounded border",{"border-red-300":d.value.status}])},[S(t("select",{"onUpdate:modelValue":s[1]||(s[1]=r=>u.value=r),class:"w-full bg-transparent text-gray-900 text-sm focus:outline-none p-2",onChange:A},[(i(!0),l(D,null,O(e.submission.submission_statuses,r=>(i(),l("option",{value:r.value,key:r.value},a(r.label),9,as))),128))],544),[[z,u.value]])],2),d.value.status?(i(),l("p",os,a(d.value.status),1)):g("",!0)]),t("div",ns,[s[33]||(s[33]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Keterangan Admin",-1)),t("div",{class:b(["bg-gray-50 rounded border",{"border-red-300":d.value.notes}])},[S(t("textarea",{"onUpdate:modelValue":s[2]||(s[2]=r=>h.value=r),class:"w-full bg-transparent text-gray-900 text-sm focus:outline-none p-2 resize-none",rows:"3",placeholder:"Masukkan keterangan admin..."},null,512),[[E,h.value]])],2),d.value.notes?(i(),l("p",ls,a(d.value.notes),1)):g("",!0)]),t("div",is,[t("button",{onClick:C,class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"}," Batal "),t("button",{onClick:F,disabled:!L.value,class:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed"},a(m.value?"Memproses...":"Konfirmasi"),9,ds)])])]))])):g("",!0)],6)])):g("",!0),y.value?(i(),l("div",rs,[t("div",us,[t("div",ms,[s[35]||(s[35]=t("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Konfirmasi Aksi",-1)),t("p",bs," Apakah Anda yakin ingin "+a(p(u.value).toLowerCase())+" pengajuan ini? ",1),t("div",gs,[t("button",{onClick:s[3]||(s[3]=r=>y.value=!1),class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"}," Batal "),t("button",{onClick:K,disabled:m.value,class:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed"},a(m.value?"Memproses...":"Ya, Konfirmasi"),9,cs)])])])])):g("",!0)],64))}};export{ys as default};
