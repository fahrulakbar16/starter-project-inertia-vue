import{d as q,y as _,z as B,U as A,e as u,o as g,b as i,a as e,g as x,D as F,w as m,h as y,P as v,E as c,J as P,G as S,F as k,i as D,t as s,S as R,f as Z,n as N,H}from"./app-CJkCV51W.js";import{_ as J}from"./Pagination-C2dOEo8X.js";import{_ as K}from"./Breadcrumb-BJQpsGcc.js";import{_ as Q}from"./AppLayout-BlEKf3Fz.js";import"./FlashMessage-D4C-FUm8.js";import"./LayoutShell-FWpWJLvi.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./useAuth-DvuTgkfF.js";import"./LayoutShell.vue_vue_type_style_index_0_lang-CRqqKi3W.js";const W={class:"flex overflow-hidden flex-col gap-3 px-3 h-full"},X={class:"flex justify-between items-center h-10"},Y={class:"flex flex-col overflow-hidden rounded-lg border border-gray-200 bg-white dark:border-gray-600 dark:bg-white/[0.03]"},ee={class:"flex flex-col gap-2 px-8 h-16 sm:flex-row sm:items-center sm:justify-between"},te={class:"flex gap-3 items-center"},re={class:"relative py-2"},ae={class:"overflow-auto overflow-x-auto","data-simplebar":""},se={class:"min-w-full text-sm table-fixed"},oe={class:"py-2.5 bg-gray-100 border-gray-200 border-y dark:border-gray-600 dark:bg-gray-800"},de={class:"py-2.5 bg-gray-100 border-gray-200 border-y dark:border-gray-600 dark:bg-gray-800"},le={class:"py-2.5 bg-gray-100 border-gray-200 border-y dark:border-gray-600 dark:bg-gray-800"},ne={class:"px-2 py-2 bg-gray-50 border-gray-200 border-y dark:border-gray-600 dark:bg-gray-900"},ie={class:"px-2 py-2 bg-gray-50 border border-gray-200 dark:border-gray-600 dark:bg-gray-900"},ue=["value"],ge={class:"px-2 py-2 bg-gray-50 border border-gray-200 dark:border-gray-600 dark:bg-gray-900"},ye={class:"grid grid-cols-2 gap-2"},pe={class:"px-2 py-2 bg-gray-50 border border-gray-200 dark:border-gray-600 dark:bg-gray-900"},be={key:0},xe={colspan:9,class:"px-4 py-2 font-semibold text-left text-gray-600 bg-gray-50 dark:bg-gray-900/40 dark:text-gray-300"},ce=["onClick"],fe={class:"text-xs"},me={class:"ml-1 text-xs font-medium text-gray-500"},ve={class:"px-3 py-3"},ke={class:"px-3 py-3 font-mono"},he={class:"px-3 py-3"},we={class:"px-3 py-3"},_e={class:"px-3 py-3"},Be={class:"px-3 py-3"},Se={class:"px-3 py-3"},De={class:"px-3 py-3"},Ve={class:"px-3 py-3"},Ce={class:"flex gap-2 items-center"},je={class:"px-3 py-3"},qe={class:"px-3 py-3 font-mono"},Pe={class:"px-3 py-3"},Te={class:"px-3 py-3"},$e={class:"px-3 py-3"},Ge={class:"px-3 py-3"},Ue={class:"px-3 py-3"},Le={class:"px-3 py-3"},Ne={class:"px-3 py-3"},Ee={class:"flex gap-2 items-center"},Ie={class:"flex justify-between items-center px-8 py-3"},Me={class:"text-xs text-gray-500"},Oe={components:{SortIcon:{props:{active:Boolean,direction:String},template:`
                <span class="inline-block ml-2 text-xs">
                    <template v-if="active">
                        {{ direction === 'asc' ? '▲' : '▼' }}
                    </template>
                    <template v-else>
                        ⇅
                    </template>
                </span>
            `}}},We=Object.assign(Oe,{layout:Q},{__name:"Index0",props:{receives:{type:Object,required:!0},vendors:{type:Array,required:!0},filters:{type:Object,default:()=>({})},sortBy:{type:String,default:"date"},sortDirection:{type:String,default:"desc"},groupBy:{type:String,default:null}},setup(l){const d=l,E=[{label:"Dashboard",href:route("dashboard")},{label:"Penerimaan Barang"}],o=q({q:d.filters.q??"",vendor_id:d.filters.vendor_id??null,date_from:d.filters.date_from??"",date_to:d.filters.date_to??"",status:d.filters.status??""}),f=q(d.groupBy??""),h=_(()=>f.value||(d.groupBy??"")),T=_(()=>!!h.value),$=_(()=>{const a={},t=((d.receives.current_page||1)-1)*(d.receives.per_page||20);return(d.receives.data||[]).forEach((r,b)=>{a[r.id]=t+b+1}),a}),V=q(new Set),I=_(()=>{if(!T.value)return{};const a=d.receives.data||[],t={};for(const p of a){const r=M(p);t[r]||(t[r]=[]),t[r].push(p)}return t});function M(a){switch(h.value){case"vendor":return a.vendor?.name??"Tanpa Vendor";case"status":return j(a.status);default:return"ungrouped"}}function O(a){switch(h.value){case"vendor":return`Vendor: ${a}`;case"status":return`Status: ${a}`;default:return a}}function G(a){return V.value.has(a)}function z(a){const t=new Set(V.value);t.has(a)?t.delete(a):t.add(a),V.value=t}function w({sortBy:a=d.sortBy,sortDirection:t=d.sortDirection}={}){H.get(route("good-receipts.index"),{...o.value,groupBy:h.value||null,sortBy:a,sortDirection:t},{preserveScroll:!0,preserveState:!0,replace:!0,onStart:()=>{typeof window<"u"&&(window.__suppressProgress=!0)},onFinish:()=>{typeof window<"u"&&(window.__suppressProgress=!1)}})}let U;B(()=>o.value.q,()=>{clearTimeout(U),U=setTimeout(()=>w({}),400)}),B(()=>[o.value.department_id,o.value.employee_id,o.value.status,o.value.date_from,o.value.date_to],()=>{w({})}),B(f,()=>{w({})}),B(()=>d.groupBy,a=>{!f.value&&a&&(f.value=a)});function C(a){const t=d.sortBy===a&&d.sortDirection==="asc"?"desc":"asc";w({sortBy:a,sortDirection:t})}function j(a){return{draft:"Draft",submitted:"Diajukan",approved:"Disetujui",rejected:"Ditolak",completed:"Selesai"}[a]??a}function L(a){return{draft:"bg-slate-100 text-slate-700 dark:bg-slate-500/20 dark:text-slate-300",submitted:"bg-yellow-100 text-yellow-800 dark:bg-yellow-500/20 dark:text-yellow-300",approved:"bg-emerald-100 text-emerald-800 dark:bg-emerald-500/20 dark:text-emerald-300",rejected:"bg-rose-100 text-rose-800 dark:bg-rose-500/20 dark:text-rose-300",completed:"bg-blue-100 text-blue-800 dark:bg-blue-500/20 dark:text-blue-300"}[a]??"bg-gray-100 text-gray-700"}return(a,t)=>{const p=A("SortIcon");return g(),u(k,null,[i(x(F),{title:"Penerimaan Barang"}),e("div",W,[e("div",X,[i(K,{items:E}),e("div",null,[i(x(v),{href:a.route("good-receipts.create"),class:"inline-flex items-center px-3 py-2 text-sm font-medium text-white rounded-md bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"},{default:m(()=>[...t[10]||(t[10]=[y(" Buat Penerimaan ",-1)])]),_:1},8,["href"])])]),e("div",Y,[e("div",ee,[t[14]||(t[14]=e("div",{class:"font-bold text-gray-700 md:text-xl dark:text-gray-300"}," Daftar Penerimaan Barang ",-1)),e("div",te,[e("div",null,[c(e("select",{"onUpdate:modelValue":t[0]||(t[0]=r=>f.value=r),class:"px-3 h-10 text-sm text-gray-800 bg-transparent rounded-lg border border-gray-200 dark:border-gray-700 dark:bg-gray-800 dark:text-white/90"},[...t[11]||(t[11]=[e("option",{value:""},"Kelompokan Berdasarkan",-1),e("option",{value:"vendor"},"Group: Vendor",-1),e("option",{value:"status"},"Group: Status",-1)])],512),[[P,f.value]])]),e("div",re,[t[12]||(t[12]=e("div",{class:"absolute left-4 top-1/2 text-gray-400 -translate-y-1/2"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"size-5"},[e("path",{"fill-rule":"evenodd",d:"M10.5 3.75a6.75 6.75 0 1 0 4.215 12.06l3.237 3.238a.75.75 0 1 0 1.06-1.061l-3.238-3.237A6.75 6.75 0 0 0 10.5 3.75Zm-5.25 6.75a5.25 5.25 0 1 1 10.5 0 5.25 5.25 0 0 1-10.5 0Z","clip-rule":"evenodd"})])],-1)),c(e("input",{"onUpdate:modelValue":t[1]||(t[1]=r=>o.value.q=r),type:"text",placeholder:"Cari nomor / vendor",class:"h-10 w-full rounded-lg border border-gray-200 bg-transparent py-2.5 pl-12 pr-4 text-sm text-gray-800 placeholder:text-gray-400 focus:border-blue-300 focus:outline-hidden focus:ring-3 focus:ring-blue-500/10 dark:border-gray-700 dark:bg-gray-800 dark:text-white/90 dark:placeholder:text-gray-400 dark:focus:border-blue-800 xl:w-[240px]"},null,512),[[S,o.value.q]])]),e("div",null,[i(x(v),{href:a.route("good-receipts.create"),class:"inline-flex items-center gap-2 rounded-lg border border-gray-300 bg-blue-500 px-4 py-2 text-sm font-medium text-white-700 hover:bg-gray-50 hover:text-gray-800 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-400 dark:hover:bg-white/[0.03] dark:hover:text-gray-200"},{default:m(()=>[...t[13]||(t[13]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"size-4"},[e("path",{"fill-rule":"evenodd",d:"M12 3.75a.75.75 0 0 1 .75.75v6.75h6.75a.75.75 0 0 1 0 1.5h-6.75v6.75a.75.75 0 0 1-1.5 0v-6.75H4.5a.75.75 0 0 1 0-1.5h6.75V4.5a.75.75 0 0 1 .75-.75Z","clip-rule":"evenodd"})],-1),y(" Buat Penerimaan ",-1)])]),_:1},8,["href"])])])]),e("div",ae,[e("table",se,[t[35]||(t[35]=e("colgroup",null,[e("col",{style:{width:"70px"}}),e("col",{style:{width:"180px"}}),e("col",{style:{width:"180px"}}),e("col",{style:{width:"260px"}}),e("col",{style:{width:"160px"}}),e("col",{style:{width:"180px"}}),e("col",{style:{width:"140px"}}),e("col",{style:{width:"120px"}}),e("col",{style:{width:"140px"}})],-1)),e("thead",null,[e("tr",null,[t[18]||(t[18]=e("th",{class:"py-2.5 bg-gray-100 border-gray-200 border-y dark:border-gray-600 dark:bg-gray-800"},[e("div",{class:"px-3 font-medium text-gray-600 dark:text-gray-300"}," No. ")],-1)),t[19]||(t[19]=e("th",{class:"py-2.5 bg-gray-100 border-gray-200 border-y dark:border-gray-600 dark:bg-gray-800"},[e("div",{class:"px-3 font-medium text-gray-600 dark:text-gray-300"},"No. GR")],-1)),t[20]||(t[20]=e("th",{class:"py-2.5 bg-gray-100 border-gray-200 border-y dark:border-gray-600 dark:bg-gray-800"},[e("div",{class:"px-3 font-medium text-gray-600 dark:text-gray-300"},"Referensi (PO)")],-1)),e("th",oe,[e("button",{onClick:t[2]||(t[2]=r=>C("vendor")),class:"px-3 w-full font-medium text-left text-gray-600 dark:text-gray-300"},[t[15]||(t[15]=y(" Vendor ",-1)),i(p,{active:l.sortBy==="vendor",direction:l.sortDirection},null,8,["active","direction"])])]),t[21]||(t[21]=e("th",{class:"py-2.5 bg-gray-100 border-gray-200 border-y dark:border-gray-600 dark:bg-gray-800"},[e("div",{class:"px-3 font-medium text-gray-600 dark:text-gray-300"},"Penerima")],-1)),e("th",de,[e("button",{onClick:t[3]||(t[3]=r=>C("date")),class:"px-3 w-full font-medium text-left text-gray-600 dark:text-gray-300"},[t[16]||(t[16]=y(" Tanggal ",-1)),i(p,{active:l.sortBy==="date",direction:l.sortDirection},null,8,["active","direction"])])]),e("th",le,[e("button",{onClick:t[4]||(t[4]=r=>C("status")),class:"px-3 w-full font-medium text-left text-gray-600 dark:text-gray-300"},[t[17]||(t[17]=y(" Status ",-1)),i(p,{active:l.sortBy==="status",direction:l.sortDirection},null,8,["active","direction"])])]),t[22]||(t[22]=e("th",{class:"py-2.5 bg-gray-100 border-gray-200 border-y dark:border-gray-600 dark:bg-gray-800"},[e("div",{class:"px-3 font-medium text-gray-600 dark:text-gray-300"},"Total Item")],-1)),t[23]||(t[23]=e("th",{class:"py-2.5 bg-gray-100 border-gray-200 border-y dark:border-gray-600 dark:bg-gray-800"},[e("div",{class:"px-3 font-medium text-gray-600 dark:text-gray-300"}," Aksi ")],-1))]),e("tr",null,[t[26]||(t[26]=e("th",{class:"px-2 py-2 bg-gray-50 border-gray-200 border-y dark:border-gray-600 dark:bg-gray-900"},null,-1)),e("th",ne,[c(e("input",{"onUpdate:modelValue":t[5]||(t[5]=r=>o.value.q=r),type:"text",placeholder:"Cari nomor / vendor",class:"px-3 w-full h-10 text-xs rounded border-gray-300 sm:text-sm dark:border-gray-700 dark:bg-gray-800 dark:text-white/90"},null,512),[[S,o.value.q]])]),t[27]||(t[27]=e("th",{class:"px-2 py-2 bg-gray-50 border border-gray-200 dark:border-gray-600 dark:bg-gray-900"},null,-1)),e("th",ie,[c(e("select",{"onUpdate:modelValue":t[6]||(t[6]=r=>o.value.vendor_id=r),class:"px-3 w-full h-10 text-xs rounded border-gray-300 sm:text-sm dark:border-gray-700 dark:bg-gray-800 dark:text-white/90"},[t[24]||(t[24]=e("option",{value:null},"Semua",-1)),(g(!0),u(k,null,D(l.vendors,r=>(g(),u("option",{key:r.id,value:r.id},s(r.name),9,ue))),128))],512),[[P,o.value.vendor_id]])]),t[28]||(t[28]=e("th",{class:"px-2 py-2 bg-gray-50 border border-gray-200 dark:border-gray-600 dark:bg-gray-900"},null,-1)),e("th",ge,[e("div",ye,[c(e("input",{"onUpdate:modelValue":t[7]||(t[7]=r=>o.value.date_from=r),type:"date",class:"px-2 w-full h-10 text-xs rounded border-gray-300 sm:text-sm dark:border-gray-700 dark:bg-gray-800 dark:text-white/90"},null,512),[[S,o.value.date_from]]),c(e("input",{"onUpdate:modelValue":t[8]||(t[8]=r=>o.value.date_to=r),type:"date",class:"px-2 w-full h-10 text-xs rounded border-gray-300 sm:text-sm dark:border-gray-700 dark:bg-gray-800 dark:text-white/90"},null,512),[[S,o.value.date_to]])])]),e("th",pe,[c(e("select",{"onUpdate:modelValue":t[9]||(t[9]=r=>o.value.status=r),class:"px-3 w-full h-10 text-xs rounded border-gray-300 sm:text-sm dark:border-gray-700 dark:bg-gray-800 dark:text-white/90"},[...t[25]||(t[25]=[R('<option value="">Semua</option><option value="draft">Draft</option><option value="submitted">Diajukan</option><option value="approved">Disetujui</option><option value="rejected">Ditolak</option><option value="completed">Selesai</option>',6)])],512),[[P,o.value.status]])]),t[29]||(t[29]=e("th",{class:"px-2 py-2 bg-gray-50 border-gray-200 border-y dark:border-gray-600 dark:bg-gray-900"},null,-1))])]),e("tbody",null,[!l.receives.data||l.receives.data.length===0?(g(),u("tr",be,[...t[30]||(t[30]=[e("td",{colspan:"9",class:"py-8 text-center text-gray-500"}," Tidak ada data ",-1)])])):T.value?(g(!0),u(k,{key:1},D(I.value,(r,b)=>(g(),u(k,{key:b},[e("tr",null,[e("td",xe,[e("button",{class:"inline-flex gap-2 items-center",onClick:n=>z(b)},[e("span",fe,s(G(b)?"▶":"▼"),1),e("span",null,s(O(b)),1),e("span",me,"("+s(r.length)+")",1)],8,ce)])]),G(b)?Z("",!0):(g(!0),u(k,{key:0},D(r,n=>(g(),u("tr",{key:n.id,class:"border-b border-gray-200 dark:border-gray-700"},[e("td",ve,s($.value[n.id]??"-"),1),e("td",ke,s(n.number),1),e("td",he,s(n.from_po?.number||"-"),1),e("td",we,s(n.vendor?.name||"-"),1),e("td",_e,s(n.receiver||"-"),1),e("td",Be,s(n.date),1),e("td",Se,[e("span",{class:N([L(n.status),"px-2.5 py-1 text-xs font-medium rounded-full"])},s(j(n.status)),3)]),e("td",De,s(n.total_items),1),e("td",Ve,[e("div",Ce,[i(x(v),{href:a.route("good-receipts.show",n.id),class:"text-primary-600 hover:underline"},{default:m(()=>[...t[31]||(t[31]=[y("Lihat",-1)])]),_:1},8,["href"]),i(x(v),{href:a.route("good-receipts.edit",n.id),class:"inline-flex items-center px-2 py-1 text-xs text-gray-700 rounded border border-gray-300 hover:bg-gray-50 dark:border-gray-700 dark:text-gray-300"},{default:m(()=>[...t[32]||(t[32]=[y("Edit",-1)])]),_:1},8,["href"])])])]))),128))],64))),128)):(g(!0),u(k,{key:2},D(l.receives.data,r=>(g(),u("tr",{key:r.id,class:"border-b border-gray-200 dark:border-gray-700"},[e("td",je,s($.value[r.id]??"-"),1),e("td",qe,s(r.number),1),e("td",Pe,s(r.from_po?.number||"-"),1),e("td",Te,s(r.vendor?.name||"-"),1),e("td",$e,s(r.receiver||"-"),1),e("td",Ge,s(r.date),1),e("td",Ue,[e("span",{class:N([L(r.status),"px-2.5 py-1 text-xs font-medium rounded-full"])},s(j(r.status)),3)]),e("td",Le,s(r.total_items),1),e("td",Ne,[e("div",Ee,[i(x(v),{href:a.route("good-receipts.show",r.id),class:"text-primary-600 hover:underline"},{default:m(()=>[...t[33]||(t[33]=[y("Lihat",-1)])]),_:1},8,["href"]),i(x(v),{href:a.route("good-receipts.edit",r.id),class:"inline-flex items-center px-2 py-1 text-xs text-gray-700 rounded border border-gray-300 hover:bg-gray-50 dark:border-gray-700 dark:text-gray-300"},{default:m(()=>[...t[34]||(t[34]=[y("Edit",-1)])]),_:1},8,["href"])])])]))),128))])])]),e("div",Ie,[e("div",Me,"Total: "+s(l.receives.total),1),i(J,{pagination:l.receives},null,8,["pagination"])])])])],64)}}});export{We as default};
