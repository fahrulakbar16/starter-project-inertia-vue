import{y as c,d as x,u as J,z as G,H as V,e as d,o as u,a as s,b as o,w as i,h as C,g as e,t as n,n as W,K as Y,f as b,F as Q}from"./app-CJkCV51W.js";import{_ as X}from"./AppLayout-BlEKf3Fz.js";import{s as p,a as Z}from"./index-0NiEyZ8l.js";import{s as S}from"./index-B9o0VbjL.js";import{s as ee,a as _,b as te}from"./index-CMR089Yl.js";import{s as ae}from"./index-D_jvqarE.js";import{s as w}from"./index-HUbOgymH.js";import{s as se}from"./index-CLpgtvfm.js";import{_ as le}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./FlashMessage-D4C-FUm8.js";import"./LayoutShell-FWpWJLvi.js";import"./useAuth-DvuTgkfF.js";import"./LayoutShell.vue_vue_type_style_index_0_lang-CRqqKi3W.js";import"./index-BD4Vkpl0.js";import"./index-DgaiydM3.js";import"./index-B6ZB8t6H.js";import"./index-jsubnK9F.js";import"./index-BQecbcTn.js";import"./index-CCXKkwqV.js";import"./index-B_J-fD_o.js";const re={class:"px-6 py-6"},oe={class:"flex justify-between items-center mb-4"},ne={class:"bg-white rounded-lg border border-gray-200"},ie={class:"flex justify-between items-center px-4 py-3 border-b"},de={class:"flex gap-2 items-center"},ue={class:"py-0"},pe={style:{"overflow-x":"auto"}},me={class:"px-2 py-0.5 rounded-full bg-blue-50 text-blue-600 text-xs font-medium"},ce={class:"flex gap-2 justify-center items-center"},be=["onClick"],xe=["onClick"],ge={class:"grid grid-cols-1 md:grid-cols-2 gap-3"},ye={key:0,class:"text-red-500"},ve={key:0,class:"text-red-500"},fe={key:0,class:"text-red-500"},he={key:0,class:"text-red-500"},_e={key:0,class:"text-red-500"},ke={key:0,class:"text-red-500"},Ve={key:0,class:"text-red-500"},Ce={key:0,class:"text-red-500"},we={class:"md:col-span-2"},Pe={key:0,class:"text-red-500"},Se={class:"flex justify-end gap-2 pt-2"},Ke=Object.assign({layout:X},{__name:"IndexPrime",props:{vehicles:Object,filters:Object,branches:Array,departments:Array},setup(T){const m=T,U=c(()=>m.vehicles?.data??[]),D=c(()=>m.vehicles?.total??0),k=c(()=>m.vehicles?.per_page??10),L=c(()=>m.vehicles?.current_page??1),K=c(()=>(L.value-1)*k.value),g=x(m.filters?.sort_field??"id"),y=x(m.filters?.sort_order??1),v=x(m.filters?.q??""),N=x(!1),f=x(!1),h=x(null),a=J({name:"",brand:"",asset_code:"",plate_number:"",type:"Pickup",branch_id:null,department_id:null,status:"active",description:""}),$=[{label:"Pickup",value:"Pickup"},{label:"Motor",value:"Motor"},{label:"Truck",value:"Truck"}],j=[{label:"Aktif",value:"active"},{label:"Tidak Aktif",value:"inactive"}],A=c(()=>(m.branches??[]).map(r=>({label:r.name,value:r.id}))),F=c(()=>(m.departments??[]).map(r=>({label:r.name,value:r.id}))),M=c(()=>h.value?"Ubah Kendaraan":"Tambah Kendaraan");function R(){h.value=null,a.reset(),a.type="Pickup",a.status="active",f.value=!0}function B(r){h.value=r.id,a.name=r.name,a.brand=r.brand,a.asset_code=r.asset_code,a.plate_number=r.plate_number,a.type=r.type,a.status=r.status,a.description=r.description,a.branch_id=r.branch_id??null,a.department_id=r.department_id??null,f.value=!0}function P(){f.value=!1}const H=c(()=>a.processing);function q(){h.value?a.put(`/vehicles/${h.value}`,{onSuccess:()=>P()}):a.post("/vehicles",{onSuccess:()=>P()})}function z(r){confirm("Yakin ingin menghapus?")&&V.delete(`/vehicles/${r.id}`)}function E(r){V.get(route("vehicles.index"),{page:r.page+1,per_page:r.rows,q:v.value,sort_field:g.value,sort_order:y.value},{preserveState:!0,preserveScroll:!0,replace:!0})}function I(r){g.value=r.sortField,y.value=r.sortOrder,V.get(route("vehicles.index"),{page:1,per_page:k.value,q:v.value,sort_field:g.value,sort_order:y.value},{preserveState:!0,preserveScroll:!0,replace:!0})}let O;return G(v,r=>{clearTimeout(O),O=setTimeout(()=>{V.get(route("vehicles.index"),{page:1,per_page:k.value,q:r,sort_field:g.value,sort_order:y.value},{preserveState:!0,preserveScroll:!0,replace:!0})},400)}),(r,t)=>(u(),d(Q,null,[s("div",re,[s("div",oe,[t[12]||(t[12]=s("h1",{class:"text-2xl font-bold text-gray-800"}," Manajemen Kendaraan ",-1)),o(e(S),{severity:"info",onClick:R},{default:i(()=>[...t[11]||(t[11]=[s("i",{class:"mr-2 lni lni-plus"},null,-1),C(" Tambah Data Kendaraan ",-1)])]),_:1})]),s("div",ne,[s("div",ie,[t[14]||(t[14]=s("h1",{class:"text-xl font-semibold text-gray-800"}," Daftar Kendaraan ",-1)),s("div",de,[o(e(te),null,{default:i(()=>[o(e(ee),null,{default:i(()=>[...t[13]||(t[13]=[s("i",{class:"lni lni-search-alt"},null,-1)])]),_:1}),o(e(_),{modelValue:v.value,"onUpdate:modelValue":t[0]||(t[0]=l=>v.value=l),placeholder:"Pencarian kata kunci"},null,8,["modelValue"])]),_:1})])]),s("div",ue,[s("div",pe,[o(e(Z),{value:U.value,dataKey:"id",responsiveLayout:"scroll",paginator:!0,lazy:!0,totalRecords:D.value,first:K.value,rows:k.value,sortField:g.value,sortOrder:y.value,class:"w-full p-datatable-sm",rowHover:!0,showGridlines:!1,rowsPerPageOptions:[10,25,50,100],paginatorTemplate:"RowsPerPageDropdown FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink",pt:{thead:{class:"bg-gray-50"},headerRow:{class:"text-left"},headerCell:{class:"bg-gray-50 text-gray-500 uppercase text-[11px] tracking-wide px-2"},bodyRow:{class:"text-gray-800"},bodyCell:{class:"text-gray-800 px-2"}},ptOptions:{mergeSections:!0,mergeProps:!0},loading:N.value,tableStyle:{minWidth:"max-content",width:"100%"},onPage:E,onSort:I},{empty:i(()=>[...t[15]||(t[15]=[C(" Data kendaraan tidak ditemukan. ",-1)])]),loading:i(()=>[...t[16]||(t[16]=[C(" Memuat data kendaraan... ",-1)])]),default:i(()=>[o(e(p),{header:"No",style:{width:"80px"},headerClass:"bg-gray-50 text-gray-500 uppercase text-xs text-center px-2",bodyClass:"text-gray-700 px-2 text-center"},{body:i(({index:l})=>[C(n(K.value+l+1),1)]),_:1}),o(e(p),{field:"name",header:"Nama Kendaraan",sortable:"",headerClass:"bg-gray-50 text-gray-500 uppercase text-xs text-start px-2",bodyClass:"text-gray-700 px-2"}),o(e(p),{field:"brand",header:"Merk",sortable:"",headerClass:"bg-gray-50 text-gray-500 uppercase text-xs text-start px-2",bodyClass:"text-gray-700 px-2"}),o(e(p),{field:"asset_code",header:"Kode Asset",sortable:"",headerClass:"bg-gray-50 text-gray-500 uppercase text-xs text-start px-2",bodyClass:"text-gray-700 px-2"}),o(e(p),{field:"plate_number",header:"No. Polisi",sortable:"",headerClass:"bg-gray-50 text-gray-500 uppercase text-xs text-start px-2",bodyClass:"text-gray-700 px-2"}),o(e(p),{field:"type",header:"Jenis",sortable:"",headerClass:"bg-gray-50 text-gray-500 uppercase text-xs text-start px-2",bodyClass:"text-gray-700 px-2"},{body:i(({data:l})=>[s("span",me,n(l.type),1)]),_:1}),o(e(p),{field:"department",header:"Departemen",headerClass:"bg-gray-50 text-gray-500 uppercase text-xs text-start px-2",bodyClass:"text-gray-700 px-2"}),o(e(p),{field:"branch",header:"Cabang",headerClass:"bg-gray-50 text-gray-500 uppercase text-xs text-start px-2",bodyClass:"text-gray-700 px-2"}),o(e(p),{field:"status",header:"Status",sortable:"",headerClass:"bg-gray-50 text-gray-500 uppercase text-xs text-start px-2",bodyClass:"text-gray-700 px-2"},{body:i(({data:l})=>[s("span",{class:W({"rounded-full px-2 py-0.5 text-xs font-medium":!0,"bg-green-50 text-green-600":l.status==="active","bg-red-50 text-red-600":l.status==="inactive"})},n(l.status==="active"?"Aktif":"Tidak Aktif"),3)]),_:1}),o(e(p),{header:"Aksi",style:{width:"140px"},headerClass:"bg-gray-50 text-gray-500 uppercase text-xs text-center px-2",bodyClass:"px-2 text-center"},{body:i(({data:l})=>[s("div",ce,[s("button",{type:"button","aria-label":"Edit",class:"inline-flex justify-center items-center w-8 h-8 text-white bg-indigo-500 rounded hover:bg-indigo-600 focus:outline-none focus:ring-2 focus:ring-indigo-300",onClick:()=>B(l)},[...t[17]||(t[17]=[s("i",{class:"text-sm lni lni-pencil-1"},null,-1)])],8,be),s("button",{type:"button","aria-label":"Hapus",class:"inline-flex justify-center items-center w-8 h-8 text-white bg-red-500 rounded hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-300",onClick:()=>z(l)},[...t[18]||(t[18]=[s("i",{class:"text-sm lni lni-trash-3"},null,-1)])],8,xe)])]),_:1})]),_:1},8,["value","totalRecords","first","rows","sortField","sortOrder","loading"])])])])]),o(e(ae),{visible:f.value,"onUpdate:visible":t[10]||(t[10]=l=>f.value=l),modal:"",header:M.value,style:{width:"44rem"}},{default:i(()=>[s("form",{onSubmit:Y(q,["prevent"]),class:"space-y-4"},[s("div",ge,[s("div",null,[t[19]||(t[19]=s("label",{class:"block text-sm text-gray-600 mb-1"},"Nama Kendaraan",-1)),o(e(_),{modelValue:e(a).name,"onUpdate:modelValue":t[1]||(t[1]=l=>e(a).name=l),placeholder:"Nama",class:"w-full"},null,8,["modelValue"]),e(a).errors.name?(u(),d("small",ye,n(e(a).errors.name),1)):b("",!0)]),s("div",null,[t[20]||(t[20]=s("label",{class:"block text-sm text-gray-600 mb-1"},"Merk",-1)),o(e(_),{modelValue:e(a).brand,"onUpdate:modelValue":t[2]||(t[2]=l=>e(a).brand=l),placeholder:"Honda / Hino",class:"w-full"},null,8,["modelValue"]),e(a).errors.brand?(u(),d("small",ve,n(e(a).errors.brand),1)):b("",!0)]),s("div",null,[t[21]||(t[21]=s("label",{class:"block text-sm text-gray-600 mb-1"},"Kode Asset",-1)),o(e(_),{modelValue:e(a).asset_code,"onUpdate:modelValue":t[3]||(t[3]=l=>e(a).asset_code=l),placeholder:"ASSET-00001",class:"w-full"},null,8,["modelValue"]),e(a).errors.asset_code?(u(),d("small",fe,n(e(a).errors.asset_code),1)):b("",!0)]),s("div",null,[t[22]||(t[22]=s("label",{class:"block text-sm text-gray-600 mb-1"},"No. Polisi",-1)),o(e(_),{modelValue:e(a).plate_number,"onUpdate:modelValue":t[4]||(t[4]=l=>e(a).plate_number=l),placeholder:"B 1234 CD",class:"w-full"},null,8,["modelValue"]),e(a).errors.plate_number?(u(),d("small",he,n(e(a).errors.plate_number),1)):b("",!0)]),s("div",null,[t[23]||(t[23]=s("label",{class:"block text-sm text-gray-600 mb-1"},"Jenis Kendaraan",-1)),o(e(w),{class:"w-full",modelValue:e(a).type,"onUpdate:modelValue":t[5]||(t[5]=l=>e(a).type=l),options:$,optionLabel:"label",optionValue:"value",placeholder:"Pilih Jenis"},null,8,["modelValue"]),e(a).errors.type?(u(),d("small",_e,n(e(a).errors.type),1)):b("",!0)]),s("div",null,[t[24]||(t[24]=s("label",{class:"block text-sm text-gray-600 mb-1"},"Status",-1)),o(e(w),{class:"w-full",modelValue:e(a).status,"onUpdate:modelValue":t[6]||(t[6]=l=>e(a).status=l),options:j,optionLabel:"label",optionValue:"value",placeholder:"Pilih Status"},null,8,["modelValue"]),e(a).errors.status?(u(),d("small",ke,n(e(a).errors.status),1)):b("",!0)]),s("div",null,[t[25]||(t[25]=s("label",{class:"block text-sm text-gray-600 mb-1"},"Departemen",-1)),o(e(w),{class:"w-full",modelValue:e(a).department_id,"onUpdate:modelValue":t[7]||(t[7]=l=>e(a).department_id=l),options:F.value,optionLabel:"label",optionValue:"value",placeholder:"Pilih Departemen"},null,8,["modelValue","options"]),e(a).errors.department_id?(u(),d("small",Ve,n(e(a).errors.department_id),1)):b("",!0)]),s("div",null,[t[26]||(t[26]=s("label",{class:"block text-sm text-gray-600 mb-1"},"Cabang",-1)),o(e(w),{class:"w-full",modelValue:e(a).branch_id,"onUpdate:modelValue":t[8]||(t[8]=l=>e(a).branch_id=l),options:A.value,optionLabel:"label",optionValue:"value",placeholder:"Pilih Cabang"},null,8,["modelValue","options"]),e(a).errors.branch_id?(u(),d("small",Ce,n(e(a).errors.branch_id),1)):b("",!0)]),s("div",we,[t[27]||(t[27]=s("label",{class:"block text-sm text-gray-600 mb-1"},"Keterangan",-1)),o(e(se),{modelValue:e(a).description,"onUpdate:modelValue":t[9]||(t[9]=l=>e(a).description=l),rows:"3",autoResize:"",placeholder:"Keterangan",class:"w-full"},null,8,["modelValue"]),e(a).errors.description?(u(),d("small",Pe,n(e(a).errors.description),1)):b("",!0)])]),s("div",Se,[o(e(S),{type:"submit",label:"Simpan",icon:"pi pi-check",loading:H.value},null,8,["loading"]),o(e(S),{type:"button",label:"Batal",severity:"secondary",icon:"pi pi-times",onClick:P})])],32)]),_:1},8,["visible","header"])],64))}}),We=le(Ke,[["__scopeId","data-v-29a30e14"]]);export{We as default};
