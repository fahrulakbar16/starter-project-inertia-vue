import{d as m,y as Z,e as l,o as d,b as C,a as e,g as r,D as ee,f as i,w as te,h as c,P as se,t as o,n as A,F as f,i as P,E as x,G as g,K as ae,H as k}from"./app-CJkCV51W.js";import{_ as re}from"./Breadcrumb-BJQpsGcc.js";import{_ as oe}from"./AppLayout-BlEKf3Fz.js";import{_ as ne}from"./ConfirmModal-DAlWp-FQ.js";import"./FlashMessage-D4C-FUm8.js";import"./LayoutShell-FWpWJLvi.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./useAuth-DvuTgkfF.js";import"./LayoutShell.vue_vue_type_style_index_0_lang-CRqqKi3W.js";const le={class:"flex overflow-hidden flex-col gap-3 px-3 h-full"},de={class:"flex justify-between items-center h-10"},ie={key:0,class:"flex items-center gap-2"},ue={key:0,class:"flex flex-col gap-4 overflow-hidden rounded-lg border border-red-200 bg-red-50 p-6 dark:border-red-600 dark:bg-red-500/10"},pe={class:"text-sm text-red-800 dark:text-red-200 whitespace-pre-line"},me={class:"flex flex-col gap-4 overflow-hidden rounded-lg border border-gray-200 bg-white p-6 dark:border-gray-600 dark:bg-white/[0.03]"},ce={class:"flex items-center justify-between"},xe={class:"grid grid-cols-1 gap-4 md:grid-cols-2 xl:grid-cols-3"},ge={class:"font-semibold text-gray-800 dark:text-gray-200"},be={class:"font-semibold text-gray-800 dark:text-gray-200"},ye={class:"font-semibold text-gray-800 dark:text-gray-200"},ve={class:"font-semibold text-gray-800 dark:text-gray-200"},fe={key:0},ke={class:"font-semibold text-gray-800 dark:text-gray-200"},_e={key:1},he={class:"font-semibold text-gray-800 dark:text-gray-200"},we={key:2},je={class:"font-semibold text-gray-800 dark:text-gray-200"},qe={key:3},Ce={class:"font-semibold text-red-600 dark:text-red-400 whitespace-pre-line"},Pe={class:"md:col-span-2 xl:col-span-3"},De={class:"font-semibold text-gray-800 dark:text-gray-200 whitespace-pre-line"},Se={class:"flex flex-col overflow-hidden rounded-lg border border-gray-200 bg-white dark:border-gray-600 dark:bg-white/[0.03]"},Ae={class:"flex items-center gap-2 px-4 border-b border-gray-200 dark:border-gray-700"},Be={key:0,class:"overflow-auto","data-simplebar":""},Oe={class:"min-w-full text-sm table-fixed"},Te={key:0},Ve={class:"px-3 py-2"},Ie={class:"px-3 py-2"},$e={class:"px-3 py-2 font-mono"},Ne={class:"px-3 py-2"},Fe={class:"px-3 py-2"},Ue={class:"px-3 py-2"},Me={class:"px-3 py-2"},Ke={key:1,class:"p-6"},Re={key:0,class:"text-sm text-gray-500"},ze={key:1,class:"space-y-3"},Le={class:"flex-1"},He={class:"text-sm font-medium text-gray-800 dark:text-gray-200"},Qe={class:"text-xs text-gray-500 flex items-center gap-2"},Ye={key:0,class:"text-gray-400"},Ee={key:1,class:"font-medium"},We={class:"text-sm text-gray-700 dark:text-gray-300 mt-1"},Ge={key:1,class:"flex items-center justify-end gap-4"},Je={key:2,class:"flex items-center justify-end gap-4"},Xe={key:3,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/40"},Ze={class:"w-[700px] max-w-[95vw] rounded-lg bg-white shadow"},et={class:"p-4 overflow-auto max-h-[70vh]"},tt={class:"min-w-full text-sm"},st={class:"p-2"},at={class:"p-2 font-mono"},rt={class:"p-2"},ot={class:"px-1"},nt={class:"p-2"},lt=["onUpdate:modelValue"],dt={class:"px-1"},it={class:"p-2"},ut=["onUpdate:modelValue"],pt={class:"px-4 py-3 border-t flex justify-end gap-2"},mt={key:4,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/40"},ct={class:"w-[500px] max-w-[95vw] rounded-lg bg-white shadow"},xt={class:"p-4"},gt={class:"text-sm text-gray-600 mb-4"},bt={class:"px-4 py-3 border-t flex justify-end gap-2"},yt={key:5,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/40"},vt={class:"w-[900px] max-w-[95vw] rounded-lg bg-white shadow max-h-[90vh] overflow-hidden"},ft={class:"px-4 py-3 border-b"},kt={class:"font-semibold"},_t={class:"p-4 overflow-auto max-h-[70vh]"},ht={class:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6"},wt={class:"mb-4"},jt={class:"mb-4"},qt={class:"min-w-full text-sm"},Ct={class:"p-2"},Pt={class:"p-2 font-mono"},Dt={class:"p-2"},St={class:"p-2"},At=["onUpdate:modelValue","onInput"],Bt={class:"p-2 text-right font-medium"},Ot={class:"bg-gray-50 font-semibold"},Tt={class:"p-2 text-right"},Vt={class:"px-4 py-3 border-t flex justify-end gap-2"},It={key:6,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/40"},$t={class:"w-[500px] max-w-[95vw] rounded-lg bg-white shadow"},Nt={class:"p-4"},Ft={class:"text-sm text-gray-600 mb-4"},Ut={class:"mb-4"},Wt=Object.assign({layout:oe},{__name:"Show",props:{pr:{type:Object,required:!0},activities:{type:Array,default:()=>[]},can_approve:{type:Boolean,default:!1},vendors:{type:Array,default:()=>[]}},setup(N){const _=N,a=_.pr,D=_.activities,B=_.can_approve;_.vendors;const F=[{label:"Penyimpanan",href:route("dashboard")},{label:"Pengajuan Pembelian",href:route("purchase-requests.index")},{label:a.request_no}],b=m("items"),y=m(!1),S=m([]),h=m(!1),w=m(!1),j=m(!1),q=m(!1),u=m({vendor:"",po_date:new Date().toISOString().split("T")[0],notes:"",items:[]}),v=m({reason:""}),U=Z(()=>u.value.items.reduce((n,t)=>n+(t.total_price||0),0));function M(n){return{draft:"Draft",on_progress:"Menunggu Persetujuan",approved:"Disetujui",rejected:"Ditolak",canceled:"Dibatalkan",partial_approved:"Disetujui Sebagian"}[n]??n}function K(n){return{draft:"bg-gray-100 text-gray-800 dark:bg-gray-500/20 dark:text-gray-300",on_progress:"bg-blue-100 text-blue-800 dark:bg-blue-500/20 dark:text-blue-300",approved:"bg-emerald-100 text-emerald-800 dark:bg-emerald-500/20 dark:text-emerald-300",rejected:"bg-rose-100 text-rose-800 dark:bg-rose-500/20 dark:text-rose-300",canceled:"bg-slate-100 text-slate-700 dark:bg-slate-500/20 dark:text-slate-300",partial_approved:"bg-violet-100 text-violet-800 dark:bg-violet-500/20 dark:text-violet-300"}[n]??"bg-gray-100 text-gray-700"}function O(n){return n?new Date(n).toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric"}):"-"}function R(){confirm("Hapus pengajuan pembelian ini?")&&k.delete(route("purchase-requests.destroy",a.id))}function z(){v.value.reason="",w.value=!0}function L(){w.value=!1}function H(){if(!v.value.reason.trim()){alert("Alasan penolakan harus diisi");return}k.post(route("purchase-requests.rejected",a.id),{reason:v.value.reason},{preserveScroll:!0,onFinish:()=>{window.location.reload(),w.value=!1}})}function Q(){S.value=(a.items||[]).map(n=>({id:n.id,item:n.item,quantity_requested:n.quantity_requested,quantity_approved:n.quantity_approved??n.quantity_requested,note:n.note||""})),y.value=!0}function Y(){k.post(route("purchase-requests.approve",a.id),{approvals:S.value},{preserveScroll:!0,onFinish:()=>{y.value=!1,window.location.reload()}})}function T(){h.value=!0}function E(){h.value=!1}function W(){k.post(route("purchase-requests.cancel",a.id),{},{preserveScroll:!0,onFinish:()=>{h.value=!1,window.location.reload()}})}function G(){j.value=!0}function J(){j.value=!1,u.value.items=(a.items||[]).filter(n=>n.quantity_approved>0).map(n=>({item:n.item,quantity:n.quantity_approved,unit_price:0,total_price:0})),q.value=!0}function X(n){const t=u.value.items[n];t.total_price=(t.quantity||0)*(t.unit_price||0)}function V(n){return new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(n)}function I(){if(u.value.items.some(n=>n.unit_price<=0)){alert("Masukkan harga untuk semua item");return}k.post(route("purchase-orders.store"),{request_id:a.id,order_no:"",ordered_at:u.value.po_date,vendor:u.value.vendor,note:u.value.notes,items:u.value.items.map(n=>({item_id:n.item.id,quantity_ordered:n.quantity,cost:n.unit_price,note:""}))},{onSuccess:()=>{q.value=!1,window.location.reload()}})}return(n,t)=>(d(),l(f,null,[C(r(ee),{title:`Pengajuan Pembelian ${r(a).request_no}`},null,8,["title"]),e("div",le,[e("div",de,[C(re,{items:F}),r(a).status==="draft"?(d(),l("div",ie,[C(r(se),{href:n.route("purchase-requests.edit",r(a).id),class:"inline-flex items-center rounded bg-blue-600 px-3 py-2 text-sm font-medium text-white hover:bg-blue-700"},{default:te(()=>[...t[11]||(t[11]=[c(" Edit",-1)])]),_:1},8,["href"]),e("button",{onClick:T,class:"inline-flex items-center rounded bg-gray-500 px-3 py-2 text-sm font-medium text-white hover:bg-gray-600"},"Batalkan"),e("button",{onClick:R,class:"inline-flex items-center rounded bg-red-600 px-3 py-2 text-sm font-medium text-white hover:bg-red-700"},"Hapus")])):i("",!0)]),r(a).status==="rejected"&&r(a).reason?(d(),l("div",ue,[t[12]||(t[12]=e("div",{class:"flex items-center gap-2"},[e("svg",{class:"w-5 h-5 text-red-600 dark:text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})]),e("div",{class:"font-bold text-red-700 dark:text-red-300"},"Alasan Penolakan")],-1)),e("div",pe,o(r(a).reason),1)])):i("",!0),e("div",me,[e("div",ce,[t[13]||(t[13]=e("div",{class:"font-bold text-gray-700 md:text-xl dark:text-gray-300"},"Informasi Pengajuan Pembelian",-1)),e("div",null,[e("span",{class:A([K(r(a).status),"px-2.5 py-1 rounded-full text-xs font-medium"])},o(M(r(a).status)),3)])]),e("div",xe,[e("div",null,[t[14]||(t[14]=e("div",{class:"text-xs text-gray-500"},"No. Pengajuan",-1)),e("div",ge,o(r(a).request_no),1)]),e("div",null,[t[15]||(t[15]=e("div",{class:"text-xs text-gray-500"},"Departemen",-1)),e("div",be,o(r(a).department?.name),1)]),e("div",null,[t[16]||(t[16]=e("div",{class:"text-xs text-gray-500"},"Diajukan oleh",-1)),e("div",ye,o(r(a).employee?.name),1)]),e("div",null,[t[17]||(t[17]=e("div",{class:"text-xs text-gray-500"},"Tanggal Pengajuan",-1)),e("div",ve,o(O(r(a).requested_at)),1)]),r(a).material_request?(d(),l("div",fe,[t[18]||(t[18]=e("div",{class:"text-xs text-gray-500"},"Referensi MR",-1)),e("div",ke,o(r(a).material_request?.request_no),1)])):i("",!0),r(a).approved_by?(d(),l("div",_e,[t[19]||(t[19]=e("div",{class:"text-xs text-gray-500"},"Disetujui oleh",-1)),e("div",he,o(r(a).approved_by),1)])):i("",!0),r(a).approved_at?(d(),l("div",we,[t[20]||(t[20]=e("div",{class:"text-xs text-gray-500"},"Waktu Persetujuan",-1)),e("div",je,o(O(r(a).approved_at)),1)])):i("",!0),r(a).status==="rejected"&&r(a).reason?(d(),l("div",qe,[t[21]||(t[21]=e("div",{class:"text-xs text-gray-500"},"Alasan Penolakan",-1)),e("div",Ce,o(r(a).reason),1)])):i("",!0),e("div",Pe,[t[22]||(t[22]=e("div",{class:"text-xs text-gray-500"},"Keperluan",-1)),e("div",De,o(r(a).requirement||"-"),1)])])]),e("div",Se,[e("div",Ae,[e("button",{class:A(["px-4 py-3 text-sm font-medium",b.value==="items"?"border-b-2 border-blue-500 text-blue-600":"text-gray-600 dark:text-gray-300"]),onClick:t[0]||(t[0]=s=>b.value="items")}," Daftar Item ",2),e("button",{class:A(["px-4 py-3 text-sm font-medium",b.value==="activities"?"border-b-2 border-blue-500 text-blue-600":"text-gray-600 dark:text-gray-300"]),onClick:t[1]||(t[1]=s=>b.value="activities")}," Aktivitas Log ",2)]),b.value==="items"?(d(),l("div",Be,[e("table",Oe,[t[24]||(t[24]=e("colgroup",null,[e("col",{style:{width:"60px"}}),e("col",{style:{width:"220px"}}),e("col",{style:{width:"180px"}}),e("col",{style:{width:"120px"}}),e("col",{style:{width:"120px"}}),e("col")],-1)),t[25]||(t[25]=e("thead",null,[e("tr",null,[e("th",{class:"py-2.5 bg-gray-100 border-y border-gray-200 dark:border-gray-600 dark:bg-gray-800"},[e("div",{class:"px-3 text-left font-medium text-gray-600 dark:text-gray-300"},"No")]),e("th",{class:"py-2.5 bg-gray-100 border-y border-gray-200 dark:border-gray-600 dark:bg-gray-800"},[e("div",{class:"px-3 text-left font-medium text-gray-600 dark:text-gray-300"},"Nama Item")]),e("th",{class:"py-2.5 bg-gray-100 border-y border-gray-200 dark:border-gray-600 dark:bg-gray-800"},[e("div",{class:"px-3 text-left font-medium text-gray-600 dark:text-gray-300"},"Kode")]),e("th",{class:"py-2.5 bg-gray-100 border-y border-gray-200 dark:border-gray-600 dark:bg-gray-800"},[e("div",{class:"px-3 text-left font-medium text-gray-600 dark:text-gray-300"},"Qty Diminta ")]),e("th",{class:"py-2.5 bg-gray-100 border-y border-gray-200 dark:border-gray-600 dark:bg-gray-800"},[e("div",{class:"px-3 text-left font-medium text-gray-600 dark:text-gray-300"},"Qty Disetujui ")]),e("th",{class:"py-2.5 bg-gray-100 border-y border-gray-200 dark:border-gray-600 dark:bg-gray-800"},[e("div",{class:"px-3 text-left font-medium text-gray-600 dark:text-gray-300"},"Satuan")]),e("th",{class:"py-2.5 bg-gray-100 border-y border-gray-200 dark:border-gray-600 dark:bg-gray-800"},[e("div",{class:"px-3 text-left font-medium text-gray-600 dark:text-gray-300"},"Catatan")])])],-1)),e("tbody",null,[!r(a).items||r(a).items.length===0?(d(),l("tr",Te,[...t[23]||(t[23]=[e("td",{colspan:"7",class:"text-center py-8 text-gray-500"},"Tidak ada item",-1)])])):i("",!0),(d(!0),l(f,null,P(r(a).items,(s,p)=>(d(),l("tr",{key:s.id,class:"border-b border-gray-200 dark:border-gray-700"},[e("td",Ve,o(p+1),1),e("td",Ie,o(s.item?.name),1),e("td",$e,o(s.item?.code),1),e("td",Ne,o(s.quantity_requested),1),e("td",Fe,o(s.quantity_approved||"-"),1),e("td",Ue,o(s.item?.unit?.short_name),1),e("td",Me,o(s.note||"-"),1)]))),128))])])])):i("",!0),b.value==="activities"?(d(),l("div",Ke,[!r(D)||r(D).length===0?(d(),l("div",Re,"Belum ada aktivitas. ")):(d(),l("ul",ze,[(d(!0),l(f,null,P(r(D),(s,p)=>(d(),l("li",{key:p,class:"flex gap-3 items-start"},[t[26]||(t[26]=e("div",{class:"mt-1 h-2 w-2 rounded-full bg-blue-500"},null,-1)),e("div",Le,[e("div",He,o(s.title),1),e("div",Qe,[e("span",null,o(s.time),1),s.created_by?(d(),l("span",Ye,"â€¢")):i("",!0),s.created_by?(d(),l("span",Ee,o(s.created_by),1)):i("",!0)]),e("div",We,o(s.description),1)])]))),128))]))])):i("",!0)]),r(a).status==="on_progress"?(d(),l("div",Ge,[e("button",{onClick:T,class:"inline-flex items-center rounded bg-gray-500 px-4 py-2 text-sm font-medium text-white hover:bg-gray-600"},"Batalkan"),r(B)?(d(),l("button",{key:0,onClick:z,class:"inline-flex items-center rounded bg-red-500 px-4 py-2 text-sm font-medium text-white hover:bg-red-600"},"Tolak")):i("",!0),r(B)?(d(),l("button",{key:1,onClick:t[2]||(t[2]=s=>Q()),class:"inline-flex items-center rounded bg-emerald-600 px-3 py-2 text-sm font-medium text-white hover:bg-emerald-700"},"Setujui")):i("",!0)])):i("",!0),r(a).status==="approved"?(d(),l("div",Je,[e("button",{onClick:t[3]||(t[3]=s=>G()),class:"inline-flex items-center rounded bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700"},[...t[27]||(t[27]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})],-1),c(" Konversi ke PO ",-1)])])])):i("",!0),y.value?(d(),l("div",Xe,[e("div",Ze,[t[29]||(t[29]=e("div",{class:"px-4 py-3 border-b"},[e("div",{class:"font-semibold"},"Setujui Pengajuan - Masukkan Qty Disetujui")],-1)),e("div",et,[e("table",tt,[t[28]||(t[28]=e("thead",null,[e("tr",{class:"bg-gray-100"},[e("th",{class:"p-2 text-left"},"Nama Item"),e("th",{class:"p-2 text-left"},"Kode"),e("th",{class:"p-2 text-left"},"Diminta"),e("th",{class:"p-2 text-left"},"Disetujui"),e("th",{class:"p-2 text-left"},"Catatan")])],-1)),e("tbody",null,[(d(!0),l(f,null,P(S.value,s=>(d(),l("tr",{key:s.id,class:"border-b"},[e("td",st,o(s.item?.name),1),e("td",at,o(s.item?.code),1),e("td",rt,[c(o(s.quantity_requested)+" ",1),e("span",ot,o(s.item?.unit?.short_name),1)]),e("td",nt,[x(e("input",{type:"number",min:"0",class:"w-28 h-9 px-2 rounded border","onUpdate:modelValue":p=>s.quantity_approved=p},null,8,lt),[[g,s.quantity_approved,void 0,{number:!0}]]),e("span",dt,o(s.item?.unit?.short_name),1)]),e("td",it,[x(e("input",{type:"text",class:"w-full h-9 px-2 rounded border","onUpdate:modelValue":p=>s.note=p,placeholder:"Catatan (opsional)"},null,8,ut),[[g,s.note]])])]))),128))])])]),e("div",pt,[e("button",{onClick:t[4]||(t[4]=(...s)=>y.value&&y.value(...s)),class:"px-3 h-9 rounded border"},"Batal"),e("button",{onClick:Y,class:"px-3 h-9 rounded bg-emerald-600 text-white"},"Simpan & Setujui")])])])):i("",!0),j.value?(d(),l("div",mt,[e("div",ct,[t[33]||(t[33]=e("div",{class:"px-4 py-3 border-b"},[e("div",{class:"font-semibold"},"Konversi ke Purchase Order")],-1)),e("div",xt,[e("div",gt,[t[30]||(t[30]=c(" Apakah Anda yakin ingin mengkonversi pengajuan pembelian ",-1)),e("strong",null,o(r(a).request_no),1),t[31]||(t[31]=c(" menjadi Purchase Order? ",-1))]),t[32]||(t[32]=e("div",{class:"text-xs text-gray-500"}," Setelah dikonversi, Anda akan diarahkan ke form Purchase Order dengan data barang yang sudah terisi. ",-1))]),e("div",bt,[e("button",{onClick:t[5]||(t[5]=s=>j.value=!1),class:"px-3 h-9 rounded border"},"Batal"),e("button",{onClick:J,class:"px-3 h-9 rounded bg-blue-600 text-white"},"Ya, Konversi")])])])):i("",!0),q.value?(d(),l("div",yt,[e("div",vt,[e("div",ft,[e("div",kt,"Buat Purchase Order dari "+o(r(a).request_no),1)]),e("div",_t,[e("form",{onSubmit:ae(I,["prevent"])},[e("div",ht,[e("div",null,[t[34]||(t[34]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Vendor",-1)),x(e("input",{type:"text","onUpdate:modelValue":t[6]||(t[6]=s=>u.value.vendor=s),required:"",class:"w-full h-9 px-3 rounded border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Nama Vendor"},null,512),[[g,u.value.vendor]])]),e("div",null,[t[35]||(t[35]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Tanggal PO",-1)),x(e("input",{type:"date","onUpdate:modelValue":t[7]||(t[7]=s=>u.value.po_date=s),required:"",class:"w-full h-9 px-3 rounded border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[g,u.value.po_date]])])]),e("div",wt,[t[36]||(t[36]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Catatan",-1)),x(e("textarea",{"onUpdate:modelValue":t[8]||(t[8]=s=>u.value.notes=s),rows:"3",class:"w-full px-3 py-2 rounded border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Catatan untuk Purchase Order (opsional)"},null,512),[[g,u.value.notes]])]),e("div",jt,[t[39]||(t[39]=e("h3",{class:"text-lg font-medium text-gray-900 mb-3"},"Daftar Item",-1)),e("table",qt,[t[38]||(t[38]=e("thead",null,[e("tr",{class:"bg-gray-100"},[e("th",{class:"p-2 text-left"},"Nama Item"),e("th",{class:"p-2 text-left"},"Kode"),e("th",{class:"p-2 text-left"},"Qty"),e("th",{class:"p-2 text-left"},"Harga Satuan"),e("th",{class:"p-2 text-left"},"Total")])],-1)),e("tbody",null,[(d(!0),l(f,null,P(u.value.items,(s,p)=>(d(),l("tr",{key:p,class:"border-b"},[e("td",Ct,o(s.item?.name),1),e("td",Pt,o(s.item?.code),1),e("td",Dt,o(s.quantity)+" "+o(s.item?.unit?.short_name),1),e("td",St,[x(e("input",{type:"number",min:"0",step:"0.01","onUpdate:modelValue":$=>s.unit_price=$,onInput:$=>X(p),class:"w-24 h-8 px-2 rounded border text-right",placeholder:"0"},null,40,At),[[g,s.unit_price,void 0,{number:!0}]])]),e("td",Bt,o(V(s.total_price)),1)]))),128))]),e("tfoot",null,[e("tr",Ot,[t[37]||(t[37]=e("td",{colspan:"4",class:"p-2 text-right"},"Total:",-1)),e("td",Tt,o(V(U.value)),1)])])])])],32)]),e("div",Vt,[e("button",{onClick:t[9]||(t[9]=s=>q.value=!1),class:"px-3 h-9 rounded border"},"Batal"),e("button",{onClick:I,class:"px-3 h-9 rounded bg-blue-600 text-white"},"Buat PO")])])])):i("",!0),w.value?(d(),l("div",It,[e("div",$t,[t[44]||(t[44]=e("div",{class:"px-4 py-3 border-b"},[e("div",{class:"font-semibold text-red-600"},"Tolak Pengajuan Pembelian")],-1)),e("div",Nt,[e("div",Ft,[t[40]||(t[40]=c(" Apakah Anda yakin ingin menolak pengajuan pembelian ",-1)),e("strong",null,o(r(a).request_no),1),t[41]||(t[41]=c("? ",-1))]),e("div",Ut,[t[42]||(t[42]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Alasan Penolakan *",-1)),x(e("textarea",{"onUpdate:modelValue":t[10]||(t[10]=s=>v.value.reason=s),rows:"4",class:"w-full px-3 py-2 rounded border border-gray-300 focus:ring-2 focus:ring-red-500 focus:border-red-500",placeholder:"Masukkan alasan penolakan pengajuan ini...",required:""},null,512),[[g,v.value.reason]])]),t[43]||(t[43]=e("div",{class:"text-xs text-gray-500"}," Alasan penolakan akan dikirimkan kepada pengaju dan tersimpan dalam log aktivitas. ",-1))]),e("div",{class:"px-4 py-3 border-t flex justify-end gap-2"},[e("button",{onClick:L,class:"px-3 h-9 rounded border hover:bg-gray-50"},"Batal"),e("button",{onClick:H,class:"px-3 h-9 rounded bg-red-600 text-white hover:bg-red-700"},"Ya, Tolak")])])])):i("",!0),C(ne,{show:h.value,question:"Yakin ingin membatalkan pengajuan ini?",selected:`${r(a).request_no}`,title:"Batalkan Pengajuan",confirmText:"Ya, Batalkan!",maxWidth:"md",onClose:E,onConfirm:W},null,8,["show","selected"])])],64))}});export{Wt as default};
