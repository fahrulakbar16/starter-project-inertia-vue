import{d as x,z as g,L as _,e as i,o as m,a as r,E as y,f as n,h as b,G as p,t as d,b as v,w as k}from"./app-CJkCV51W.js";import{_ as h}from"./SelectPemakaian-bo5sz744.js";const P={class:"p-6 space-y-6"},q={class:"space-y-6"},E={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},B={class:"space-y-2"},N={key:0,class:"text-sm text-red-500"},U={class:"space-y-2"},C={class:"relative"},O={class:"flex flex-col"},A={class:"font-medium"},D={class:"text-sm text-gray-500"},S={key:0,class:"absolute right-3 top-1/2 transform -translate-y-1/2"},T={key:0,class:"text-sm text-red-500"},j={class:"space-y-2"},M={key:0,class:"text-sm text-red-500"},R={class:"space-y-2"},z={key:0,class:"text-sm text-red-500"},L={__name:"CreateReceiptForm",props:{form:{type:Object,required:!0},orders:{type:Array,required:!0},employees:{type:Array,required:!0},user:{type:Object,default:null},isSuperadmin:{type:Boolean,required:!0},isEdit:{type:Boolean,required:!0}},emits:["items-loaded"],setup(t,{emit:V}){const o=t,f=V,u=x(!1),a=x(null);return o.isEdit&&o.form.employee_id?a.value=o.form.employee_id:o.user?.employee?.id&&(a.value=o.user.employee.id,o.form.employee_id=o.user.employee.id),g(a,l=>{l?o.form.employee_id=l:o.form.employee_id=null}),o.form.source="Pembelian",g(()=>o.form.order_id,async l=>{if(!l){f("items-loaded",[]),a.value=null,o.form.employee_id=null;return}u.value=!0;try{const e=await _.get(route("good-receipts.loadItems",l),{params:{type:"pembelian"}});f("items-loaded",e.data);const s=o.orders.find(c=>c.id===l);if(s)if(s.applicant)a.value=s.applicant.id;else if(s.ordered_by){const c=o.employees.find(w=>w.id===s.ordered_by);c&&(a.value=c.id)}else o.user?.employee?.id&&(a.value=o.user.employee.id)}catch(e){console.error("Error loading items:",e),f("items-loaded",[]),a.value=null,o.form.employee_id=null}finally{u.value=!1}},{immediate:!1}),(l,e)=>(m(),i("div",P,[r("form",q,[r("div",E,[r("div",B,[e[5]||(e[5]=r("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},[b(" Tanggal Penerimaan "),r("span",{class:"text-red-500"},"*")],-1)),y(r("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>t.form.received_at=s),type:"date",required:"",class:"w-full h-10 px-3 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"},null,512),[[p,t.form.received_at]]),t.form.errors.received_at?(m(),i("p",N,d(t.form.errors.received_at[0]),1)):n("",!0)]),r("div",U,[e[7]||(e[7]=r("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},[b(" Referensi Purchase Order "),r("span",{class:"text-red-500"},"*")],-1)),r("div",C,[v(h,{modelValue:t.form.order_id,"onUpdate:modelValue":e[1]||(e[1]=s=>t.form.order_id=s),items:t.orders,"search-key":"order_no","label-key":"order_no",placeholder:"Pilih Purchase Order",class:"w-full",disabled:u.value},{item:k(({item:s})=>[r("div",O,[r("span",A,d(s.order_no),1),r("span",D,d(s.vendor||"N/A"),1)])]),_:1},8,["modelValue","items","disabled"]),u.value?(m(),i("div",S,[...e[6]||(e[6]=[r("div",{class:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"},null,-1)])])):n("",!0)]),t.form.errors.order_id?(m(),i("p",T,d(t.form.errors.order_id[0]),1)):n("",!0)]),y(r("input",{"onUpdate:modelValue":e[2]||(e[2]=s=>t.form.source=s),type:"hidden",value:"Pembelian"},null,512),[[p,t.form.source]]),r("div",j,[e[8]||(e[8]=r("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},[b(" Diterima oleh "),r("span",{class:"text-red-500"},"*")],-1)),v(h,{modelValue:a.value,"onUpdate:modelValue":e[3]||(e[3]=s=>a.value=s),items:t.employees,"search-key":"name","label-key":"name",disabled:!t.isSuperadmin,placeholder:"Pilih pemesanan oleh",class:"w-full"},{item:k(({item:s})=>[r("span",null,d(s.name),1)]),_:1},8,["modelValue","items","disabled"]),t.form.errors.employee_id?(m(),i("p",M,d(t.form.errors.employee_id[0]),1)):n("",!0)])]),r("div",R,[e[9]||(e[9]=r("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," Catatan ",-1)),y(r("textarea",{"onUpdate:modelValue":e[4]||(e[4]=s=>t.form.note=s),rows:"3",placeholder:"Masukkan catatan penerimaan barang (opsional)",class:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"},null,512),[[p,t.form.note]]),t.form.errors.note?(m(),i("p",z,d(t.form.errors.note[0]),1)):n("",!0)])])]))}};export{L as default};
