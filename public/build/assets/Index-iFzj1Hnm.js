import{y as q,d as b,z as B,H as k,u as H,e as n,o as l,b as m,a as e,g as r,D as L,c as O,f as x,E as f,G as y,F as K,i as N,t as i,w as T,J as F}from"./app-CJkCV51W.js";import{_ as I}from"./AppLayout-BlEKf3Fz.js";import{_ as J}from"./Breadcrumb-BJQpsGcc.js";import{_ as A}from"./Pagination-C2dOEo8X.js";import{s as G}from"./index-D_jvqarE.js";import{_ as Y}from"./ConfirmModal-DAlWp-FQ.js";import"./FlashMessage-D4C-FUm8.js";import"./LayoutShell-FWpWJLvi.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./useAuth-DvuTgkfF.js";import"./LayoutShell.vue_vue_type_style_index_0_lang-CRqqKi3W.js";import"./index-BD4Vkpl0.js";import"./index-B9o0VbjL.js";const z={class:"px-3 h-full flex flex-col gap-3 overflow-hidden"},P={class:"flex items-center justify-between h-10"},W={class:"flex flex-col bg-white border border-gray-200 rounded-lg overflow-hidden"},Q={class:"flex items-center justify-between px-6 py-3 border-b"},R={class:"relative"},X={class:"overflow-auto","data-simplebar":""},Z={class:"min-w-full text-sm"},ee={class:"p-3 text-center"},te={class:"p-3 text-center"},se={class:"inline-block px-2 py-0.5 text-xs text-blue-700 bg-blue-100 rounded-full border border-blue-300"},ae={class:"p-3"},oe={class:"p-3"},re=["title"],le={class:"p-3 text-center"},ie={class:"p-3 text-center"},ne={class:"p-3"},de={class:"flex gap-2 justify-center"},ce=["onClick"],ue=["onClick"],pe={key:1},be={class:"flex items-center justify-between w-full"},me={class:"text-xl font-semibold text-gray-900"},xe={class:"flex flex-col gap-3"},fe={key:0,class:"mt-1 text-xs text-red-600"},ge={key:0,class:"mt-1 text-xs text-red-600"},ye={key:0,class:"mt-1 text-xs text-red-600"},ve={class:"flex justify-end gap-2"},_e=["disabled"],he={key:0},ke={key:1},He=Object.assign({layout:I},{__name:"Index",props:{compliances:Object,q:String},setup(C){const v=C,d=q(()=>v.compliances||{data:[]}),p=b(v.q||"");let _=null;B(p,()=>{clearTimeout(_),_=setTimeout(()=>S(),350)});function S(){k.get(route("compliance.index"),{q:p.value},{preserveScroll:!0,preserveState:!0,replace:!0})}const c=b(!1),s=H({id:null,section:"",title:"",description:"",created_by:null}),u=b(null),g=b(!1);function D(){s.defaults({id:null,section:"",title:"",description:"",created_by:null}),s.reset(),s.clearErrors(),c.value=!0}function w(o){s.defaults({id:o.id,section:o.section||"",title:o.title,description:o.description||"",created_by:o.created_by||null}),s.reset(),s.clearErrors(),Object.assign(s,{id:o.id,section:o.section||"",title:o.title,description:o.description||"",created_by:o.created_by||null}),c.value=!0}function j(){const o={preserveScroll:!0,onSuccess:()=>{c.value=!1}};s.id?s.put(route("compliance.update",s.id),{preserveScroll:!0,onSuccess:()=>{c.value=!1},onError:t=>{console.log(t)}}):s.post(route("compliance.store"),o)}function E(o){o&&(u.value=o,g.value=!0)}function h(){u.value=null,g.value=!1}function M(){u.value?.id&&k.delete(route("compliance.destroy",u.value.id),{onSuccess:()=>{h()},onError:o=>{alert(o?.message||"Gagal menghapus data.")},preserveScroll:!0})}function $(o){return o?new Date(o).toLocaleString("id-ID"):"-"}return(o,t)=>(l(),n("div",z,[m(r(L),{title:"Tata Tertib"}),e("div",P,[m(J,{items:[{label:"Tata Tertib"}]}),e("div",{class:"flex gap-2"},[e("button",{class:"px-3 py-2 text-sm text-white bg-blue-600 rounded",onClick:D},"Tambah Tata Tertib")])]),e("div",W,[e("div",Q,[t[7]||(t[7]=e("div",{class:"text-xl font-semibold text-gray-800"},"Daftar Tata Tertib",-1)),e("div",R,[f(e("input",{"onUpdate:modelValue":t[0]||(t[0]=a=>p.value=a),type:"text",placeholder:"Cari...",class:"h-10 w-64 rounded-lg border border-gray-200 bg-transparent py-2.5 pl-3 pr-8 text-sm text-gray-800 focus:border-blue-300 focus:outline-hidden focus:ring-2 focus:ring-blue-500/20"},null,512),[[y,p.value]]),t[6]||(t[6]=e("span",{class:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400"},"ðŸ”",-1))])]),e("div",X,[e("table",Z,[t[9]||(t[9]=e("thead",null,[e("tr",null,[e("th",{class:"p-3 bg-gray-100 border-y border-gray-200"},[e("div",{class:"text-center font-medium text-gray-600"},"No")]),e("th",{class:"p-3 bg-gray-100 border-y border-gray-200"},[e("div",{class:"text-center font-medium text-gray-600"},"Kategori")]),e("th",{class:"p-3 bg-gray-100 border border-gray-200"},[e("div",{class:"text-left font-medium text-gray-600"},"Judul")]),e("th",{class:"p-3 bg-gray-100 border border-gray-200"},[e("div",{class:"text-left font-medium text-gray-600"},"Deskripsi")]),e("th",{class:"p-3 bg-gray-100 border-y border-gray-200"},[e("div",{class:"text-center font-medium text-gray-600"},"Dibuat Oleh")]),e("th",{class:"p-3 bg-gray-100 border-y border-gray-200"},[e("div",{class:"text-center font-medium text-gray-600"},"Dibuat")]),e("th",{class:"p-3 bg-gray-100 border-y border-gray-200"},[e("div",{class:"text-center font-medium text-gray-600"},"Aksi")])])],-1)),e("tbody",null,[d.value.data&&d.value.data.length?(l(!0),n(K,{key:0},N(d.value.data,(a,V)=>(l(),n("tr",{key:a.id,class:"border-b border-gray-200"},[e("td",ee,i((d.value.current_page-1)*d.value.per_page+V+1),1),e("td",te,[e("span",se,i(a.section?a.section.charAt(0).toUpperCase()+a.section.slice(1):"-"),1)]),e("td",ae,i(a.title),1),e("td",oe,[e("div",{class:"max-w-xs truncate",title:a.description},i(a.description||"-"),9,re)]),e("td",le,i(a.user?.name||"-"),1),e("td",ie,i($(a.created_at)),1),e("td",ne,[e("div",de,[e("button",{class:"p-1 text-yellow-500 hover:text-yellow-700",onClick:U=>w(a)},"Edit",8,ce),e("button",{class:"p-1 text-red-500 hover:text-red-700",onClick:U=>E(a)},"Hapus",8,ue)])])]))),128)):(l(),n("tr",pe,[...t[8]||(t[8]=[e("td",{colspan:"7",class:"py-6 text-center text-gray-500"},"Tidak ada data",-1)])]))])])]),d.value.data&&d.value.data.length?(l(),O(A,{key:0,pagination:d.value,class:"border-t"},null,8,["pagination"])):x("",!0)]),m(r(G),{visible:c.value,"onUpdate:visible":t[5]||(t[5]=a=>c.value=a),modal:"",dismissableMask:"",style:{width:"520px",padding:"6px"}},{header:T(()=>[e("div",be,[e("h3",me,i(r(s).id?"Edit":"Tambah")+" Tata Tertib",1)])]),default:T(()=>[e("div",xe,[e("div",null,[t[11]||(t[11]=e("label",{class:"block mb-1 text-sm text-gray-600"},"Kategori",-1)),f(e("select",{"onUpdate:modelValue":t[1]||(t[1]=a=>r(s).section=a),class:"w-full h-10 px-3 rounded border border-gray-300"},[...t[10]||(t[10]=[e("option",{value:""},"Pilih Kategori",-1),e("option",{value:"hak"},"Hak & Kewajiban",-1),e("option",{value:"larangan"},"Larangan",-1)])],512),[[F,r(s).section]]),r(s).errors.section?(l(),n("p",fe,i(r(s).errors.section),1)):x("",!0)]),e("div",null,[t[12]||(t[12]=e("label",{class:"block mb-1 text-sm text-gray-600"},"Judul",-1)),f(e("input",{"onUpdate:modelValue":t[2]||(t[2]=a=>r(s).title=a),type:"text",class:"w-full h-10 px-3 rounded border border-gray-300"},null,512),[[y,r(s).title]]),r(s).errors.title?(l(),n("p",ge,i(r(s).errors.title),1)):x("",!0)]),e("div",null,[t[13]||(t[13]=e("label",{class:"block mb-1 text-sm text-gray-600"},"Deskripsi (opsional)",-1)),f(e("textarea",{"onUpdate:modelValue":t[3]||(t[3]=a=>r(s).description=a),rows:"3",class:"w-full px-3 py-2 rounded border border-gray-300"},null,512),[[y,r(s).description]]),r(s).errors.description?(l(),n("p",ye,i(r(s).errors.description),1)):x("",!0)]),e("div",ve,[e("button",{class:"px-3 h-10 rounded border",type:"button",onClick:t[4]||(t[4]=a=>c.value=!1)},"Batal"),e("button",{disabled:r(s).processing,class:"px-3 h-10 text-white bg-blue-600 rounded disabled:opacity-60",type:"button",onClick:j},[r(s).processing?(l(),n("span",he,"Menyimpan...")):(l(),n("span",ke,"Simpan"))],8,_e)])])]),_:1},8,["visible"]),m(Y,{show:g.value,question:"Yakin ingin menghapus",selected:`${u.value?.title||""}`,title:"Hapus Tata Tertib",confirmText:"Ya, Hapus!",maxWidth:"md",onClose:h,onConfirm:M},null,8,["show","selected"])]))}});export{He as default};
