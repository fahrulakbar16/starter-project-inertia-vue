import{R as $,u as z,d as U,e as d,o as n,b as m,a as e,g as o,D as K,E as u,f as p,G as b,n as g,t as c,J as k,F as w,i as P,h as j,N as F,S as H,H as T}from"./app-CJkCV51W.js";import{_ as I}from"./AppLayout-BlEKf3Fz.js";import{_ as J}from"./Breadcrumb-BJQpsGcc.js";import{_ as f}from"./Select-D-70zGQm.js";import{s as L}from"./index-BE-zAuZ8.js";import{v as V}from"./v4-BKrj-4V8.js";import"./FlashMessage-D4C-FUm8.js";import"./LayoutShell-FWpWJLvi.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./useAuth-DvuTgkfF.js";import"./LayoutShell.vue_vue_type_style_index_0_lang-CRqqKi3W.js";import"./index-BD4Vkpl0.js";import"./index-jsubnK9F.js";import"./index-GHgtZDXu.js";const Q={class:"flex overflow-hidden flex-col gap-3 px-3 py-0.5 h-full"},R={class:"flex justify-between items-center h-10"},G={class:"flex overflow-hidden flex-col bg-white rounded-lg border border-gray-200"},W={class:"p-6 space-y-4"},X={class:"grid grid-cols-1 gap-4 md:grid-cols-3"},Y={key:0,class:"mt-1 text-xs text-red-500"},Z={key:0,class:"mt-1 text-xs text-red-500"},q={key:0,class:"mt-1 text-xs text-red-500"},ee={class:"grid grid-cols-1 gap-4 md:grid-cols-2"},te={key:0,class:"mt-1 text-xs text-red-500"},se={key:0,class:"mt-1 text-xs text-red-500"},oe={class:"grid grid-cols-1 gap-4 mt-2 md:grid-cols-2"},re={class:"md:col-span-2"},le={key:0,class:"mt-1 text-xs text-red-500"},ae={key:0,class:"mt-1 text-xs text-red-500"},ie={class:"flex overflow-hidden flex-col bg-white rounded-lg border border-gray-200"},de={class:"p-6 space-y-4"},ne={class:"space-y-4"},ue={class:"space-y-5"},ce={class:"grid grid-cols-12 gap-4"},pe={class:"col-span-12 md:col-span-1"},me={class:"flex gap-3 items-center md:flex-col md:items-start"},be={class:"flex gap-2 items-center"},ge={class:"flex justify-center items-center w-8 h-8 text-sm font-medium text-gray-700 bg-gray-100 rounded-full border"},ye={class:"text-sm font-medium text-gray-700 md:hidden"},xe={class:"hidden text-sm font-medium text-gray-700 md:block"},ve=["onClick"],_e={class:"col-span-12 space-y-4 md:col-span-11"},fe={class:"grid grid-cols-1 gap-4 lg:grid-cols-12"},he={class:"lg:col-span-8"},ke={class:"relative z-0 w-full group"},we=["onUpdate:modelValue"],Ve={class:"lg:col-span-4"},Ce={class:"inline-flex gap-2 items-center text-gray-800 cursor-pointer"},Ue=["onUpdate:modelValue"],Pe={class:"grid grid-cols-1 gap-4 lg:grid-cols-12"},je={class:"lg:col-span-6"},Te={class:"relative z-0 w-full group"},De=["onUpdate:modelValue"],Se={class:"lg:col-span-3"},Me={class:"lg:col-span-3"},Ne=["onUpdate:modelValue","onChange"],Oe={key:0,class:"mt-4"},Ae={class:"overflow-x-auto"},Ee={class:"w-full text-sm rounded border border-gray-200"},Be={class:"p-3 border-b border-gray-100"},$e=["onUpdate:modelValue"],ze={class:"p-3 border-b border-gray-100"},Ke=["onUpdate:modelValue"],Fe={class:"p-3 text-center border-b border-gray-100"},He=["onClick"],Ie=["onClick"],Je={class:"flex gap-2 justify-end mt-4"},Le=["disabled"],at=Object.assign({layout:I},{__name:"Create",props:{categories:Array,departments:Array,branches:Array,questionCategories:Array},setup(y){const D=[{label:"Konfigurasi"},{label:"Checklists",href:route("checklists.index")},{label:"Tambah Checklist"}],h=$(),s=z({name:"",sop_code:"",category_id:null,department_id:null,branch_id:null,status:"Draft",description:"",type:"single",questions:[]}),l=U({}),x=U([{uid:V(),title:"",description:"",answer_type:"text",required:!1,category:null,options:[]}]);function S(){x.value.push({uid:V(),title:"",description:"",answer_type:"text",required:!1,category:null,options:[]})}function M(i){["select","radio","checkbox"].includes(i.answer_type)||(i.options=[])}function N(i){x.value.splice(i,1)}function O(i){i.options.push({uid:V(),label:"",value:""})}function A(i,t){i.options.splice(t,1)}function E(){T.visit(route("checklists.index"))}function B(){l.value={};let i=!1;if(s.name||(l.value.name="Nama Checklist wajib diisi.",i=!0),s.sop_code||(l.value.sop_code="Nomor SOP wajib diisi.",i=!0),s.category_id||(l.value.category_id="Kategori Checklist wajib dipilih.",i=!0),s.branch_id||(l.value.branch_id="Cabang wajib dipilih.",i=!0),s.department_id||(l.value.department_id="Departemen wajib dipilih.",i=!0),i){h.add({severity:"error",summary:"Validasi Error",detail:"Mohon lengkapi semua field yang wajib diisi.",life:3e3});return}s.questions=x.value.map(t=>({title:t.title,description:t.description,answer_type:t.answer_type,required:t.required,category:t.category,options:t.options.map(r=>({label:r.label,value:r.value}))})),s.post(route("checklists.store"),{onSuccess:()=>{h.add({severity:"success",summary:"Berhasil",detail:"Checklist berhasil disimpan.",life:3e3}),T.visit(route("checklists.index"))},onError:t=>{console.error("Form submission errors:",t);const r=Object.values(t)[0];h.add({severity:"error",summary:"Error",detail:r||"Terjadi kesalahan saat menyimpan checklist.",life:5e3})}})}return(i,t)=>(n(),d(w,null,[m(o(K),{title:"Tambah Checklist"}),m(o(L)),e("div",Q,[e("div",R,[m(J,{items:D})]),e("div",G,[e("div",W,[t[18]||(t[18]=e("h2",{class:"text-xl font-semibold text-gray-800"}," Informasi Checklist ",-1)),e("div",X,[e("div",null,[t[8]||(t[8]=e("label",{for:"name",class:"block mb-1 text-sm text-gray-600"},"Nama Checklist",-1)),u(e("input",{id:"name",class:g(["px-3 py-2 w-full text-sm rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",{"border-red-500":l.value.name||o(s).errors.name}]),type:"text","onUpdate:modelValue":t[0]||(t[0]=r=>o(s).name=r),placeholder:"Masukkan nama checklist",required:""},null,2),[[b,o(s).name]]),l.value.name||o(s).errors.name?(n(),d("p",Y,c(l.value.name||o(s).errors.name),1)):p("",!0)]),e("div",null,[t[9]||(t[9]=e("label",{for:"sop_code",class:"block mb-1 text-sm text-gray-600"},"Nomor SOP",-1)),u(e("input",{id:"sop_code",class:g(["px-3 py-2 w-full text-sm rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",{"border-red-500":l.value.sop_code||o(s).errors.sop_code}]),type:"text","onUpdate:modelValue":t[1]||(t[1]=r=>o(s).sop_code=r),placeholder:"Masukkan kode SOP",required:""},null,2),[[b,o(s).sop_code]]),l.value.sop_code||o(s).errors.sop_code?(n(),d("p",Z,c(l.value.sop_code||o(s).errors.sop_code),1)):p("",!0)]),e("div",null,[t[10]||(t[10]=e("label",{class:"block mb-1 text-sm text-gray-600"},"Kategori Checklist",-1)),m(f,{modelValue:o(s).category_id,"onUpdate:modelValue":t[2]||(t[2]=r=>o(s).category_id=r),label:"Pilih Kategori",items:y.categories,taggable:!0,class:g({"border-red-500":l.value.category_id||o(s).errors.category_id})},null,8,["modelValue","items","class"]),l.value.category_id||o(s).errors.category_id?(n(),d("p",q,c(l.value.category_id||o(s).errors.category_id),1)):p("",!0)])]),e("div",ee,[e("div",null,[t[11]||(t[11]=e("label",{class:"block mb-1 text-sm text-gray-600"},"Cabang",-1)),m(f,{modelValue:o(s).branch_id,"onUpdate:modelValue":t[3]||(t[3]=r=>o(s).branch_id=r),label:"Pilih Cabang",items:y.branches,class:g({"border-red-500":l.value.branch_id||o(s).errors.branch_id})},null,8,["modelValue","items","class"]),l.value.branch_id||o(s).errors.branch_id?(n(),d("p",te,c(l.value.branch_id||o(s).errors.branch_id),1)):p("",!0)]),e("div",null,[t[12]||(t[12]=e("label",{class:"block mb-1 text-sm text-gray-600"},"Departemen",-1)),m(f,{modelValue:o(s).department_id,"onUpdate:modelValue":t[4]||(t[4]=r=>o(s).department_id=r),label:"Pilih Departemen",items:y.departments,class:g({"border-red-500":l.value.department_id||o(s).errors.department_id})},null,8,["modelValue","items","class"]),l.value.department_id||o(s).errors.department_id?(n(),d("p",se,c(l.value.department_id||o(s).errors.department_id),1)):p("",!0)])]),e("div",oe,[e("div",re,[t[13]||(t[13]=e("label",{for:"description",class:"block mb-1 text-sm text-gray-600"},"Deskripsi",-1)),u(e("textarea",{id:"description","onUpdate:modelValue":t[5]||(t[5]=r=>o(s).description=r),rows:"3",class:"w-full text-sm font-medium placeholder-gray-500 text-gray-600 rounded-lg border-gray-400",placeholder:"Masukkan deskripsi checklist"},null,512),[[b,o(s).description]])]),e("div",null,[t[15]||(t[15]=e("label",{for:"type",class:"block mb-1 text-sm text-gray-600"},"Jenis",-1)),u(e("select",{id:"type","onUpdate:modelValue":t[6]||(t[6]=r=>o(s).type=r),class:g(["w-full text-sm font-medium placeholder-gray-500 text-gray-600 rounded-lg border-gray-400",{"border-red-500":o(s).errors.type}]),required:""},[...t[14]||(t[14]=[e("option",{value:"single"},"Perorang",-1),e("option",{value:"multiple"},"Banyak Orang",-1)])],2),[[k,o(s).type]]),o(s).errors.type?(n(),d("p",le,c(o(s).errors.type),1)):p("",!0)]),e("div",null,[t[17]||(t[17]=e("label",{for:"status",class:"block mb-1 text-sm text-gray-600"},"Status",-1)),u(e("select",{id:"status","onUpdate:modelValue":t[7]||(t[7]=r=>o(s).status=r),class:g(["w-full text-sm font-medium placeholder-gray-500 text-gray-600 rounded-lg border-gray-400",{"border-red-500":o(s).errors.status}]),required:""},[...t[16]||(t[16]=[e("option",{value:"Draft"},"Draft",-1),e("option",{value:"Active"},"Active",-1),e("option",{value:"Inactive"},"Inactive",-1)])],2),[[k,o(s).status]]),o(s).errors.status?(n(),d("p",ae,c(o(s).errors.status),1)):p("",!0)])])])]),e("div",ie,[e("div",de,[t[27]||(t[27]=e("h2",{class:"text-xl font-semibold text-gray-800"}," Daftar Pertanyaan ",-1)),e("div",ne,[(n(!0),d(w,null,P(x.value,(r,v)=>(n(),d("div",{key:r.uid,class:"p-4 bg-white rounded-lg border border-gray-200 shadow-sm"},[e("div",ue,[e("div",ce,[e("div",pe,[e("div",me,[e("div",be,[e("div",ge,c(v+1),1),e("label",ye,"Pertanyaan "+c(v+1),1)]),e("label",xe,"Pertanyaan "+c(v+1),1),e("button",{type:"button",onClick:a=>N(v),class:"px-2 py-1 text-xs text-red-600 rounded border border-red-300 hover:bg-red-50"}," Hapus ",8,ve)])]),e("div",_e,[e("div",fe,[e("div",he,[e("div",ke,[u(e("input",{"onUpdate:modelValue":a=>r.title=a,type:"text",class:"block px-0 py-2.5 w-full text-sm placeholder-transparent text-gray-900 bg-transparent border-0 border-b-2 border-gray-300 focus:border-blue-600 focus:outline-none",placeholder:"Masukkan pertanyaan"},null,8,we),[[b,r.title]]),t[19]||(t[19]=e("label",{class:"absolute top-3 -z-10 origin-[0] -translate-y-6 scale-75 transform text-sm text-gray-500"},"Pertanyaan",-1))])]),e("div",Ve,[e("label",Ce,[u(e("input",{type:"checkbox","onUpdate:modelValue":a=>r.required=a,class:"sr-only peer"},null,8,Ue),[[F,r.required]]),t[20]||(t[20]=e("div",{class:"relative w-11 h-6 bg-gray-200 rounded-full peer peer-checked:bg-sky-600"},null,-1)),t[21]||(t[21]=j(" Wajib? ",-1))])])]),e("div",Pe,[e("div",je,[e("div",Te,[u(e("input",{"onUpdate:modelValue":a=>r.description=a,type:"text",class:"block px-0 py-2.5 w-full text-sm placeholder-transparent text-gray-900 bg-transparent border-0 border-b-2 border-gray-300 focus:border-blue-600 focus:outline-none",placeholder:"Masukkan petunjuk pertanyaan"},null,8,De),[[b,r.description]]),t[22]||(t[22]=e("label",{class:"absolute top-3 -z-10 origin-[0] -translate-y-6 scale-75 transform text-sm text-gray-500"},"Petunjuk Pertanyaan",-1))])]),e("div",Se,[m(f,{modelValue:r.category,"onUpdate:modelValue":a=>r.category=a,items:y.questionCategories,label:"Pilih Kategori",class:"w-full",taggable:!0},null,8,["modelValue","onUpdate:modelValue","items"])]),e("div",Me,[u(e("select",{"onUpdate:modelValue":a=>r.answer_type=a,onChange:a=>M(r),class:"p-2 w-full text-gray-700 bg-white rounded-lg border border-gray-300"},[...t[23]||(t[23]=[H('<option disabled value=""> Pilih Tipe </option><option value="text"> Text </option><option value="textarea"> Textarea </option><option value="select"> Select </option><option value="radio"> Radio </option><option value="checkbox"> Checkbox </option>',6)])],40,Ne),[[k,r.answer_type]])])]),["select","radio","checkbox"].includes(r.answer_type)?(n(),d("div",Oe,[t[25]||(t[25]=e("div",{class:"mb-2"},[e("h4",{class:"text-sm font-medium text-gray-700"}," Opsi Jawaban ")],-1)),e("div",Ae,[e("table",Ee,[t[24]||(t[24]=e("thead",null,[e("tr",{class:"bg-gray-50"},[e("th",{class:"p-3 text-left border-b border-gray-200"}," Label "),e("th",{class:"p-3 text-left border-b border-gray-200"}," Value "),e("th",{class:"p-3 w-20 text-center border-b border-gray-200"}," Aksi ")])],-1)),e("tbody",null,[(n(!0),d(w,null,P(r.options,(a,C)=>(n(),d("tr",{key:a.uid||C,class:"hover:bg-gray-50"},[e("td",Be,[u(e("input",{"onUpdate:modelValue":_=>a.label=_,type:"text",class:"p-2 w-full text-sm rounded border border-gray-300",placeholder:"Label opsi"},null,8,$e),[[b,a.label]])]),e("td",ze,[u(e("input",{"onUpdate:modelValue":_=>a.value=_,type:"text",class:"p-2 w-full text-sm rounded border border-gray-300",placeholder:"Value opsi"},null,8,Ke),[[b,a.value]])]),e("td",Fe,[e("button",{type:"button",onClick:_=>A(r,C),class:"text-red-600 hover:text-red-800"}," Hapus ",8,He)])]))),128))])]),e("button",{type:"button",onClick:a=>O(r),class:"px-4 py-2 mt-3 text-sm text-white bg-blue-600 rounded hover:bg-blue-700"}," + Tambah Opsi ",8,Ie)])])):p("",!0)])])])]))),128))]),e("div",Je,[e("button",{onClick:S,class:"px-4 py-2 text-white bg-green-500 rounded"},[...t[26]||(t[26]=[e("i",{class:"mr-2 lni lni-plus"},null,-1),j("Tambah Pertanyaan ",-1)])]),e("button",{onClick:E,class:"px-4 py-2 text-sm text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200"}," Batal "),e("button",{onClick:B,disabled:o(s).processing,class:"px-4 py-2 text-sm text-white bg-blue-600 rounded-lg hover:bg-blue-700 disabled:opacity-50"},c(o(s).processing?"Menyimpan...":"Simpan"),9,Le)])])])])],64))}});export{at as default};
