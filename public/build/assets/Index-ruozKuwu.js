import{d as D,y as q,z as I,U as se,e as n,o as s,b as u,a as e,g,D as oe,c as B,f as y,w as S,h,P as C,E as _,J as V,G,F as m,i as P,t as l,n as z,H as L}from"./app-CJkCV51W.js";import{_ as de}from"./Pagination-C2dOEo8X.js";import{_ as le}from"./Breadcrumb-BJQpsGcc.js";import{_ as ne}from"./ConfirmModal-DAlWp-FQ.js";import{P as ie}from"./PlusSquareIcon-DA_kLpvy.js";import{S as Y}from"./ShowIcon-CiA5nZAB.js";import{E as J}from"./EditIcon-B9T5EQzJ.js";import{T as K}from"./TrashIcon-DSAHmBPH.js";import{_ as ue}from"./AppLayout-BlEKf3Fz.js";import{u as ge}from"./useAuth-DvuTgkfF.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./FlashMessage-D4C-FUm8.js";import"./LayoutShell-FWpWJLvi.js";import"./LayoutShell.vue_vue_type_style_index_0_lang-CRqqKi3W.js";const pe={class:"flex flex-col h-full gap-3 px-3 overflow-hidden"},ye={class:"flex items-center justify-between h-10"},ce={class:"flex flex-col overflow-hidden rounded-lg border border-gray-200 bg-white dark:border-gray-600 dark:bg-white/[0.03]"},me={class:"flex flex-col h-16 gap-2 px-8 sm:flex-row sm:items-center sm:justify-between"},xe={class:"flex items-center gap-3"},be={class:"overflow-auto overflow-x-auto","data-simplebar":""},fe={class:"min-w-full text-sm table-fixed"},ve={class:"py-2.5 bg-gray-100 border-gray-200 border-y dark:border-gray-600 dark:bg-gray-800"},ke={class:"py-2.5 bg-gray-100 border-gray-200 border-y dark:border-gray-600 dark:bg-gray-800"},he={class:"py-2.5 bg-gray-100 border-gray-200 border-y dark:border-gray-600 dark:bg-gray-800"},_e={colspan:"2",class:"p-2 border-gray-200 bg-gray-50 border-y dark:border-gray-600 dark:bg-gray-900"},we={class:"relative space-x-4"},De={class:"px-2 py-2 border border-gray-200 bg-gray-50 dark:border-gray-600 dark:bg-gray-900"},Be={class:"grid grid-cols-2 gap-2 w-72"},Se={class:"px-2 py-2 border border-gray-200 bg-gray-50 dark:border-gray-600 dark:bg-gray-900"},Ce=["value"],qe={class:"px-6 py-2 text-left border border-gray-200 bg-gray-50 dark:border-gray-600 dark:bg-gray-900"},Ie={key:0},Pe={key:0},Te={colspan:8,class:"px-4 py-2 font-semibold text-left text-gray-600 bg-gray-50 dark:bg-gray-900/40 dark:text-gray-300"},$e=["onClick"],je={class:"text-xs"},Me={class:"ml-1 text-xs font-medium text-gray-500"},Ve={class:"px-3 py-3 text-center"},Ge={class:"px-3 py-3 font-mono"},Le={key:1,class:"inline-flex items-center px-2 py-0.5 text-xs font-medium rounded-full bg-slate-100 text-slate-700 border border-slate-200"},Ue={class:"px-3 py-3 text-center"},Ee={class:"px-3 py-3"},Oe={class:"px-3 py-3"},Re={class:"px-3 py-3"},He={class:"px-3 py-3"},Ne={class:"px-6 py-3"},Ae={class:"flex items-center gap-2"},Fe=["onClick"],ze={class:"px-3 py-3 text-center"},Ye={class:"px-3 py-3 font-mono"},Je={key:1,class:"inline-flex items-center px-2 py-0.5 text-xs font-medium rounded-full bg-slate-100 text-slate-700 border border-slate-200"},Ke={class:"px-3 py-3 text-center"},We={class:"px-3 py-3"},Qe={class:"px-3 py-3"},Xe={class:"px-3 py-3 text-center"},Ze={class:"px-3 py-3 text-center"},et={class:"px-6 py-3"},tt={class:"flex items-center gap-2"},rt=["onClick"],at={components:{SortIcon:{props:{active:Boolean,direction:String},template:`
                <span class="inline-block ml-2 text-xs">
                    <template v-if="active">
                        {{ direction === 'asc' ? 'â–²' : 'â–¼' }}
                    </template>
                    <template v-else>
                        â‡…
                    </template>
                </span>
            `}}},vt=Object.assign(at,{layout:ue},{__name:"Index",props:{goodIssues:{type:Object,required:!0},departments:{type:Array,required:!0},employees:{type:Array,required:!0},filters:{type:Object,default:()=>({})},sortBy:{type:String,default:"date"},sortDirection:{type:String,default:"desc"},groupBy:{type:String,default:null}},setup(p){const{can:x}=ge(),o=p,W=[{label:"Penyimpanan"},{label:"Pemakaian Barang"}],d=D({q:o.filters.q??"",department_id:o.filters.department_id??null,employee_id:o.filters.employee_id??null,date_from:o.filters.date_from??"",date_to:o.filters.date_to??"",status:o.filters.status??""}),v=D(o.groupBy??"all"),k=q(()=>v.value||(o.groupBy??"all")),U=q(()=>!!k.value),T=D(!1),w=D(null),E=q(()=>{const r={},t=((o.goodIssues.current_page||1)-1)*(o.goodIssues.per_page||20);return(o.goodIssues.data||[]).forEach((a,c)=>{r[a.id]=t+c+1}),r}),$=D(new Set),Q=q(()=>{if(!U.value)return{};const r=o.goodIssues.data||[],t={};for(const f of r){const a=X(f);t[a]||(t[a]=[]),t[a].push(f)}return t});function X(r){switch(k.value){case"department":return r.department??"Tanpa Departemen";case"date":return r.date;case"status":return M(r.status);default:return"ungrouped"}}function Z(r){switch(k.value){case"department":return`Departemen: ${r}`;case"date":return`Tanggal: ${r}`;case"status":return`Status: ${r}`;default:return r}}function O(r){return $.value.has(r)}function ee(r){const t=new Set($.value);t.has(r)?t.delete(r):t.add(r),$.value=t}function b({sortBy:r=o.sortBy,sortDirection:t=o.sortDirection}={}){L.get(route("good-issues.index"),{...d.value,groupBy:k.value||null,sortBy:r,sortDirection:t},{preserveScroll:!0,preserveState:!0,replace:!0,onStart:()=>{typeof window<"u"&&(window.__suppressProgress=!0)},onFinish:()=>{typeof window<"u"&&(window.__suppressProgress=!1)}})}let R;I(()=>d.value.q,()=>{clearTimeout(R),R=setTimeout(()=>b({}),400)}),I(()=>[d.value.department_id,d.value.employee_id,d.value.status,d.value.date_from,d.value.date_to],()=>{b({})}),I(v,()=>{b({})}),I(()=>o.groupBy,r=>{H(),!v.value&&r&&(v.value=r)});function j(r){const t=o.sortBy===r&&o.sortDirection==="asc"?"desc":"asc";b({sortBy:r,sortDirection:t})}function H(){d.value={q:"",employee_id:null,department_id:null,date_from:"",date_to:"",status:""},b({})}function M(r){return{pending:"Menunggu Persetujuan",submitted:"Diajukan",approved:"Disetujui"}[r]??r}function N(r){return{pending:"bg-yellow-100 text-yellow-800 dark:bg-yellow-500/20 dark:text-yellow-300",approved:"bg-emerald-100 text-emerald-800 dark:bg-emerald-500/20 dark:text-emerald-300",rejected:"bg-rose-100 text-rose-800 dark:bg-rose-500/20 dark:text-rose-300"}[r]??"bg-gray-100 text-gray-700"}function A(r,t){r&&(w.value={id:r,request:t},T.value=!0)}function F(){T.value=!1,w.value=null}function te(){w.value?.id&&L.delete(route("good-issues.destroy",w.value.id),{preserveScroll:!0,onSuccess:()=>{F(),b({})}})}function re(r){b({})}function ae(r){L.get(route("good-issues.index"),{...d.value,groupBy:k.value||null,sortBy:o.sortBy,sortDirection:o.sortDirection,per_page:r},{preserveScroll:!0,preserveState:!0,replace:!0})}return(r,t)=>{const f=se("SortIcon");return s(),n(m,null,[u(g(oe),{title:"Pemakaian Barang"}),e("div",pe,[e("div",ye,[u(le,{items:W}),e("div",null,[g(x)("good_issues.create")?(s(),B(g(C),{key:0,href:r.route("good-issues.create"),class:"inline-flex items-center gap-2 text-white hover:text-blue-500 rounded-md border hover:border-gray-300 bg-blue-500 px-3 py-2 text-sm font-medium text-white-700 hover:bg-gray-50 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-400 dark:hover:bg-white/[0.03] dark:hover:text-gray-200"},{default:S(()=>[u(ie,{class:"w-4 h-4"}),t[9]||(t[9]=h(" Buat Log Pemakaian ",-1))]),_:1},8,["href"])):y("",!0)])]),e("div",ce,[e("div",me,[t[11]||(t[11]=e("div",{class:"font-bold text-gray-700 md:text-xl dark:text-gray-300"}," Daftar Pemakaian Barang ",-1)),e("div",xe,[_(e("select",{"onUpdate:modelValue":t[0]||(t[0]=a=>v.value=a),class:"h-10 px-3 text-sm text-gray-800 bg-transparent border border-gray-200 rounded-lg dark:border-gray-700 dark:bg-gray-800 dark:text-white/90"},[...t[10]||(t[10]=[e("option",{value:"all"},"Kelompokan Berdasarkan",-1),e("option",{value:"date"},"Group: Tanggal",-1),e("option",{value:"department"},"Group: Departemen",-1),e("option",{value:"status"},"Group: Status",-1)])],512),[[V,v.value]])])]),e("div",be,[e("table",fe,[t[25]||(t[25]=e("colgroup",null,[e("col",{style:{width:"70px"}}),e("col",{style:{width:"180px"}}),e("col",{style:{width:"200px"}}),e("col",{style:{width:"160px"}}),e("col",{style:{width:"180px"}}),e("col",{style:{width:"220px"}}),e("col",{style:{width:"200px"}}),e("col",{style:{width:"140px"}})],-1)),e("thead",null,[e("tr",null,[t[15]||(t[15]=e("th",{class:"py-2.5 bg-gray-100 border-gray-200 border-y dark:border-gray-600 dark:bg-gray-800"},[e("div",{class:"px-3 font-medium text-gray-600 dark:text-gray-300"}," No. ")],-1)),t[16]||(t[16]=e("th",{class:"py-2.5 bg-gray-100 border-gray-200 border-y dark:border-gray-600 dark:bg-gray-800"},[e("div",{class:"px-3 font-medium text-gray-600 dark:text-gray-300"}," Referensi (MR) ")],-1)),e("th",ve,[e("button",{onClick:t[1]||(t[1]=a=>j("date")),class:"w-full px-3 font-medium text-center text-gray-600 dark:text-gray-300"},[t[12]||(t[12]=h(" Tanggal ",-1)),u(f,{active:p.sortBy==="date",direction:p.sortDirection},null,8,["active","direction"])])]),e("th",ke,[e("button",{onClick:t[2]||(t[2]=a=>j("department")),class:"w-full px-3 font-medium text-left text-gray-600 dark:text-gray-300"},[t[13]||(t[13]=h(" Departemen ",-1)),u(f,{active:p.sortBy==="department",direction:p.sortDirection},null,8,["active","direction"])])]),t[17]||(t[17]=e("th",{class:"py-2.5 bg-gray-100 border-gray-200 border-y dark:border-gray-600 dark:bg-gray-800"},[e("div",{class:"px-3 font-medium text-gray-600 dark:text-gray-300"}," Dibuat Oleh ")],-1)),e("th",he,[e("button",{onClick:t[3]||(t[3]=a=>j("status")),class:"w-full px-3 font-medium text-left text-gray-600 dark:text-gray-300"},[t[14]||(t[14]=h(" Status ",-1)),u(f,{active:p.sortBy==="status",direction:p.sortDirection},null,8,["active","direction"])])]),t[18]||(t[18]=e("th",{class:"py-2.5 bg-gray-100 border-gray-200 border-y dark:border-gray-600 dark:bg-gray-800"},[e("div",{class:"px-3 font-medium text-gray-600 dark:text-gray-300"}," Total Item ")],-1)),t[19]||(t[19]=e("th",{class:"py-2.5 bg-gray-100 border-gray-200 border-y dark:border-gray-600 dark:bg-gray-800"},[e("div",{class:"px-3 font-medium text-gray-600 dark:text-gray-300"}," Aksi ")],-1))]),e("tr",null,[e("th",_e,[e("div",we,[_(e("input",{"onUpdate:modelValue":t[4]||(t[4]=a=>d.value.q=a),type:"text",placeholder:"Cari nomor IU atau MR",class:"py-2.5 pr-12 pl-4 text-sm text-gray-800 bg-transparent rounded-lg border border-gray-200 focus:border-blue-300 focus:outline-hidden focus:ring-2 focus:ring-blue-500/20"},null,512),[[G,d.value.q]]),t[20]||(t[20]=e("span",{class:"absolute text-gray-400 -translate-y-1/2 right-4 top-1/2"},"ðŸ”",-1))])]),e("th",De,[e("div",Be,[_(e("input",{"onUpdate:modelValue":t[5]||(t[5]=a=>d.value.date_from=a),type:"date",class:"w-full h-10 px-2 text-xs border-gray-300 rounded sm:text-sm dark:border-gray-700 dark:bg-gray-800 dark:text-white/90"},null,512),[[G,d.value.date_from]]),_(e("input",{"onUpdate:modelValue":t[6]||(t[6]=a=>d.value.date_to=a),type:"date",class:"w-full h-10 px-2 text-xs border-gray-300 rounded sm:text-sm dark:border-gray-700 dark:bg-gray-800 dark:text-white/90"},null,512),[[G,d.value.date_to]])])]),e("th",Se,[_(e("select",{"onUpdate:modelValue":t[7]||(t[7]=a=>d.value.department_id=a),class:"px-3 text-xs border-gray-300 rounded w-28 sm:text-sm dark:border-gray-700 dark:bg-gray-800 dark:text-white/90"},[t[21]||(t[21]=e("option",{value:null},"Semua",-1)),(s(!0),n(m,null,P(p.departments,a=>(s(),n("option",{key:a.id,value:a.id},l(a.name),9,Ce))),128))],512),[[V,d.value.department_id]])]),t[23]||(t[23]=e("th",{class:"px-2 py-2 border border-gray-200 bg-gray-50 dark:border-gray-600 dark:bg-gray-900"},null,-1)),e("th",qe,[_(e("select",{"onUpdate:modelValue":t[8]||(t[8]=a=>d.value.status=a),class:"h-10 px-3 text-xs border-gray-300 rounded w-36 sm:text-sm dark:border-gray-700 dark:bg-gray-800 dark:text-white/90"},[...t[22]||(t[22]=[e("option",{value:""},"Semua",-1),e("option",{value:"pending"},"Menunggu Persetujuan",-1),e("option",{value:"approved"},"Disetujui",-1),e("option",{value:"rejected"},"Ditolak",-1)])],512),[[V,d.value.status]])]),e("th",{colspan:"2",class:"px-2 py-2 border-gray-200 bg-gray-50 border-y dark:border-gray-600 dark:bg-gray-900"},[e("button",{onClick:H,class:"px-3 py-2 text-xs text-white bg-red-500 rounded hover:bg-red-600"}," Clear ")])])]),e("tbody",null,[!p.goodIssues.data||p.goodIssues.data.length===0?(s(),n("tr",Ie,[...t[24]||(t[24]=[e("td",{colspan:"8",class:"py-8 text-center text-gray-500"}," Tidak ada data ",-1)])])):U.value?(s(!0),n(m,{key:1},P(Q.value,(a,c)=>(s(),n(m,{key:c},[k.value!=="all"?(s(),n("tr",Pe,[e("td",Te,[e("button",{class:"inline-flex items-center gap-2",onClick:i=>ee(c)},[e("span",je,l(O(c)?"â–¶":"â–¼"),1),e("span",null,l(Z(c)),1),e("span",Me,"("+l(a.length)+")",1)],8,$e)])])):y("",!0),O(c)?y("",!0):(s(!0),n(m,{key:1},P(a,i=>(s(),n("tr",{key:i.id,class:"border-b border-gray-200 dark:border-gray-700"},[e("td",Ve,l(E.value[i.id])+". ",1),e("td",Ge,[i.request?(s(),n(m,{key:0},[h(l(i.request),1)],64)):(s(),n("span",Le," Manual (Tanpa Referensi) "))]),e("td",Ue,l(i.date),1),e("td",Ee,l(i.department),1),e("td",Oe,l(i.created_by??"-"),1),e("td",Re,[e("span",{class:z([N(i.status),"px-2.5 py-1 text-xs font-medium rounded-full"])},l(M(i.status)),3)]),e("td",He,l(i.items_count),1),e("td",Ne,[e("div",Ae,[g(x)("good_issues.view")?(s(),B(g(C),{key:0,href:r.route("good-issues.show",i.id),title:"Lihat Detail"},{default:S(()=>[u(Y,{class:"text-blue-400"})]),_:1},8,["href"])):y("",!0),g(x)("good_issues.edit")?(s(),B(g(C),{key:1,href:r.route("good-issues.edit",i.id),title:"Edit"},{default:S(()=>[u(J,{class:"text-yellow-500"})]),_:1},8,["href"])):y("",!0),g(x)("good_issues.delete")?(s(),n("button",{key:2,type:"button",title:"Hapus",onClick:st=>A(i.id,i.request)},[u(K,{class:"text-red-500"})],8,Fe)):y("",!0)])])]))),128))],64))),128)):(s(!0),n(m,{key:2},P(p.goodIssues.data,a=>(s(),n("tr",{key:a.id,class:"border-b border-gray-200 dark:border-gray-700"},[e("td",ze,l(E.value[a.id])+". ",1),e("td",Ye,[a.request?(s(),n(m,{key:0},[h(l(a.request),1)],64)):(s(),n("span",Je," Manual (Tanpa Referensi) "))]),e("td",Ke,l(a.date),1),e("td",We,l(a.department),1),e("td",Qe,l(a.created_by??"-"),1),e("td",Xe,[e("span",{class:z([N(a.status),"px-2.5 py-1.5 text-xs font-medium rounded-full"])},l(M(a.status)),3)]),e("td",Ze,l(a.items_count),1),e("td",et,[e("div",tt,[g(x)("good_issues.view")?(s(),B(g(C),{key:0,href:r.route("good-issues.show",a.id),title:"Lihat Detail"},{default:S(()=>[u(Y,{class:"text-blue-400"})]),_:1},8,["href"])):y("",!0),g(x)("good_issues.edit")?(s(),B(g(C),{key:1,href:r.route("good-issues.edit",a.id),title:"Edit"},{default:S(()=>[u(J,{class:"text-yellow-500"})]),_:1},8,["href"])):y("",!0),g(x)("good_issues.delete")?(s(),n("button",{key:2,type:"button",title:"Hapus",onClick:c=>A(a.id,a.request)},[u(K,{class:"text-red-500"})],8,rt)):y("",!0)])])]))),128))])]),u(de,{pagination:p.goodIssues,onPageChange:re,onPerPageChange:ae,class:"border-t"},null,8,["pagination"])]),u(ne,{show:T.value,question:"Yakin ingin menghapus permintaan",selected:`${w.value?.request||"ini"}`,title:"Hapus Permintaan Barang",confirmText:"Ya, Hapus!",maxWidth:"md",onClose:F,onConfirm:te},null,8,["show","selected"])])])],64)}}});export{vt as default};
